var nN=Object.defineProperty;var HA=n=>{throw TypeError(n)};var iN=(n,e,t)=>e in n?nN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Q=(n,e,t)=>iN(n,typeof e!="symbol"?e+"":e,t),uy=(n,e,t)=>e.has(n)||HA("Cannot "+t);var c=(n,e,t)=>(uy(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>e.has(n)?HA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),v=(n,e,t,i)=>(uy(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),E=(n,e,t)=>(uy(n,e,"access private method"),t);var rn=(n,e,t,i)=>({set _(s){v(n,e,s,t)},get _(){return c(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function C1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var x1={exports:{}},Tg={},T1={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf=Symbol.for("react.element"),sN=Symbol.for("react.portal"),rN=Symbol.for("react.fragment"),aN=Symbol.for("react.strict_mode"),oN=Symbol.for("react.profiler"),lN=Symbol.for("react.provider"),cN=Symbol.for("react.context"),uN=Symbol.for("react.forward_ref"),dN=Symbol.for("react.suspense"),hN=Symbol.for("react.memo"),fN=Symbol.for("react.lazy"),GA=Symbol.iterator;function pN(n){return n===null||typeof n!="object"?null:(n=GA&&n[GA]||n["@@iterator"],typeof n=="function"?n:null)}var _1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P1=Object.assign,R1={};function wu(n,e,t){this.props=n,this.context=e,this.refs=R1,this.updater=t||_1}wu.prototype.isReactComponent={};wu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};wu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function I1(){}I1.prototype=wu.prototype;function Gb(n,e,t){this.props=n,this.context=e,this.refs=R1,this.updater=t||_1}var qb=Gb.prototype=new I1;qb.constructor=Gb;P1(qb,wu.prototype);qb.isPureReactComponent=!0;var qA=Array.isArray,N1=Object.prototype.hasOwnProperty,Wb={current:null},M1={key:!0,ref:!0,__self:!0,__source:!0};function k1(n,e,t){var i,s={},r=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)N1.call(e,i)&&!M1.hasOwnProperty(i)&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return{$$typeof:Rf,type:n,key:r,ref:a,props:s,_owner:Wb.current}}function mN(n,e){return{$$typeof:Rf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Xb(n){return typeof n=="object"&&n!==null&&n.$$typeof===Rf}function gN(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var WA=/\/+/g;function dy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?gN(""+n.key):e.toString(36)}function Cp(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Rf:case sN:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+dy(a,0):i,qA(s)?(t="",n!=null&&(t=n.replace(WA,"$&/")+"/"),Cp(s,e,t,"",function(u){return u})):s!=null&&(Xb(s)&&(s=mN(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(WA,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",qA(n))for(var o=0;o<n.length;o++){r=n[o];var l=i+dy(r,o);a+=Cp(r,e,t,l,s)}else if(l=pN(n),typeof l=="function")for(n=l.call(n),o=0;!(r=n.next()).done;)r=r.value,l=i+dy(r,o++),a+=Cp(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Wf(n,e,t){if(n==null)return n;var i=[],s=0;return Cp(n,i,"","",function(r){return e.call(t,r,s++)}),i}function yN(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var yn={current:null},xp={transition:null},vN={ReactCurrentDispatcher:yn,ReactCurrentBatchConfig:xp,ReactCurrentOwner:Wb};function D1(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Wf,forEach:function(n,e,t){Wf(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Wf(n,function(){e++}),e},toArray:function(n){return Wf(n,function(e){return e})||[]},only:function(n){if(!Xb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};de.Component=wu;de.Fragment=rN;de.Profiler=oN;de.PureComponent=Gb;de.StrictMode=aN;de.Suspense=dN;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vN;de.act=D1;de.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=P1({},n.props),s=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=Wb.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)N1.call(e,l)&&!M1.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:Rf,type:n.type,key:s,ref:r,props:i,_owner:a}};de.createContext=function(n){return n={$$typeof:cN,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:lN,_context:n},n.Consumer=n};de.createElement=k1;de.createFactory=function(n){var e=k1.bind(null,n);return e.type=n,e};de.createRef=function(){return{current:null}};de.forwardRef=function(n){return{$$typeof:uN,render:n}};de.isValidElement=Xb;de.lazy=function(n){return{$$typeof:fN,_payload:{_status:-1,_result:n},_init:yN}};de.memo=function(n,e){return{$$typeof:hN,type:n,compare:e===void 0?null:e}};de.startTransition=function(n){var e=xp.transition;xp.transition={};try{n()}finally{xp.transition=e}};de.unstable_act=D1;de.useCallback=function(n,e){return yn.current.useCallback(n,e)};de.useContext=function(n){return yn.current.useContext(n)};de.useDebugValue=function(){};de.useDeferredValue=function(n){return yn.current.useDeferredValue(n)};de.useEffect=function(n,e){return yn.current.useEffect(n,e)};de.useId=function(){return yn.current.useId()};de.useImperativeHandle=function(n,e,t){return yn.current.useImperativeHandle(n,e,t)};de.useInsertionEffect=function(n,e){return yn.current.useInsertionEffect(n,e)};de.useLayoutEffect=function(n,e){return yn.current.useLayoutEffect(n,e)};de.useMemo=function(n,e){return yn.current.useMemo(n,e)};de.useReducer=function(n,e,t){return yn.current.useReducer(n,e,t)};de.useRef=function(n){return yn.current.useRef(n)};de.useState=function(n){return yn.current.useState(n)};de.useSyncExternalStore=function(n,e,t){return yn.current.useSyncExternalStore(n,e,t)};de.useTransition=function(){return yn.current.useTransition()};de.version="18.3.1";T1.exports=de;var O=T1.exports;const tl=C1(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bN=O,wN=Symbol.for("react.element"),AN=Symbol.for("react.fragment"),SN=Object.prototype.hasOwnProperty,EN=bN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CN={key:!0,ref:!0,__self:!0,__source:!0};function L1(n,e,t){var i,s={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)SN.call(e,i)&&!CN.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:wN,type:n,key:r,ref:a,props:s,_owner:EN.current}}Tg.Fragment=AN;Tg.jsx=L1;Tg.jsxs=L1;x1.exports=Tg;var W=x1.exports,O1={exports:{}},ni={},F1={exports:{}},B1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(M,T){var Y=M.length;M.push(T);e:for(;0<Y;){var pe=Y-1>>>1,he=M[pe];if(0<s(he,T))M[pe]=T,M[Y]=he,Y=pe;else break e}}function t(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var T=M[0],Y=M.pop();if(Y!==T){M[0]=Y;e:for(var pe=0,he=M.length,De=he>>>1;pe<De;){var Vt=2*(pe+1)-1,Ci=M[Vt],je=Vt+1,Ee=M[je];if(0>s(Ci,Y))je<he&&0>s(Ee,Ci)?(M[pe]=Ee,M[je]=Y,pe=je):(M[pe]=Ci,M[Vt]=Y,pe=Vt);else if(je<he&&0>s(Ee,Y))M[pe]=Ee,M[je]=Y,pe=je;else break e}}return T}function s(M,T){var Y=M.sortIndex-T.sortIndex;return Y!==0?Y:M.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,f=3,p=!1,m=!1,y=!1,A=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var T=t(u);T!==null;){if(T.callback===null)i(u);else if(T.startTime<=M)i(u),T.sortIndex=T.expirationTime,e(l,T);else break;T=t(u)}}function C(M){if(y=!1,w(M),!m)if(t(l)!==null)m=!0,F(x);else{var T=t(u);T!==null&&B(C,T.startTime-M)}}function x(M,T){m=!1,y&&(y=!1,g(R),R=-1),p=!0;var Y=f;try{for(w(T),h=t(l);h!==null&&(!(h.expirationTime>T)||M&&!U());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,f=h.priorityLevel;var he=pe(h.expirationTime<=T);T=n.unstable_now(),typeof he=="function"?h.callback=he:h===t(l)&&i(l),w(T)}else i(l);h=t(l)}if(h!==null)var De=!0;else{var Vt=t(u);Vt!==null&&B(C,Vt.startTime-T),De=!1}return De}finally{h=null,f=Y,p=!1}}var _=!1,P=null,R=-1,N=5,D=-1;function U(){return!(n.unstable_now()-D<N)}function fe(){if(P!==null){var M=n.unstable_now();D=M;var T=!0;try{T=P(!0,M)}finally{T?Ae():(_=!1,P=null)}}else _=!1}var Ae;if(typeof b=="function")Ae=function(){b(fe)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,te=ae.port2;ae.port1.onmessage=fe,Ae=function(){te.postMessage(null)}}else Ae=function(){A(fe,0)};function F(M){P=M,_||(_=!0,Ae())}function B(M,T){R=A(function(){M(n.unstable_now())},T)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(M){M.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,F(x))},n.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<M?Math.floor(1e3/M):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(M){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var Y=f;f=T;try{return M()}finally{f=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(M,T){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=f;f=M;try{return T()}finally{f=Y}},n.unstable_scheduleCallback=function(M,T,Y){var pe=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pe+Y:pe):Y=pe,M){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Y+he,M={id:d++,callback:T,priorityLevel:M,startTime:Y,expirationTime:he,sortIndex:-1},Y>pe?(M.sortIndex=Y,e(u,M),t(l)===null&&M===t(u)&&(y?(g(R),R=-1):y=!0,B(C,Y-pe))):(M.sortIndex=he,e(l,M),m||p||(m=!0,F(x))),M},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(M){var T=f;return function(){var Y=f;f=T;try{return M.apply(this,arguments)}finally{f=Y}}}})(B1);F1.exports=B1;var xN=F1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN=O,ti=xN;function L(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j1=new Set,_d={};function bl(n,e){uu(n,e),uu(n+"Capture",e)}function uu(n,e){for(_d[n]=e,n=0;n<e.length;n++)j1.add(e[n])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hv=Object.prototype.hasOwnProperty,_N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XA={},KA={};function PN(n){return hv.call(KA,n)?!0:hv.call(XA,n)?!1:_N.test(n)?KA[n]=!0:(XA[n]=!0,!1)}function RN(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function IN(n,e,t,i){if(e===null||typeof e>"u"||RN(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vn(n,e,t,i,s,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ut[n]=new vn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ut[e]=new vn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ut[n]=new vn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ut[n]=new vn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ut[n]=new vn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ut[n]=new vn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ut[n]=new vn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ut[n]=new vn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ut[n]=new vn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Kb=/[\-:]([a-z])/g;function Yb(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Kb,Yb);Ut[e]=new vn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Kb,Yb);Ut[e]=new vn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Kb,Yb);Ut[e]=new vn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ut[n]=new vn(n,1,!1,n.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ut[n]=new vn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Qb(n,e,t,i){var s=Ut.hasOwnProperty(e)?Ut[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IN(e,t,s,i)&&(t=null),i||s===null?PN(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Cr=TN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xf=Symbol.for("react.element"),Ml=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),Jb=Symbol.for("react.strict_mode"),fv=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),Zb=Symbol.for("react.forward_ref"),pv=Symbol.for("react.suspense"),mv=Symbol.for("react.suspense_list"),ew=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),z1=Symbol.for("react.offscreen"),YA=Symbol.iterator;function Ru(n){return n===null||typeof n!="object"?null:(n=YA&&n[YA]||n["@@iterator"],typeof n=="function"?n:null)}var Je=Object.assign,hy;function $u(n){if(hy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);hy=e&&e[1]||""}return`
`+hy+n}var fy=!1;function py(n,e){if(!n||fy)return"";fy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==r[o]){var l=`
`+s[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{fy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?$u(n):""}function NN(n){switch(n.tag){case 5:return $u(n.type);case 16:return $u("Lazy");case 13:return $u("Suspense");case 19:return $u("SuspenseList");case 0:case 2:case 15:return n=py(n.type,!1),n;case 11:return n=py(n.type.render,!1),n;case 1:return n=py(n.type,!0),n;default:return""}}function gv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case kl:return"Fragment";case Ml:return"Portal";case fv:return"Profiler";case Jb:return"StrictMode";case pv:return"Suspense";case mv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V1:return(n.displayName||"Context")+".Consumer";case U1:return(n._context.displayName||"Context")+".Provider";case Zb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ew:return e=n.displayName||null,e!==null?e:gv(n.type)||"Memo";case Rr:e=n._payload,n=n._init;try{return gv(n(e))}catch{}}return null}function MN(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gv(e);case 8:return e===Jb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $1(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kN(n){var e=$1(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Kf(n){n._valueTracker||(n._valueTracker=kN(n))}function H1(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=$1(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function wm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function yv(n,e){var t=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function QA(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Sa(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G1(n,e){e=e.checked,e!=null&&Qb(n,"checked",e,!1)}function vv(n,e){G1(n,e);var t=Sa(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?bv(n,e.type,t):e.hasOwnProperty("defaultValue")&&bv(n,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function JA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function bv(n,e,t){(e!=="number"||wm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Hu=Array.isArray;function Ql(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Sa(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function wv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ZA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(L(92));if(Hu(t)){if(1<t.length)throw Error(L(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Sa(t)}}function q1(n,e){var t=Sa(e.value),i=Sa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function eS(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function W1(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Av(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?W1(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Yf,X1=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Yf=Yf||document.createElement("div"),Yf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Pd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ud={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DN=["Webkit","ms","Moz","O"];Object.keys(ud).forEach(function(n){DN.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ud[e]=ud[n]})});function K1(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ud.hasOwnProperty(n)&&ud[n]?(""+e).trim():e+"px"}function Y1(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=K1(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var LN=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sv(n,e){if(e){if(LN[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Ev(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cv=null;function tw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xv=null,Jl=null,Zl=null;function tS(n){if(n=Mf(n)){if(typeof xv!="function")throw Error(L(280));var e=n.stateNode;e&&(e=Ng(e),xv(n.stateNode,n.type,e))}}function Q1(n){Jl?Zl?Zl.push(n):Zl=[n]:Jl=n}function J1(){if(Jl){var n=Jl,e=Zl;if(Zl=Jl=null,tS(n),e)for(n=0;n<e.length;n++)tS(e[n])}}function Z1(n,e){return n(e)}function ex(){}var my=!1;function tx(n,e,t){if(my)return n(e,t);my=!0;try{return Z1(n,e,t)}finally{my=!1,(Jl!==null||Zl!==null)&&(ex(),J1())}}function Rd(n,e){var t=n.stateNode;if(t===null)return null;var i=Ng(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(L(231,e,typeof t));return t}var Tv=!1;if(gr)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){Tv=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{Tv=!1}function ON(n,e,t,i,s,r,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var dd=!1,Am=null,Sm=!1,_v=null,FN={onError:function(n){dd=!0,Am=n}};function BN(n,e,t,i,s,r,a,o,l){dd=!1,Am=null,ON.apply(FN,arguments)}function jN(n,e,t,i,s,r,a,o,l){if(BN.apply(this,arguments),dd){if(dd){var u=Am;dd=!1,Am=null}else throw Error(L(198));Sm||(Sm=!0,_v=u)}}function wl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function nx(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function nS(n){if(wl(n)!==n)throw Error(L(188))}function UN(n){var e=n.alternate;if(!e){if(e=wl(n),e===null)throw Error(L(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return nS(s),n;if(r===i)return nS(s),e;r=r.sibling}throw Error(L(188))}if(t.return!==i.return)t=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a)throw Error(L(189))}}if(t.alternate!==i)throw Error(L(190))}if(t.tag!==3)throw Error(L(188));return t.stateNode.current===t?n:e}function ix(n){return n=UN(n),n!==null?sx(n):null}function sx(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=sx(n);if(e!==null)return e;n=n.sibling}return null}var rx=ti.unstable_scheduleCallback,iS=ti.unstable_cancelCallback,VN=ti.unstable_shouldYield,zN=ti.unstable_requestPaint,at=ti.unstable_now,$N=ti.unstable_getCurrentPriorityLevel,nw=ti.unstable_ImmediatePriority,ax=ti.unstable_UserBlockingPriority,Em=ti.unstable_NormalPriority,HN=ti.unstable_LowPriority,ox=ti.unstable_IdlePriority,_g=null,xs=null;function GN(n){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(_g,n,void 0,(n.current.flags&128)===128)}catch{}}var qi=Math.clz32?Math.clz32:XN,qN=Math.log,WN=Math.LN2;function XN(n){return n>>>=0,n===0?32:31-(qN(n)/WN|0)|0}var Qf=64,Jf=4194304;function Gu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Cm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?i=Gu(o):(r&=a,r!==0&&(i=Gu(r)))}else a=t&~s,a!==0?i=Gu(a):r!==0&&(i=Gu(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-qi(e),s=1<<t,i|=n[t],e&=~s;return i}function KN(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YN(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-qi(r),o=1<<a,l=s[a];l===-1?(!(o&t)||o&i)&&(s[a]=KN(o,e)):l<=e&&(n.expiredLanes|=o),r&=~o}}function Pv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function lx(){var n=Qf;return Qf<<=1,!(Qf&4194240)&&(Qf=64),n}function gy(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function If(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-qi(e),n[e]=t}function QN(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-qi(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function iw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-qi(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Te=0;function cx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ux,sw,dx,hx,fx,Rv=!1,Zf=[],fa=null,pa=null,ma=null,Id=new Map,Nd=new Map,Mr=[],JN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sS(n,e){switch(n){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":Id.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nd.delete(e.pointerId)}}function Nu(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Mf(e),e!==null&&sw(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function ZN(n,e,t,i,s){switch(e){case"focusin":return fa=Nu(fa,n,e,t,i,s),!0;case"dragenter":return pa=Nu(pa,n,e,t,i,s),!0;case"mouseover":return ma=Nu(ma,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Id.set(r,Nu(Id.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Nd.set(r,Nu(Nd.get(r)||null,n,e,t,i,s)),!0}return!1}function px(n){var e=Ha(n.target);if(e!==null){var t=wl(e);if(t!==null){if(e=t.tag,e===13){if(e=nx(t),e!==null){n.blockedOn=e,fx(n.priority,function(){dx(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Tp(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Iv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Cv=i,t.target.dispatchEvent(i),Cv=null}else return e=Mf(t),e!==null&&sw(e),n.blockedOn=t,!1;e.shift()}return!0}function rS(n,e,t){Tp(n)&&t.delete(e)}function eM(){Rv=!1,fa!==null&&Tp(fa)&&(fa=null),pa!==null&&Tp(pa)&&(pa=null),ma!==null&&Tp(ma)&&(ma=null),Id.forEach(rS),Nd.forEach(rS)}function Mu(n,e){n.blockedOn===e&&(n.blockedOn=null,Rv||(Rv=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,eM)))}function Md(n){function e(s){return Mu(s,n)}if(0<Zf.length){Mu(Zf[0],n);for(var t=1;t<Zf.length;t++){var i=Zf[t];i.blockedOn===n&&(i.blockedOn=null)}}for(fa!==null&&Mu(fa,n),pa!==null&&Mu(pa,n),ma!==null&&Mu(ma,n),Id.forEach(e),Nd.forEach(e),t=0;t<Mr.length;t++)i=Mr[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Mr.length&&(t=Mr[0],t.blockedOn===null);)px(t),t.blockedOn===null&&Mr.shift()}var ec=Cr.ReactCurrentBatchConfig,xm=!0;function tM(n,e,t,i){var s=Te,r=ec.transition;ec.transition=null;try{Te=1,rw(n,e,t,i)}finally{Te=s,ec.transition=r}}function nM(n,e,t,i){var s=Te,r=ec.transition;ec.transition=null;try{Te=4,rw(n,e,t,i)}finally{Te=s,ec.transition=r}}function rw(n,e,t,i){if(xm){var s=Iv(n,e,t,i);if(s===null)Ty(n,e,i,Tm,t),sS(n,i);else if(ZN(s,n,e,t,i))i.stopPropagation();else if(sS(n,i),e&4&&-1<JN.indexOf(n)){for(;s!==null;){var r=Mf(s);if(r!==null&&ux(r),r=Iv(n,e,t,i),r===null&&Ty(n,e,i,Tm,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else Ty(n,e,i,null,t)}}var Tm=null;function Iv(n,e,t,i){if(Tm=null,n=tw(i),n=Ha(n),n!==null)if(e=wl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=nx(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Tm=n,null}function mx(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($N()){case nw:return 1;case ax:return 4;case Em:case HN:return 16;case ox:return 536870912;default:return 16}default:return 16}}var da=null,aw=null,_p=null;function gx(){if(_p)return _p;var n,e=aw,t=e.length,i,s="value"in da?da.value:da.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===s[r-i];i++);return _p=s.slice(n,1<i?1-i:void 0)}function Pp(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ep(){return!0}function aS(){return!1}function ii(n){function e(t,i,s,r,a){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ep:aS,this.isPropagationStopped=aS,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ep)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ep)},persist:function(){},isPersistent:ep}),e}var Au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ow=ii(Au),Nf=Je({},Au,{view:0,detail:0}),iM=ii(Nf),yy,vy,ku,Pg=Je({},Nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ku&&(ku&&n.type==="mousemove"?(yy=n.screenX-ku.screenX,vy=n.screenY-ku.screenY):vy=yy=0,ku=n),yy)},movementY:function(n){return"movementY"in n?n.movementY:vy}}),oS=ii(Pg),sM=Je({},Pg,{dataTransfer:0}),rM=ii(sM),aM=Je({},Nf,{relatedTarget:0}),by=ii(aM),oM=Je({},Au,{animationName:0,elapsedTime:0,pseudoElement:0}),lM=ii(oM),cM=Je({},Au,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),uM=ii(cM),dM=Je({},Au,{data:0}),lS=ii(dM),hM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mM(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=pM[n])?!!e[n]:!1}function lw(){return mM}var gM=Je({},Nf,{key:function(n){if(n.key){var e=hM[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Pp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fM[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lw,charCode:function(n){return n.type==="keypress"?Pp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),yM=ii(gM),vM=Je({},Pg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cS=ii(vM),bM=Je({},Nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lw}),wM=ii(bM),AM=Je({},Au,{propertyName:0,elapsedTime:0,pseudoElement:0}),SM=ii(AM),EM=Je({},Pg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),CM=ii(EM),xM=[9,13,27,32],cw=gr&&"CompositionEvent"in window,hd=null;gr&&"documentMode"in document&&(hd=document.documentMode);var TM=gr&&"TextEvent"in window&&!hd,yx=gr&&(!cw||hd&&8<hd&&11>=hd),uS=" ",dS=!1;function vx(n,e){switch(n){case"keyup":return xM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bx(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dl=!1;function _M(n,e){switch(n){case"compositionend":return bx(e);case"keypress":return e.which!==32?null:(dS=!0,uS);case"textInput":return n=e.data,n===uS&&dS?null:n;default:return null}}function PM(n,e){if(Dl)return n==="compositionend"||!cw&&vx(n,e)?(n=gx(),_p=aw=da=null,Dl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yx&&e.locale!=="ko"?null:e.data;default:return null}}var RM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!RM[n.type]:e==="textarea"}function wx(n,e,t,i){Q1(i),e=_m(e,"onChange"),0<e.length&&(t=new ow("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var fd=null,kd=null;function IM(n){Nx(n,0)}function Rg(n){var e=Fl(n);if(H1(e))return n}function NM(n,e){if(n==="change")return e}var Ax=!1;if(gr){var wy;if(gr){var Ay="oninput"in document;if(!Ay){var fS=document.createElement("div");fS.setAttribute("oninput","return;"),Ay=typeof fS.oninput=="function"}wy=Ay}else wy=!1;Ax=wy&&(!document.documentMode||9<document.documentMode)}function pS(){fd&&(fd.detachEvent("onpropertychange",Sx),kd=fd=null)}function Sx(n){if(n.propertyName==="value"&&Rg(kd)){var e=[];wx(e,kd,n,tw(n)),tx(IM,e)}}function MM(n,e,t){n==="focusin"?(pS(),fd=e,kd=t,fd.attachEvent("onpropertychange",Sx)):n==="focusout"&&pS()}function kM(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Rg(kd)}function DM(n,e){if(n==="click")return Rg(e)}function LM(n,e){if(n==="input"||n==="change")return Rg(e)}function OM(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xi=typeof Object.is=="function"?Object.is:OM;function Dd(n,e){if(Xi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!hv.call(e,s)||!Xi(n[s],e[s]))return!1}return!0}function mS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gS(n,e){var t=mS(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=mS(t)}}function Ex(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Ex(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Cx(){for(var n=window,e=wm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=wm(n.document)}return e}function uw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function FM(n){var e=Cx(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Ex(t.ownerDocument.documentElement,t)){if(i!==null&&uw(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=gS(t,r);var a=gS(t,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var BM=gr&&"documentMode"in document&&11>=document.documentMode,Ll=null,Nv=null,pd=null,Mv=!1;function yS(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Mv||Ll==null||Ll!==wm(i)||(i=Ll,"selectionStart"in i&&uw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pd&&Dd(pd,i)||(pd=i,i=_m(Nv,"onSelect"),0<i.length&&(e=new ow("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Ll)))}function tp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ol={animationend:tp("Animation","AnimationEnd"),animationiteration:tp("Animation","AnimationIteration"),animationstart:tp("Animation","AnimationStart"),transitionend:tp("Transition","TransitionEnd")},Sy={},xx={};gr&&(xx=document.createElement("div").style,"AnimationEvent"in window||(delete Ol.animationend.animation,delete Ol.animationiteration.animation,delete Ol.animationstart.animation),"TransitionEvent"in window||delete Ol.transitionend.transition);function Ig(n){if(Sy[n])return Sy[n];if(!Ol[n])return n;var e=Ol[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in xx)return Sy[n]=e[t];return n}var Tx=Ig("animationend"),_x=Ig("animationiteration"),Px=Ig("animationstart"),Rx=Ig("transitionend"),Ix=new Map,vS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(n,e){Ix.set(n,e),bl(e,[n])}for(var Ey=0;Ey<vS.length;Ey++){var Cy=vS[Ey],jM=Cy.toLowerCase(),UM=Cy[0].toUpperCase()+Cy.slice(1);Ra(jM,"on"+UM)}Ra(Tx,"onAnimationEnd");Ra(_x,"onAnimationIteration");Ra(Px,"onAnimationStart");Ra("dblclick","onDoubleClick");Ra("focusin","onFocus");Ra("focusout","onBlur");Ra(Rx,"onTransitionEnd");uu("onMouseEnter",["mouseout","mouseover"]);uu("onMouseLeave",["mouseout","mouseover"]);uu("onPointerEnter",["pointerout","pointerover"]);uu("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VM=new Set("cancel close invalid load scroll toggle".split(" ").concat(qu));function bS(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,jN(i,e,void 0,n),n.currentTarget=null}function Nx(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;bS(s,o,u),r=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;bS(s,o,u),r=l}}}if(Sm)throw n=_v,Sm=!1,_v=null,n}function Le(n,e){var t=e[Fv];t===void 0&&(t=e[Fv]=new Set);var i=n+"__bubble";t.has(i)||(Mx(e,n,2,!1),t.add(i))}function xy(n,e,t){var i=0;e&&(i|=4),Mx(t,n,i,e)}var np="_reactListening"+Math.random().toString(36).slice(2);function Ld(n){if(!n[np]){n[np]=!0,j1.forEach(function(t){t!=="selectionchange"&&(VM.has(t)||xy(t,!1,n),xy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[np]||(e[np]=!0,xy("selectionchange",!1,e))}}function Mx(n,e,t,i){switch(mx(e)){case 1:var s=tM;break;case 4:s=nM;break;default:s=rw}t=s.bind(null,e,t,n),s=void 0,!Tv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Ty(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ha(o),a===null)return;if(l=a.tag,l===5||l===6){i=r=a;continue e}o=o.parentNode}}i=i.return}tx(function(){var u=r,d=tw(t),h=[];e:{var f=Ix.get(n);if(f!==void 0){var p=ow,m=n;switch(n){case"keypress":if(Pp(t)===0)break e;case"keydown":case"keyup":p=yM;break;case"focusin":m="focus",p=by;break;case"focusout":m="blur",p=by;break;case"beforeblur":case"afterblur":p=by;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=oS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=rM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=wM;break;case Tx:case _x:case Px:p=lM;break;case Rx:p=SM;break;case"scroll":p=iM;break;case"wheel":p=CM;break;case"copy":case"cut":case"paste":p=uM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cS}var y=(e&4)!==0,A=!y&&n==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var b=u,w;b!==null;){w=b;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,g!==null&&(C=Rd(b,g),C!=null&&y.push(Od(b,C,w)))),A)break;b=b.return}0<y.length&&(f=new p(f,m,null,t,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==Cv&&(m=t.relatedTarget||t.fromElement)&&(Ha(m)||m[yr]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?Ha(m):null,m!==null&&(A=wl(m),m!==A||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=oS,C="onMouseLeave",g="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(y=cS,C="onPointerLeave",g="onPointerEnter",b="pointer"),A=p==null?f:Fl(p),w=m==null?f:Fl(m),f=new y(C,b+"leave",p,t,d),f.target=A,f.relatedTarget=w,C=null,Ha(d)===u&&(y=new y(g,b+"enter",m,t,d),y.target=w,y.relatedTarget=A,C=y),A=C,p&&m)t:{for(y=p,g=m,b=0,w=y;w;w=Sl(w))b++;for(w=0,C=g;C;C=Sl(C))w++;for(;0<b-w;)y=Sl(y),b--;for(;0<w-b;)g=Sl(g),w--;for(;b--;){if(y===g||g!==null&&y===g.alternate)break t;y=Sl(y),g=Sl(g)}y=null}else y=null;p!==null&&wS(h,f,p,y,!1),m!==null&&A!==null&&wS(h,A,m,y,!0)}}e:{if(f=u?Fl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var x=NM;else if(hS(f))if(Ax)x=LM;else{x=kM;var _=MM}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=DM);if(x&&(x=x(n,u))){wx(h,x,t,d);break e}_&&_(n,f,u),n==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&bv(f,"number",f.value)}switch(_=u?Fl(u):window,n){case"focusin":(hS(_)||_.contentEditable==="true")&&(Ll=_,Nv=u,pd=null);break;case"focusout":pd=Nv=Ll=null;break;case"mousedown":Mv=!0;break;case"contextmenu":case"mouseup":case"dragend":Mv=!1,yS(h,t,d);break;case"selectionchange":if(BM)break;case"keydown":case"keyup":yS(h,t,d)}var P;if(cw)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Dl?vx(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(yx&&t.locale!=="ko"&&(Dl||R!=="onCompositionStart"?R==="onCompositionEnd"&&Dl&&(P=gx()):(da=d,aw="value"in da?da.value:da.textContent,Dl=!0)),_=_m(u,R),0<_.length&&(R=new lS(R,n,null,t,d),h.push({event:R,listeners:_}),P?R.data=P:(P=bx(t),P!==null&&(R.data=P)))),(P=TM?_M(n,t):PM(n,t))&&(u=_m(u,"onBeforeInput"),0<u.length&&(d=new lS("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=P))}Nx(h,e)})}function Od(n,e,t){return{instance:n,listener:e,currentTarget:t}}function _m(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Rd(n,t),r!=null&&i.unshift(Od(n,r,s)),r=Rd(n,e),r!=null&&i.push(Od(n,r,s))),n=n.return}return i}function Sl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function wS(n,e,t,i,s){for(var r=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&u!==null&&(o=u,s?(l=Rd(t,r),l!=null&&a.unshift(Od(t,l,o))):s||(l=Rd(t,r),l!=null&&a.push(Od(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var zM=/\r\n?/g,$M=/\u0000|\uFFFD/g;function AS(n){return(typeof n=="string"?n:""+n).replace(zM,`
`).replace($M,"")}function ip(n,e,t){if(e=AS(e),AS(n)!==e&&t)throw Error(L(425))}function Pm(){}var kv=null,Dv=null;function Lv(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ov=typeof setTimeout=="function"?setTimeout:void 0,HM=typeof clearTimeout=="function"?clearTimeout:void 0,SS=typeof Promise=="function"?Promise:void 0,GM=typeof queueMicrotask=="function"?queueMicrotask:typeof SS<"u"?function(n){return SS.resolve(null).then(n).catch(qM)}:Ov;function qM(n){setTimeout(function(){throw n})}function _y(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),Md(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);Md(e)}function ga(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function ES(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Su=Math.random().toString(36).slice(2),Cs="__reactFiber$"+Su,Fd="__reactProps$"+Su,yr="__reactContainer$"+Su,Fv="__reactEvents$"+Su,WM="__reactListeners$"+Su,XM="__reactHandles$"+Su;function Ha(n){var e=n[Cs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[yr]||t[Cs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=ES(n);n!==null;){if(t=n[Cs])return t;n=ES(n)}return e}n=t,t=n.parentNode}return null}function Mf(n){return n=n[Cs]||n[yr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(L(33))}function Ng(n){return n[Fd]||null}var Bv=[],Bl=-1;function Ia(n){return{current:n}}function Be(n){0>Bl||(n.current=Bv[Bl],Bv[Bl]=null,Bl--)}function ke(n,e){Bl++,Bv[Bl]=n.current,n.current=e}var Ea={},sn=Ia(Ea),In=Ia(!1),ll=Ea;function du(n,e){var t=n.type.contextTypes;if(!t)return Ea;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Nn(n){return n=n.childContextTypes,n!=null}function Rm(){Be(In),Be(sn)}function CS(n,e,t){if(sn.current!==Ea)throw Error(L(168));ke(sn,e),ke(In,t)}function kx(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(L(108,MN(n)||"Unknown",s));return Je({},t,i)}function Im(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ea,ll=sn.current,ke(sn,n),ke(In,In.current),!0}function xS(n,e,t){var i=n.stateNode;if(!i)throw Error(L(169));t?(n=kx(n,e,ll),i.__reactInternalMemoizedMergedChildContext=n,Be(In),Be(sn),ke(sn,n)):Be(In),ke(In,t)}var Bs=null,Mg=!1,Py=!1;function Dx(n){Bs===null?Bs=[n]:Bs.push(n)}function KM(n){Mg=!0,Dx(n)}function Na(){if(!Py&&Bs!==null){Py=!0;var n=0,e=Te;try{var t=Bs;for(Te=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Bs=null,Mg=!1}catch(s){throw Bs!==null&&(Bs=Bs.slice(n+1)),rx(nw,Na),s}finally{Te=e,Py=!1}}return null}var jl=[],Ul=0,Nm=null,Mm=0,pi=[],mi=0,cl=null,dr=1,hr="";function Oa(n,e){jl[Ul++]=Mm,jl[Ul++]=Nm,Nm=n,Mm=e}function Lx(n,e,t){pi[mi++]=dr,pi[mi++]=hr,pi[mi++]=cl,cl=n;var i=dr;n=hr;var s=32-qi(i)-1;i&=~(1<<s),t+=1;var r=32-qi(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,dr=1<<32-qi(e)+s|t<<s|i,hr=r+n}else dr=1<<r|t<<s|i,hr=n}function dw(n){n.return!==null&&(Oa(n,1),Lx(n,1,0))}function hw(n){for(;n===Nm;)Nm=jl[--Ul],jl[Ul]=null,Mm=jl[--Ul],jl[Ul]=null;for(;n===cl;)cl=pi[--mi],pi[mi]=null,hr=pi[--mi],pi[mi]=null,dr=pi[--mi],pi[mi]=null}var Zn=null,Jn=null,He=!1,Hi=null;function Ox(n,e){var t=vi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function TS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Zn=n,Jn=ga(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Zn=n,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=cl!==null?{id:dr,overflow:hr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=vi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Zn=n,Jn=null,!0):!1;default:return!1}}function jv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Uv(n){if(He){var e=Jn;if(e){var t=e;if(!TS(n,e)){if(jv(n))throw Error(L(418));e=ga(t.nextSibling);var i=Zn;e&&TS(n,e)?Ox(i,t):(n.flags=n.flags&-4097|2,He=!1,Zn=n)}}else{if(jv(n))throw Error(L(418));n.flags=n.flags&-4097|2,He=!1,Zn=n}}}function _S(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zn=n}function sp(n){if(n!==Zn)return!1;if(!He)return _S(n),He=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Lv(n.type,n.memoizedProps)),e&&(e=Jn)){if(jv(n))throw Fx(),Error(L(418));for(;e;)Ox(n,e),e=ga(e.nextSibling)}if(_S(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(L(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Jn=ga(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Jn=null}}else Jn=Zn?ga(n.stateNode.nextSibling):null;return!0}function Fx(){for(var n=Jn;n;)n=ga(n.nextSibling)}function hu(){Jn=Zn=null,He=!1}function fw(n){Hi===null?Hi=[n]:Hi.push(n)}var YM=Cr.ReactCurrentBatchConfig;function Du(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(L(309));var i=t.stateNode}if(!i)throw Error(L(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=s.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(L(284));if(!t._owner)throw Error(L(290,n))}return n}function rp(n,e){throw n=Object.prototype.toString.call(e),Error(L(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function PS(n){var e=n._init;return e(n._payload)}function Bx(n){function e(g,b){if(n){var w=g.deletions;w===null?(g.deletions=[b],g.flags|=16):w.push(b)}}function t(g,b){if(!n)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function i(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function s(g,b){return g=wa(g,b),g.index=0,g.sibling=null,g}function r(g,b,w){return g.index=w,n?(w=g.alternate,w!==null?(w=w.index,w<b?(g.flags|=2,b):w):(g.flags|=2,b)):(g.flags|=1048576,b)}function a(g){return n&&g.alternate===null&&(g.flags|=2),g}function o(g,b,w,C){return b===null||b.tag!==6?(b=Ly(w,g.mode,C),b.return=g,b):(b=s(b,w),b.return=g,b)}function l(g,b,w,C){var x=w.type;return x===kl?d(g,b,w.props.children,C,w.key):b!==null&&(b.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Rr&&PS(x)===b.type)?(C=s(b,w.props),C.ref=Du(g,b,w),C.return=g,C):(C=Lp(w.type,w.key,w.props,null,g.mode,C),C.ref=Du(g,b,w),C.return=g,C)}function u(g,b,w,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Oy(w,g.mode,C),b.return=g,b):(b=s(b,w.children||[]),b.return=g,b)}function d(g,b,w,C,x){return b===null||b.tag!==7?(b=il(w,g.mode,C,x),b.return=g,b):(b=s(b,w),b.return=g,b)}function h(g,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ly(""+b,g.mode,w),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xf:return w=Lp(b.type,b.key,b.props,null,g.mode,w),w.ref=Du(g,null,b),w.return=g,w;case Ml:return b=Oy(b,g.mode,w),b.return=g,b;case Rr:var C=b._init;return h(g,C(b._payload),w)}if(Hu(b)||Ru(b))return b=il(b,g.mode,w,null),b.return=g,b;rp(g,b)}return null}function f(g,b,w,C){var x=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return x!==null?null:o(g,b,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xf:return w.key===x?l(g,b,w,C):null;case Ml:return w.key===x?u(g,b,w,C):null;case Rr:return x=w._init,f(g,b,x(w._payload),C)}if(Hu(w)||Ru(w))return x!==null?null:d(g,b,w,C,null);rp(g,w)}return null}function p(g,b,w,C,x){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(w)||null,o(b,g,""+C,x);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xf:return g=g.get(C.key===null?w:C.key)||null,l(b,g,C,x);case Ml:return g=g.get(C.key===null?w:C.key)||null,u(b,g,C,x);case Rr:var _=C._init;return p(g,b,w,_(C._payload),x)}if(Hu(C)||Ru(C))return g=g.get(w)||null,d(b,g,C,x,null);rp(b,C)}return null}function m(g,b,w,C){for(var x=null,_=null,P=b,R=b=0,N=null;P!==null&&R<w.length;R++){P.index>R?(N=P,P=null):N=P.sibling;var D=f(g,P,w[R],C);if(D===null){P===null&&(P=N);break}n&&P&&D.alternate===null&&e(g,P),b=r(D,b,R),_===null?x=D:_.sibling=D,_=D,P=N}if(R===w.length)return t(g,P),He&&Oa(g,R),x;if(P===null){for(;R<w.length;R++)P=h(g,w[R],C),P!==null&&(b=r(P,b,R),_===null?x=P:_.sibling=P,_=P);return He&&Oa(g,R),x}for(P=i(g,P);R<w.length;R++)N=p(P,g,R,w[R],C),N!==null&&(n&&N.alternate!==null&&P.delete(N.key===null?R:N.key),b=r(N,b,R),_===null?x=N:_.sibling=N,_=N);return n&&P.forEach(function(U){return e(g,U)}),He&&Oa(g,R),x}function y(g,b,w,C){var x=Ru(w);if(typeof x!="function")throw Error(L(150));if(w=x.call(w),w==null)throw Error(L(151));for(var _=x=null,P=b,R=b=0,N=null,D=w.next();P!==null&&!D.done;R++,D=w.next()){P.index>R?(N=P,P=null):N=P.sibling;var U=f(g,P,D.value,C);if(U===null){P===null&&(P=N);break}n&&P&&U.alternate===null&&e(g,P),b=r(U,b,R),_===null?x=U:_.sibling=U,_=U,P=N}if(D.done)return t(g,P),He&&Oa(g,R),x;if(P===null){for(;!D.done;R++,D=w.next())D=h(g,D.value,C),D!==null&&(b=r(D,b,R),_===null?x=D:_.sibling=D,_=D);return He&&Oa(g,R),x}for(P=i(g,P);!D.done;R++,D=w.next())D=p(P,g,R,D.value,C),D!==null&&(n&&D.alternate!==null&&P.delete(D.key===null?R:D.key),b=r(D,b,R),_===null?x=D:_.sibling=D,_=D);return n&&P.forEach(function(fe){return e(g,fe)}),He&&Oa(g,R),x}function A(g,b,w,C){if(typeof w=="object"&&w!==null&&w.type===kl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xf:e:{for(var x=w.key,_=b;_!==null;){if(_.key===x){if(x=w.type,x===kl){if(_.tag===7){t(g,_.sibling),b=s(_,w.props.children),b.return=g,g=b;break e}}else if(_.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Rr&&PS(x)===_.type){t(g,_.sibling),b=s(_,w.props),b.ref=Du(g,_,w),b.return=g,g=b;break e}t(g,_);break}else e(g,_);_=_.sibling}w.type===kl?(b=il(w.props.children,g.mode,C,w.key),b.return=g,g=b):(C=Lp(w.type,w.key,w.props,null,g.mode,C),C.ref=Du(g,b,w),C.return=g,g=C)}return a(g);case Ml:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(g,b.sibling),b=s(b,w.children||[]),b.return=g,g=b;break e}else{t(g,b);break}else e(g,b);b=b.sibling}b=Oy(w,g.mode,C),b.return=g,g=b}return a(g);case Rr:return _=w._init,A(g,b,_(w._payload),C)}if(Hu(w))return m(g,b,w,C);if(Ru(w))return y(g,b,w,C);rp(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(t(g,b.sibling),b=s(b,w),b.return=g,g=b):(t(g,b),b=Ly(w,g.mode,C),b.return=g,g=b),a(g)):t(g,b)}return A}var fu=Bx(!0),jx=Bx(!1),km=Ia(null),Dm=null,Vl=null,pw=null;function mw(){pw=Vl=Dm=null}function gw(n){var e=km.current;Be(km),n._currentValue=e}function Vv(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function tc(n,e){Dm=n,pw=Vl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Pn=!0),n.firstContext=null)}function Si(n){var e=n._currentValue;if(pw!==n)if(n={context:n,memoizedValue:e,next:null},Vl===null){if(Dm===null)throw Error(L(308));Vl=n,Dm.dependencies={lanes:0,firstContext:n}}else Vl=Vl.next=n;return e}var Ga=null;function yw(n){Ga===null?Ga=[n]:Ga.push(n)}function Ux(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,yw(e)):(t.next=s.next,s.next=t),e.interleaved=t,vr(n,i)}function vr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ir=!1;function vw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vx(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function fr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ya(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ve&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,vr(n,t)}return s=i.interleaved,s===null?(e.next=e,yw(i)):(e.next=s.next,s.next=e),i.interleaved=e,vr(n,t)}function Rp(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,iw(n,t)}}function RS(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Lm(n,e,t,i){var s=n.updateQueue;Ir=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?r=u:a.next=u,a=l;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;a=0,d=u=l=null,o=r;do{var f=o.lane,p=o.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,y=o;switch(f=e,p=t,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Je({},h,f);break e;case 2:Ir=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);dl|=a,n.lanes=a,n.memoizedState=h}}function IS(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(L(191,s));s.call(i)}}}var kf={},Ts=Ia(kf),Bd=Ia(kf),jd=Ia(kf);function qa(n){if(n===kf)throw Error(L(174));return n}function bw(n,e){switch(ke(jd,e),ke(Bd,n),ke(Ts,kf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Av(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Av(e,n)}Be(Ts),ke(Ts,e)}function pu(){Be(Ts),Be(Bd),Be(jd)}function zx(n){qa(jd.current);var e=qa(Ts.current),t=Av(e,n.type);e!==t&&(ke(Bd,n),ke(Ts,t))}function ww(n){Bd.current===n&&(Be(Ts),Be(Bd))}var Xe=Ia(0);function Om(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ry=[];function Aw(){for(var n=0;n<Ry.length;n++)Ry[n]._workInProgressVersionPrimary=null;Ry.length=0}var Ip=Cr.ReactCurrentDispatcher,Iy=Cr.ReactCurrentBatchConfig,ul=0,Qe=null,bt=null,Pt=null,Fm=!1,md=!1,Ud=0,QM=0;function $t(){throw Error(L(321))}function Sw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Xi(n[t],e[t]))return!1;return!0}function Ew(n,e,t,i,s,r){if(ul=r,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ip.current=n===null||n.memoizedState===null?tk:nk,n=t(i,s),md){r=0;do{if(md=!1,Ud=0,25<=r)throw Error(L(301));r+=1,Pt=bt=null,e.updateQueue=null,Ip.current=ik,n=t(i,s)}while(md)}if(Ip.current=Bm,e=bt!==null&&bt.next!==null,ul=0,Pt=bt=Qe=null,Fm=!1,e)throw Error(L(300));return n}function Cw(){var n=Ud!==0;return Ud=0,n}function as(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Qe.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Ei(){if(bt===null){var n=Qe.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var e=Pt===null?Qe.memoizedState:Pt.next;if(e!==null)Pt=e,bt=n;else{if(n===null)throw Error(L(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Pt===null?Qe.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function Vd(n,e){return typeof e=="function"?e(n):e}function Ny(n){var e=Ei(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=n;var i=bt,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var o=a=null,l=null,u=r;do{var d=u.lane;if((ul&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=i):l=l.next=h,Qe.lanes|=d,dl|=d}u=u.next}while(u!==null&&u!==r);l===null?a=i:l.next=o,Xi(i,e.memoizedState)||(Pn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Qe.lanes|=r,dl|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function My(n){var e=Ei(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do r=n(r,a.action),a=a.next;while(a!==s);Xi(r,e.memoizedState)||(Pn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function $x(){}function Hx(n,e){var t=Qe,i=Ei(),s=e(),r=!Xi(i.memoizedState,s);if(r&&(i.memoizedState=s,Pn=!0),i=i.queue,xw(Wx.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||Pt!==null&&Pt.memoizedState.tag&1){if(t.flags|=2048,zd(9,qx.bind(null,t,i,s,e),void 0,null),It===null)throw Error(L(349));ul&30||Gx(t,e,s)}return s}function Gx(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function qx(n,e,t,i){e.value=t,e.getSnapshot=i,Xx(e)&&Kx(n)}function Wx(n,e,t){return t(function(){Xx(e)&&Kx(n)})}function Xx(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Xi(n,t)}catch{return!0}}function Kx(n){var e=vr(n,1);e!==null&&Wi(e,n,1,-1)}function NS(n){var e=as();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:n},e.queue=n,n=n.dispatch=ek.bind(null,Qe,n),[e.memoizedState,n]}function zd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Yx(){return Ei().memoizedState}function Np(n,e,t,i){var s=as();Qe.flags|=n,s.memoizedState=zd(1|e,t,void 0,i===void 0?null:i)}function kg(n,e,t,i){var s=Ei();i=i===void 0?null:i;var r=void 0;if(bt!==null){var a=bt.memoizedState;if(r=a.destroy,i!==null&&Sw(i,a.deps)){s.memoizedState=zd(e,t,r,i);return}}Qe.flags|=n,s.memoizedState=zd(1|e,t,r,i)}function MS(n,e){return Np(8390656,8,n,e)}function xw(n,e){return kg(2048,8,n,e)}function Qx(n,e){return kg(4,2,n,e)}function Jx(n,e){return kg(4,4,n,e)}function Zx(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function eT(n,e,t){return t=t!=null?t.concat([n]):null,kg(4,4,Zx.bind(null,e,n),t)}function Tw(){}function tT(n,e){var t=Ei();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Sw(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function nT(n,e){var t=Ei();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Sw(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function iT(n,e,t){return ul&21?(Xi(t,e)||(t=lx(),Qe.lanes|=t,dl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Pn=!0),n.memoizedState=t)}function JM(n,e){var t=Te;Te=t!==0&&4>t?t:4,n(!0);var i=Iy.transition;Iy.transition={};try{n(!1),e()}finally{Te=t,Iy.transition=i}}function sT(){return Ei().memoizedState}function ZM(n,e,t){var i=ba(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},rT(n))aT(e,t);else if(t=Ux(n,e,t,i),t!==null){var s=fn();Wi(t,n,i,s),oT(t,e,i)}}function ek(n,e,t){var i=ba(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(rT(n))aT(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(s.hasEagerState=!0,s.eagerState=o,Xi(o,a)){var l=e.interleaved;l===null?(s.next=s,yw(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=Ux(n,e,s,i),t!==null&&(s=fn(),Wi(t,n,i,s),oT(t,e,i))}}function rT(n){var e=n.alternate;return n===Qe||e!==null&&e===Qe}function aT(n,e){md=Fm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function oT(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,iw(n,t)}}var Bm={readContext:Si,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},tk={readContext:Si,useCallback:function(n,e){return as().memoizedState=[n,e===void 0?null:e],n},useContext:Si,useEffect:MS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Np(4194308,4,Zx.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Np(4194308,4,n,e)},useInsertionEffect:function(n,e){return Np(4,2,n,e)},useMemo:function(n,e){var t=as();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=as();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=ZM.bind(null,Qe,n),[i.memoizedState,n]},useRef:function(n){var e=as();return n={current:n},e.memoizedState=n},useState:NS,useDebugValue:Tw,useDeferredValue:function(n){return as().memoizedState=n},useTransition:function(){var n=NS(!1),e=n[0];return n=JM.bind(null,n[1]),as().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Qe,s=as();if(He){if(t===void 0)throw Error(L(407));t=t()}else{if(t=e(),It===null)throw Error(L(349));ul&30||Gx(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,MS(Wx.bind(null,i,r,n),[n]),i.flags|=2048,zd(9,qx.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=as(),e=It.identifierPrefix;if(He){var t=hr,i=dr;t=(i&~(1<<32-qi(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ud++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=QM++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},nk={readContext:Si,useCallback:tT,useContext:Si,useEffect:xw,useImperativeHandle:eT,useInsertionEffect:Qx,useLayoutEffect:Jx,useMemo:nT,useReducer:Ny,useRef:Yx,useState:function(){return Ny(Vd)},useDebugValue:Tw,useDeferredValue:function(n){var e=Ei();return iT(e,bt.memoizedState,n)},useTransition:function(){var n=Ny(Vd)[0],e=Ei().memoizedState;return[n,e]},useMutableSource:$x,useSyncExternalStore:Hx,useId:sT,unstable_isNewReconciler:!1},ik={readContext:Si,useCallback:tT,useContext:Si,useEffect:xw,useImperativeHandle:eT,useInsertionEffect:Qx,useLayoutEffect:Jx,useMemo:nT,useReducer:My,useRef:Yx,useState:function(){return My(Vd)},useDebugValue:Tw,useDeferredValue:function(n){var e=Ei();return bt===null?e.memoizedState=n:iT(e,bt.memoizedState,n)},useTransition:function(){var n=My(Vd)[0],e=Ei().memoizedState;return[n,e]},useMutableSource:$x,useSyncExternalStore:Hx,useId:sT,unstable_isNewReconciler:!1};function Ri(n,e){if(n&&n.defaultProps){e=Je({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function zv(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Je({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Dg={isMounted:function(n){return(n=n._reactInternals)?wl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=fn(),s=ba(n),r=fr(i,s);r.payload=e,t!=null&&(r.callback=t),e=ya(n,r,s),e!==null&&(Wi(e,n,s,i),Rp(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=fn(),s=ba(n),r=fr(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=ya(n,r,s),e!==null&&(Wi(e,n,s,i),Rp(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fn(),i=ba(n),s=fr(t,i);s.tag=2,e!=null&&(s.callback=e),e=ya(n,s,i),e!==null&&(Wi(e,n,i,t),Rp(e,n,i))}};function kS(n,e,t,i,s,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!Dd(t,i)||!Dd(s,r):!0}function lT(n,e,t){var i=!1,s=Ea,r=e.contextType;return typeof r=="object"&&r!==null?r=Si(r):(s=Nn(e)?ll:sn.current,i=e.contextTypes,r=(i=i!=null)?du(n,s):Ea),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function DS(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Dg.enqueueReplaceState(e,e.state,null)}function $v(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},vw(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Si(r):(r=Nn(e)?ll:sn.current,s.context=du(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(zv(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Dg.enqueueReplaceState(s,s.state,null),Lm(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function mu(n,e){try{var t="",i=e;do t+=NN(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function ky(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Hv(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var sk=typeof WeakMap=="function"?WeakMap:Map;function cT(n,e,t){t=fr(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Um||(Um=!0,e0=i),Hv(n,e)},t}function uT(n,e,t){t=fr(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){Hv(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Hv(n,e),typeof i!="function"&&(va===null?va=new Set([this]):va.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function LS(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new sk;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=vk.bind(null,n,e,t),e.then(n,n))}function OS(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function FS(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fr(-1,1),e.tag=2,ya(t,e,1))),t.lanes|=1),n)}var rk=Cr.ReactCurrentOwner,Pn=!1;function dn(n,e,t,i){e.child=n===null?jx(e,null,t,i):fu(e,n.child,t,i)}function BS(n,e,t,i,s){t=t.render;var r=e.ref;return tc(e,s),i=Ew(n,e,t,i,r,s),t=Cw(),n!==null&&!Pn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,br(n,e,s)):(He&&t&&dw(e),e.flags|=1,dn(n,e,i,s),e.child)}function jS(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!Dw(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,dT(n,e,r,i,s)):(n=Lp(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:Dd,t(a,i)&&n.ref===e.ref)return br(n,e,s)}return e.flags|=1,n=wa(r,i),n.ref=e.ref,n.return=e,e.child=n}function dT(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Dd(r,i)&&n.ref===e.ref)if(Pn=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Pn=!0);else return e.lanes=n.lanes,br(n,e,s)}return Gv(n,e,t,i,s)}function hT(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke($l,Kn),Kn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ke($l,Kn),Kn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,ke($l,Kn),Kn|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,ke($l,Kn),Kn|=i;return dn(n,e,s,t),e.child}function fT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Gv(n,e,t,i,s){var r=Nn(t)?ll:sn.current;return r=du(e,r),tc(e,s),t=Ew(n,e,t,i,r,s),i=Cw(),n!==null&&!Pn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,br(n,e,s)):(He&&i&&dw(e),e.flags|=1,dn(n,e,t,s),e.child)}function US(n,e,t,i,s){if(Nn(t)){var r=!0;Im(e)}else r=!1;if(tc(e,s),e.stateNode===null)Mp(n,e),lT(e,t,i),$v(e,t,i,s),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Si(u):(u=Nn(t)?ll:sn.current,u=du(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==u)&&DS(e,a,i,u),Ir=!1;var f=e.memoizedState;a.state=f,Lm(e,i,a,s),l=e.memoizedState,o!==i||f!==l||In.current||Ir?(typeof d=="function"&&(zv(e,t,d,i),l=e.memoizedState),(o=Ir||kS(e,t,o,i,f,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Vx(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ri(e.type,o),a.props=u,h=e.pendingProps,f=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Si(l):(l=Nn(t)?ll:sn.current,l=du(e,l));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&DS(e,a,i,l),Ir=!1,f=e.memoizedState,a.state=f,Lm(e,i,a,s);var m=e.memoizedState;o!==h||f!==m||In.current||Ir?(typeof p=="function"&&(zv(e,t,p,i),m=e.memoizedState),(u=Ir||kS(e,t,u,i,f,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),a.props=i,a.state=m,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return qv(n,e,t,i,r,s)}function qv(n,e,t,i,s,r){fT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&xS(e,t,!1),br(n,e,r);i=e.stateNode,rk.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=fu(e,n.child,null,r),e.child=fu(e,null,o,r)):dn(n,e,o,r),e.memoizedState=i.state,s&&xS(e,t,!0),e.child}function pT(n){var e=n.stateNode;e.pendingContext?CS(n,e.pendingContext,e.pendingContext!==e.context):e.context&&CS(n,e.context,!1),bw(n,e.containerInfo)}function VS(n,e,t,i,s){return hu(),fw(s),e.flags|=256,dn(n,e,t,i),e.child}var Wv={dehydrated:null,treeContext:null,retryLane:0};function Xv(n){return{baseLanes:n,cachePool:null,transitions:null}}function mT(n,e,t){var i=e.pendingProps,s=Xe.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),ke(Xe,s&1),n===null)return Uv(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,r?(i=e.mode,r=e.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Fg(a,i,0,null),n=il(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=Xv(t),e.memoizedState=Wv,n):_w(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return ak(n,e,a,i,o,s,t);if(r){r=i.fallback,a=e.mode,s=n.child,o=s.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=wa(s,l),i.subtreeFlags=s.subtreeFlags&14680064),o!==null?r=wa(o,r):(r=il(r,a,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=n.child.memoizedState,a=a===null?Xv(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=Wv,i}return r=n.child,n=r.sibling,i=wa(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function _w(n,e){return e=Fg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ap(n,e,t,i){return i!==null&&fw(i),fu(e,n.child,null,t),n=_w(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ak(n,e,t,i,s,r,a){if(t)return e.flags&256?(e.flags&=-257,i=ky(Error(L(422))),ap(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Fg({mode:"visible",children:i.children},s,0,null),r=il(r,s,a,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&fu(e,n.child,null,a),e.child.memoizedState=Xv(a),e.memoizedState=Wv,r);if(!(e.mode&1))return ap(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(L(419)),i=ky(r,i,void 0),ap(n,e,a,i)}if(o=(a&n.childLanes)!==0,Pn||o){if(i=It,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,vr(n,s),Wi(i,n,s,-1))}return kw(),i=ky(Error(L(421))),ap(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=bk.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,Jn=ga(s.nextSibling),Zn=e,He=!0,Hi=null,n!==null&&(pi[mi++]=dr,pi[mi++]=hr,pi[mi++]=cl,dr=n.id,hr=n.overflow,cl=e),e=_w(e,i.children),e.flags|=4096,e)}function zS(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Vv(n.return,e,t)}function Dy(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function gT(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(dn(n,e,i.children,t),i=Xe.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zS(n,t,e);else if(n.tag===19)zS(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(ke(Xe,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Om(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Dy(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Om(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Dy(e,!0,t,null,r);break;case"together":Dy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mp(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function br(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),dl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(L(153));if(e.child!==null){for(n=e.child,t=wa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=wa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function ok(n,e,t){switch(e.tag){case 3:pT(e),hu();break;case 5:zx(e);break;case 1:Nn(e.type)&&Im(e);break;case 4:bw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ke(km,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ke(Xe,Xe.current&1),e.flags|=128,null):t&e.child.childLanes?mT(n,e,t):(ke(Xe,Xe.current&1),n=br(n,e,t),n!==null?n.sibling:null);ke(Xe,Xe.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return gT(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Xe,Xe.current),i)break;return null;case 22:case 23:return e.lanes=0,hT(n,e,t)}return br(n,e,t)}var yT,Kv,vT,bT;yT=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Kv=function(){};vT=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,qa(Ts.current);var r=null;switch(t){case"input":s=yv(n,s),i=yv(n,i),r=[];break;case"select":s=Je({},s,{value:void 0}),i=Je({},i,{value:void 0}),r=[];break;case"textarea":s=wv(n,s),i=wv(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Pm)}Sv(t,i);var a;t=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_d.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var l=i[u];if(o=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(r||(r=[]),r.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_d.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Le("scroll",n),r||o===l||(r=[])):(r=r||[]).push(u,l))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};bT=function(n,e,t,i){t!==i&&(e.flags|=4)};function Lu(n,e){if(!He)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ht(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function lk(n,e,t){var i=e.pendingProps;switch(hw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return Nn(e.type)&&Rm(),Ht(e),null;case 3:return i=e.stateNode,pu(),Be(In),Be(sn),Aw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(sp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hi!==null&&(i0(Hi),Hi=null))),Kv(n,e),Ht(e),null;case 5:ww(e);var s=qa(jd.current);if(t=e.type,n!==null&&e.stateNode!=null)vT(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(L(166));return Ht(e),null}if(n=qa(Ts.current),sp(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Cs]=e,i[Fd]=r,n=(e.mode&1)!==0,t){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(s=0;s<qu.length;s++)Le(qu[s],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":QA(i,r),Le("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Le("invalid",i);break;case"textarea":ZA(i,r),Le("invalid",i)}Sv(t,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&ip(i.textContent,o,n),s=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&ip(i.textContent,o,n),s=["children",""+o]):_d.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Le("scroll",i)}switch(t){case"input":Kf(i),JA(i,r,!0);break;case"textarea":Kf(i),eS(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Pm)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=W1(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[Cs]=e,n[Fd]=i,yT(n,e,!1,!1),e.stateNode=n;e:{switch(a=Ev(t,i),t){case"dialog":Le("cancel",n),Le("close",n),s=i;break;case"iframe":case"object":case"embed":Le("load",n),s=i;break;case"video":case"audio":for(s=0;s<qu.length;s++)Le(qu[s],n);s=i;break;case"source":Le("error",n),s=i;break;case"img":case"image":case"link":Le("error",n),Le("load",n),s=i;break;case"details":Le("toggle",n),s=i;break;case"input":QA(n,i),s=yv(n,i),Le("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Je({},i,{value:void 0}),Le("invalid",n);break;case"textarea":ZA(n,i),s=wv(n,i),Le("invalid",n);break;default:s=i}Sv(t,s),o=s;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?Y1(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X1(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Pd(n,l):typeof l=="number"&&Pd(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(_d.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Le("scroll",n):l!=null&&Qb(n,r,l,a))}switch(t){case"input":Kf(n),JA(n,i,!1);break;case"textarea":Kf(n),eS(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Sa(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?Ql(n,!!i.multiple,r,!1):i.defaultValue!=null&&Ql(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Pm)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(n&&e.stateNode!=null)bT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(L(166));if(t=qa(jd.current),qa(Ts.current),sp(e)){if(i=e.stateNode,t=e.memoizedProps,i[Cs]=e,(r=i.nodeValue!==t)&&(n=Zn,n!==null))switch(n.tag){case 3:ip(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ip(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Cs]=e,e.stateNode=i}return Ht(e),null;case 13:if(Be(Xe),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&Jn!==null&&e.mode&1&&!(e.flags&128))Fx(),hu(),e.flags|=98560,r=!1;else if(r=sp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(L(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Cs]=e}else hu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),r=!1}else Hi!==null&&(i0(Hi),Hi=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Xe.current&1?wt===0&&(wt=3):kw())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return pu(),Kv(n,e),n===null&&Ld(e.stateNode.containerInfo),Ht(e),null;case 10:return gw(e.type._context),Ht(e),null;case 17:return Nn(e.type)&&Rm(),Ht(e),null;case 19:if(Be(Xe),r=e.memoizedState,r===null)return Ht(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Lu(r,!1);else{if(wt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Om(n),a!==null){for(e.flags|=128,Lu(r,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ke(Xe,Xe.current&1|2),e.child}n=n.sibling}r.tail!==null&&at()>gu&&(e.flags|=128,i=!0,Lu(r,!1),e.lanes=4194304)}else{if(!i)if(n=Om(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Lu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!He)return Ht(e),null}else 2*at()-r.renderingStartTime>gu&&t!==1073741824&&(e.flags|=128,i=!0,Lu(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=at(),e.sibling=null,t=Xe.current,ke(Xe,i?t&1|2:t&1),e):(Ht(e),null);case 22:case 23:return Mw(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Kn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function ck(n,e){switch(hw(e),e.tag){case 1:return Nn(e.type)&&Rm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return pu(),Be(In),Be(sn),Aw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ww(e),null;case 13:if(Be(Xe),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(L(340));hu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Be(Xe),null;case 4:return pu(),null;case 10:return gw(e.type._context),null;case 22:case 23:return Mw(),null;case 24:return null;default:return null}}var op=!1,Zt=!1,uk=typeof WeakSet=="function"?WeakSet:Set,G=null;function zl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){tt(n,e,i)}else t.current=null}function Yv(n,e,t){try{t()}catch(i){tt(n,e,i)}}var $S=!1;function dk(n,e){if(kv=xm,n=Cx(),uw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var p;h!==t||s!==0&&h.nodeType!==3||(o=a+s),h!==r||i!==0&&h.nodeType!==3||(l=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===n)break t;if(f===t&&++u===s&&(o=a),f===r&&++d===i&&(l=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Dv={focusedElem:n,selectionRange:t},xm=!1,G=e;G!==null;)if(e=G,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,G=n;else for(;G!==null;){e=G;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,A=m.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ri(e.type,y),A);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(C){tt(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}return m=$S,$S=!1,m}function gd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&Yv(e,t,r)}s=s.next}while(s!==i)}}function Lg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Qv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function wT(n){var e=n.alternate;e!==null&&(n.alternate=null,wT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Cs],delete e[Fd],delete e[Fv],delete e[WM],delete e[XM])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function AT(n){return n.tag===5||n.tag===3||n.tag===4}function HS(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||AT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Pm));else if(i!==4&&(n=n.child,n!==null))for(Jv(n,e,t),n=n.sibling;n!==null;)Jv(n,e,t),n=n.sibling}function Zv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Zv(n,e,t),n=n.sibling;n!==null;)Zv(n,e,t),n=n.sibling}var Ot=null,$i=!1;function xr(n,e,t){for(t=t.child;t!==null;)ST(n,e,t),t=t.sibling}function ST(n,e,t){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(_g,t)}catch{}switch(t.tag){case 5:Zt||zl(t,e);case 6:var i=Ot,s=$i;Ot=null,xr(n,e,t),Ot=i,$i=s,Ot!==null&&($i?(n=Ot,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ot.removeChild(t.stateNode));break;case 18:Ot!==null&&($i?(n=Ot,t=t.stateNode,n.nodeType===8?_y(n.parentNode,t):n.nodeType===1&&_y(n,t),Md(n)):_y(Ot,t.stateNode));break;case 4:i=Ot,s=$i,Ot=t.stateNode.containerInfo,$i=!0,xr(n,e,t),Ot=i,$i=s;break;case 0:case 11:case 14:case 15:if(!Zt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&Yv(t,e,a),s=s.next}while(s!==i)}xr(n,e,t);break;case 1:if(!Zt&&(zl(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){tt(t,e,o)}xr(n,e,t);break;case 21:xr(n,e,t);break;case 22:t.mode&1?(Zt=(i=Zt)||t.memoizedState!==null,xr(n,e,t),Zt=i):xr(n,e,t);break;default:xr(n,e,t)}}function GS(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new uk),e.forEach(function(i){var s=wk.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Ti(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ot=o.stateNode,$i=!1;break e;case 3:Ot=o.stateNode.containerInfo,$i=!0;break e;case 4:Ot=o.stateNode.containerInfo,$i=!0;break e}o=o.return}if(Ot===null)throw Error(L(160));ST(r,a,s),Ot=null,$i=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){tt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ET(e,n),e=e.sibling}function ET(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ti(e,n),Ji(n),i&4){try{gd(3,n,n.return),Lg(3,n)}catch(y){tt(n,n.return,y)}try{gd(5,n,n.return)}catch(y){tt(n,n.return,y)}}break;case 1:Ti(e,n),Ji(n),i&512&&t!==null&&zl(t,t.return);break;case 5:if(Ti(e,n),Ji(n),i&512&&t!==null&&zl(t,t.return),n.flags&32){var s=n.stateNode;try{Pd(s,"")}catch(y){tt(n,n.return,y)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&G1(s,r),Ev(o,a);var u=Ev(o,r);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?Y1(s,h):d==="dangerouslySetInnerHTML"?X1(s,h):d==="children"?Pd(s,h):Qb(s,d,h,u)}switch(o){case"input":vv(s,r);break;case"textarea":q1(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Ql(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Ql(s,!!r.multiple,r.defaultValue,!0):Ql(s,!!r.multiple,r.multiple?[]:"",!1))}s[Fd]=r}catch(y){tt(n,n.return,y)}}break;case 6:if(Ti(e,n),Ji(n),i&4){if(n.stateNode===null)throw Error(L(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(y){tt(n,n.return,y)}}break;case 3:if(Ti(e,n),Ji(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Md(e.containerInfo)}catch(y){tt(n,n.return,y)}break;case 4:Ti(e,n),Ji(n);break;case 13:Ti(e,n),Ji(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Iw=at())),i&4&&GS(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Zt=(u=Zt)||d,Ti(e,n),Zt=u):Ti(e,n),Ji(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(G=n,d=n.child;d!==null;){for(h=G=d;G!==null;){switch(f=G,p=f.child,f.tag){case 0:case 11:case 14:case 15:gd(4,f,f.return);break;case 1:zl(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){tt(i,t,y)}}break;case 5:zl(f,f.return);break;case 22:if(f.memoizedState!==null){WS(h);continue}}p!==null?(p.return=f,G=p):WS(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=K1("display",a))}catch(y){tt(n,n.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){tt(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ti(e,n),Ji(n),i&4&&GS(n);break;case 21:break;default:Ti(e,n),Ji(n)}}function Ji(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(AT(t)){var i=t;break e}t=t.return}throw Error(L(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Pd(s,""),i.flags&=-33);var r=HS(n);Zv(n,r,s);break;case 3:case 4:var a=i.stateNode.containerInfo,o=HS(n);Jv(n,o,a);break;default:throw Error(L(161))}}catch(l){tt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function hk(n,e,t){G=n,CT(n)}function CT(n,e,t){for(var i=(n.mode&1)!==0;G!==null;){var s=G,r=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||op;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Zt;o=op;var u=Zt;if(op=a,(Zt=l)&&!u)for(G=s;G!==null;)a=G,l=a.child,a.tag===22&&a.memoizedState!==null?XS(s):l!==null?(l.return=a,G=l):XS(s);for(;r!==null;)G=r,CT(r),r=r.sibling;G=s,op=o,Zt=u}qS(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,G=r):qS(n)}}function qS(n){for(;G!==null;){var e=G;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||Lg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Zt)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Ri(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&IS(e,r,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}IS(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Md(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Zt||e.flags&512&&Qv(e)}catch(f){tt(e,e.return,f)}}if(e===n){G=null;break}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}}function WS(n){for(;G!==null;){var e=G;if(e===n){G=null;break}var t=e.sibling;if(t!==null){t.return=e.return,G=t;break}G=e.return}}function XS(n){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Lg(4,e)}catch(l){tt(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){tt(e,s,l)}}var r=e.return;try{Qv(e)}catch(l){tt(e,r,l)}break;case 5:var a=e.return;try{Qv(e)}catch(l){tt(e,a,l)}}}catch(l){tt(e,e.return,l)}if(e===n){G=null;break}var o=e.sibling;if(o!==null){o.return=e.return,G=o;break}G=e.return}}var fk=Math.ceil,jm=Cr.ReactCurrentDispatcher,Pw=Cr.ReactCurrentOwner,bi=Cr.ReactCurrentBatchConfig,ve=0,It=null,dt=null,jt=0,Kn=0,$l=Ia(0),wt=0,$d=null,dl=0,Og=0,Rw=0,yd=null,Tn=null,Iw=0,gu=1/0,Ls=null,Um=!1,e0=null,va=null,lp=!1,ha=null,Vm=0,vd=0,t0=null,kp=-1,Dp=0;function fn(){return ve&6?at():kp!==-1?kp:kp=at()}function ba(n){return n.mode&1?ve&2&&jt!==0?jt&-jt:YM.transition!==null?(Dp===0&&(Dp=lx()),Dp):(n=Te,n!==0||(n=window.event,n=n===void 0?16:mx(n.type)),n):1}function Wi(n,e,t,i){if(50<vd)throw vd=0,t0=null,Error(L(185));If(n,t,i),(!(ve&2)||n!==It)&&(n===It&&(!(ve&2)&&(Og|=t),wt===4&&kr(n,jt)),Mn(n,i),t===1&&ve===0&&!(e.mode&1)&&(gu=at()+500,Mg&&Na()))}function Mn(n,e){var t=n.callbackNode;YN(n,e);var i=Cm(n,n===It?jt:0);if(i===0)t!==null&&iS(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&iS(t),e===1)n.tag===0?KM(KS.bind(null,n)):Dx(KS.bind(null,n)),GM(function(){!(ve&6)&&Na()}),t=null;else{switch(cx(i)){case 1:t=nw;break;case 4:t=ax;break;case 16:t=Em;break;case 536870912:t=ox;break;default:t=Em}t=MT(t,xT.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function xT(n,e){if(kp=-1,Dp=0,ve&6)throw Error(L(327));var t=n.callbackNode;if(nc()&&n.callbackNode!==t)return null;var i=Cm(n,n===It?jt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=zm(n,i);else{e=i;var s=ve;ve|=2;var r=_T();(It!==n||jt!==e)&&(Ls=null,gu=at()+500,nl(n,e));do try{gk();break}catch(o){TT(n,o)}while(!0);mw(),jm.current=r,ve=s,dt!==null?e=0:(It=null,jt=0,e=wt)}if(e!==0){if(e===2&&(s=Pv(n),s!==0&&(i=s,e=n0(n,s))),e===1)throw t=$d,nl(n,0),kr(n,i),Mn(n,at()),t;if(e===6)kr(n,i);else{if(s=n.current.alternate,!(i&30)&&!pk(s)&&(e=zm(n,i),e===2&&(r=Pv(n),r!==0&&(i=r,e=n0(n,r))),e===1))throw t=$d,nl(n,0),kr(n,i),Mn(n,at()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(L(345));case 2:Fa(n,Tn,Ls);break;case 3:if(kr(n,i),(i&130023424)===i&&(e=Iw+500-at(),10<e)){if(Cm(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){fn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Ov(Fa.bind(null,n,Tn,Ls),e);break}Fa(n,Tn,Ls);break;case 4:if(kr(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-qi(i);r=1<<a,a=e[a],a>s&&(s=a),i&=~r}if(i=s,i=at()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fk(i/1960))-i,10<i){n.timeoutHandle=Ov(Fa.bind(null,n,Tn,Ls),i);break}Fa(n,Tn,Ls);break;case 5:Fa(n,Tn,Ls);break;default:throw Error(L(329))}}}return Mn(n,at()),n.callbackNode===t?xT.bind(null,n):null}function n0(n,e){var t=yd;return n.current.memoizedState.isDehydrated&&(nl(n,e).flags|=256),n=zm(n,e),n!==2&&(e=Tn,Tn=t,e!==null&&i0(e)),n}function i0(n){Tn===null?Tn=n:Tn.push.apply(Tn,n)}function pk(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Xi(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kr(n,e){for(e&=~Rw,e&=~Og,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-qi(e),i=1<<t;n[t]=-1,e&=~i}}function KS(n){if(ve&6)throw Error(L(327));nc();var e=Cm(n,0);if(!(e&1))return Mn(n,at()),null;var t=zm(n,e);if(n.tag!==0&&t===2){var i=Pv(n);i!==0&&(e=i,t=n0(n,i))}if(t===1)throw t=$d,nl(n,0),kr(n,e),Mn(n,at()),t;if(t===6)throw Error(L(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fa(n,Tn,Ls),Mn(n,at()),null}function Nw(n,e){var t=ve;ve|=1;try{return n(e)}finally{ve=t,ve===0&&(gu=at()+500,Mg&&Na())}}function hl(n){ha!==null&&ha.tag===0&&!(ve&6)&&nc();var e=ve;ve|=1;var t=bi.transition,i=Te;try{if(bi.transition=null,Te=1,n)return n()}finally{Te=i,bi.transition=t,ve=e,!(ve&6)&&Na()}}function Mw(){Kn=$l.current,Be($l)}function nl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,HM(t)),dt!==null)for(t=dt.return;t!==null;){var i=t;switch(hw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Rm();break;case 3:pu(),Be(In),Be(sn),Aw();break;case 5:ww(i);break;case 4:pu();break;case 13:Be(Xe);break;case 19:Be(Xe);break;case 10:gw(i.type._context);break;case 22:case 23:Mw()}t=t.return}if(It=n,dt=n=wa(n.current,null),jt=Kn=e,wt=0,$d=null,Rw=Og=dl=0,Tn=yd=null,Ga!==null){for(e=0;e<Ga.length;e++)if(t=Ga[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var a=r.next;r.next=s,i.next=a}t.pending=i}Ga=null}return n}function TT(n,e){do{var t=dt;try{if(mw(),Ip.current=Bm,Fm){for(var i=Qe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Fm=!1}if(ul=0,Pt=bt=Qe=null,md=!1,Ud=0,Pw.current=null,t===null||t.return===null){wt=1,$d=e,dt=null;break}e:{var r=n,a=t.return,o=t,l=e;if(e=jt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=OS(a);if(p!==null){p.flags&=-257,FS(p,a,o,r,e),p.mode&1&&LS(r,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){LS(r,u,e),kw();break e}l=Error(L(426))}}else if(He&&o.mode&1){var A=OS(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),FS(A,a,o,r,e),fw(mu(l,o));break e}}r=l=mu(l,o),wt!==4&&(wt=2),yd===null?yd=[r]:yd.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=cT(r,l,e);RS(r,g);break e;case 1:o=l;var b=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(va===null||!va.has(w)))){r.flags|=65536,e&=-e,r.lanes|=e;var C=uT(r,o,e);RS(r,C);break e}}r=r.return}while(r!==null)}RT(t)}catch(x){e=x,dt===t&&t!==null&&(dt=t=t.return);continue}break}while(!0)}function _T(){var n=jm.current;return jm.current=Bm,n===null?Bm:n}function kw(){(wt===0||wt===3||wt===2)&&(wt=4),It===null||!(dl&268435455)&&!(Og&268435455)||kr(It,jt)}function zm(n,e){var t=ve;ve|=2;var i=_T();(It!==n||jt!==e)&&(Ls=null,nl(n,e));do try{mk();break}catch(s){TT(n,s)}while(!0);if(mw(),ve=t,jm.current=i,dt!==null)throw Error(L(261));return It=null,jt=0,wt}function mk(){for(;dt!==null;)PT(dt)}function gk(){for(;dt!==null&&!VN();)PT(dt)}function PT(n){var e=NT(n.alternate,n,Kn);n.memoizedProps=n.pendingProps,e===null?RT(n):dt=e,Pw.current=null}function RT(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=ck(t,e),t!==null){t.flags&=32767,dt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,dt=null;return}}else if(t=lk(t,e,Kn),t!==null){dt=t;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=n}while(e!==null);wt===0&&(wt=5)}function Fa(n,e,t){var i=Te,s=bi.transition;try{bi.transition=null,Te=1,yk(n,e,t,i)}finally{bi.transition=s,Te=i}return null}function yk(n,e,t,i){do nc();while(ha!==null);if(ve&6)throw Error(L(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(L(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(QN(n,r),n===It&&(dt=It=null,jt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||lp||(lp=!0,MT(Em,function(){return nc(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=bi.transition,bi.transition=null;var a=Te;Te=1;var o=ve;ve|=4,Pw.current=null,dk(n,t),ET(t,n),FM(Dv),xm=!!kv,Dv=kv=null,n.current=t,hk(t),zN(),ve=o,Te=a,bi.transition=r}else n.current=t;if(lp&&(lp=!1,ha=n,Vm=s),r=n.pendingLanes,r===0&&(va=null),GN(t.stateNode),Mn(n,at()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(Um)throw Um=!1,n=e0,e0=null,n;return Vm&1&&n.tag!==0&&nc(),r=n.pendingLanes,r&1?n===t0?vd++:(vd=0,t0=n):vd=0,Na(),null}function nc(){if(ha!==null){var n=cx(Vm),e=bi.transition,t=Te;try{if(bi.transition=null,Te=16>n?16:n,ha===null)var i=!1;else{if(n=ha,ha=null,Vm=0,ve&6)throw Error(L(331));var s=ve;for(ve|=4,G=n.current;G!==null;){var r=G,a=r.child;if(G.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:gd(8,d,r)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var f=d.sibling,p=d.return;if(wT(d),d===u){G=null;break}if(f!==null){f.return=p,G=f;break}G=p}}}var m=r.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var A=y.sibling;y.sibling=null,y=A}while(y!==null)}}G=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,G=a;else e:for(;G!==null;){if(r=G,r.flags&2048)switch(r.tag){case 0:case 11:case 15:gd(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,G=g;break e}G=r.return}}var b=n.current;for(G=b;G!==null;){a=G;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,G=w;else e:for(a=b;G!==null;){if(o=G,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Lg(9,o)}}catch(x){tt(o,o.return,x)}if(o===a){G=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,G=C;break e}G=o.return}}if(ve=s,Na(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(_g,n)}catch{}i=!0}return i}finally{Te=t,bi.transition=e}}return!1}function YS(n,e,t){e=mu(t,e),e=cT(n,e,1),n=ya(n,e,1),e=fn(),n!==null&&(If(n,1,e),Mn(n,e))}function tt(n,e,t){if(n.tag===3)YS(n,n,t);else for(;e!==null;){if(e.tag===3){YS(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(va===null||!va.has(i))){n=mu(t,n),n=uT(e,n,1),e=ya(e,n,1),n=fn(),e!==null&&(If(e,1,n),Mn(e,n));break}}e=e.return}}function vk(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=fn(),n.pingedLanes|=n.suspendedLanes&t,It===n&&(jt&t)===t&&(wt===4||wt===3&&(jt&130023424)===jt&&500>at()-Iw?nl(n,0):Rw|=t),Mn(n,e)}function IT(n,e){e===0&&(n.mode&1?(e=Jf,Jf<<=1,!(Jf&130023424)&&(Jf=4194304)):e=1);var t=fn();n=vr(n,e),n!==null&&(If(n,e,t),Mn(n,t))}function bk(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),IT(n,t)}function wk(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(L(314))}i!==null&&i.delete(e),IT(n,t)}var NT;NT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||In.current)Pn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Pn=!1,ok(n,e,t);Pn=!!(n.flags&131072)}else Pn=!1,He&&e.flags&1048576&&Lx(e,Mm,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Mp(n,e),n=e.pendingProps;var s=du(e,sn.current);tc(e,t),s=Ew(null,e,i,n,s,t);var r=Cw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(i)?(r=!0,Im(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vw(e),s.updater=Dg,e.stateNode=s,s._reactInternals=e,$v(e,i,n,t),e=qv(null,e,i,!0,r,t)):(e.tag=0,He&&r&&dw(e),dn(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Mp(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Sk(i),n=Ri(i,n),s){case 0:e=Gv(null,e,i,n,t);break e;case 1:e=US(null,e,i,n,t);break e;case 11:e=BS(null,e,i,n,t);break e;case 14:e=jS(null,e,i,Ri(i.type,n),t);break e}throw Error(L(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ri(i,s),Gv(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ri(i,s),US(n,e,i,s,t);case 3:e:{if(pT(e),n===null)throw Error(L(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Vx(n,e),Lm(e,i,null,t);var a=e.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=mu(Error(L(423)),e),e=VS(n,e,i,t,s);break e}else if(i!==s){s=mu(Error(L(424)),e),e=VS(n,e,i,t,s);break e}else for(Jn=ga(e.stateNode.containerInfo.firstChild),Zn=e,He=!0,Hi=null,t=jx(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(hu(),i===s){e=br(n,e,t);break e}dn(n,e,i,t)}e=e.child}return e;case 5:return zx(e),n===null&&Uv(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,a=s.children,Lv(i,s)?a=null:r!==null&&Lv(i,r)&&(e.flags|=32),fT(n,e),dn(n,e,a,t),e.child;case 6:return n===null&&Uv(e),null;case 13:return mT(n,e,t);case 4:return bw(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=fu(e,null,i,t):dn(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ri(i,s),BS(n,e,i,s,t);case 7:return dn(n,e,e.pendingProps,t),e.child;case 8:return dn(n,e,e.pendingProps.children,t),e.child;case 12:return dn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,a=s.value,ke(km,i._currentValue),i._currentValue=a,r!==null)if(Xi(r.value,a)){if(r.children===s.children&&!In.current){e=br(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=fr(-1,t&-t),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),Vv(r.return,t,e),o.lanes|=t;break}l=l.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(L(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Vv(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}dn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,tc(e,t),s=Si(s),i=i(s),e.flags|=1,dn(n,e,i,t),e.child;case 14:return i=e.type,s=Ri(i,e.pendingProps),s=Ri(i.type,s),jS(n,e,i,s,t);case 15:return dT(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ri(i,s),Mp(n,e),e.tag=1,Nn(i)?(n=!0,Im(e)):n=!1,tc(e,t),lT(e,i,s),$v(e,i,s,t),qv(null,e,i,!0,n,t);case 19:return gT(n,e,t);case 22:return hT(n,e,t)}throw Error(L(156,e.tag))};function MT(n,e){return rx(n,e)}function Ak(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(n,e,t,i){return new Ak(n,e,t,i)}function Dw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Sk(n){if(typeof n=="function")return Dw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Zb)return 11;if(n===ew)return 14}return 2}function wa(n,e){var t=n.alternate;return t===null?(t=vi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Lp(n,e,t,i,s,r){var a=2;if(i=n,typeof n=="function")Dw(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case kl:return il(t.children,s,r,e);case Jb:a=8,s|=8;break;case fv:return n=vi(12,t,e,s|2),n.elementType=fv,n.lanes=r,n;case pv:return n=vi(13,t,e,s),n.elementType=pv,n.lanes=r,n;case mv:return n=vi(19,t,e,s),n.elementType=mv,n.lanes=r,n;case z1:return Fg(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U1:a=10;break e;case V1:a=9;break e;case Zb:a=11;break e;case ew:a=14;break e;case Rr:a=16,i=null;break e}throw Error(L(130,n==null?n:typeof n,""))}return e=vi(a,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function il(n,e,t,i){return n=vi(7,n,i,e),n.lanes=t,n}function Fg(n,e,t,i){return n=vi(22,n,i,e),n.elementType=z1,n.lanes=t,n.stateNode={isHidden:!1},n}function Ly(n,e,t){return n=vi(6,n,null,e),n.lanes=t,n}function Oy(n,e,t){return e=vi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Ek(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gy(0),this.expirationTimes=gy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gy(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lw(n,e,t,i,s,r,a,o,l){return n=new Ek(n,e,t,o,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=vi(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},vw(r),n}function Ck(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ml,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function kT(n){if(!n)return Ea;n=n._reactInternals;e:{if(wl(n)!==n||n.tag!==1)throw Error(L(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(n.tag===1){var t=n.type;if(Nn(t))return kx(n,t,e)}return e}function DT(n,e,t,i,s,r,a,o,l){return n=Lw(t,i,!0,n,s,r,a,o,l),n.context=kT(null),t=n.current,i=fn(),s=ba(t),r=fr(i,s),r.callback=e??null,ya(t,r,s),n.current.lanes=s,If(n,s,i),Mn(n,i),n}function Bg(n,e,t,i){var s=e.current,r=fn(),a=ba(s);return t=kT(t),e.context===null?e.context=t:e.pendingContext=t,e=fr(r,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=ya(s,e,a),n!==null&&(Wi(n,s,a,r),Rp(n,s,a)),a}function $m(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function QS(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ow(n,e){QS(n,e),(n=n.alternate)&&QS(n,e)}function xk(){return null}var LT=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fw(n){this._internalRoot=n}jg.prototype.render=Fw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(L(409));Bg(n,e,null,null)};jg.prototype.unmount=Fw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;hl(function(){Bg(null,n,null,null)}),e[yr]=null}};function jg(n){this._internalRoot=n}jg.prototype.unstable_scheduleHydration=function(n){if(n){var e=hx();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Mr.length&&e!==0&&e<Mr[t].priority;t++);Mr.splice(t,0,n),t===0&&px(n)}};function Bw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ug(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function JS(){}function Tk(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=$m(a);r.call(u)}}var a=DT(e,i,n,0,null,!1,!1,"",JS);return n._reactRootContainer=a,n[yr]=a.current,Ld(n.nodeType===8?n.parentNode:n),hl(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var o=i;i=function(){var u=$m(l);o.call(u)}}var l=Lw(n,0,!1,null,null,!1,!1,"",JS);return n._reactRootContainer=l,n[yr]=l.current,Ld(n.nodeType===8?n.parentNode:n),hl(function(){Bg(e,l,t,i)}),l}function Vg(n,e,t,i,s){var r=t._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var o=s;s=function(){var l=$m(a);o.call(l)}}Bg(e,a,n,s)}else a=Tk(t,e,n,s,i);return $m(a)}ux=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Gu(e.pendingLanes);t!==0&&(iw(e,t|1),Mn(e,at()),!(ve&6)&&(gu=at()+500,Na()))}break;case 13:hl(function(){var i=vr(n,1);if(i!==null){var s=fn();Wi(i,n,1,s)}}),Ow(n,1)}};sw=function(n){if(n.tag===13){var e=vr(n,134217728);if(e!==null){var t=fn();Wi(e,n,134217728,t)}Ow(n,134217728)}};dx=function(n){if(n.tag===13){var e=ba(n),t=vr(n,e);if(t!==null){var i=fn();Wi(t,n,e,i)}Ow(n,e)}};hx=function(){return Te};fx=function(n,e){var t=Te;try{return Te=n,e()}finally{Te=t}};xv=function(n,e,t){switch(e){case"input":if(vv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=Ng(i);if(!s)throw Error(L(90));H1(i),vv(i,s)}}}break;case"textarea":q1(n,t);break;case"select":e=t.value,e!=null&&Ql(n,!!t.multiple,e,!1)}};Z1=Nw;ex=hl;var _k={usingClientEntryPoint:!1,Events:[Mf,Fl,Ng,Q1,J1,Nw]},Ou={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pk={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ix(n),n===null?null:n.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||xk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cp.isDisabled&&cp.supportsFiber)try{_g=cp.inject(Pk),xs=cp}catch{}}ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_k;ni.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bw(e))throw Error(L(200));return Ck(n,e,null,t)};ni.createRoot=function(n,e){if(!Bw(n))throw Error(L(299));var t=!1,i="",s=LT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lw(n,1,!1,null,null,t,!1,i,s),n[yr]=e.current,Ld(n.nodeType===8?n.parentNode:n),new Fw(e)};ni.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(L(188)):(n=Object.keys(n).join(","),Error(L(268,n)));return n=ix(e),n=n===null?null:n.stateNode,n};ni.flushSync=function(n){return hl(n)};ni.hydrate=function(n,e,t){if(!Ug(e))throw Error(L(200));return Vg(null,n,e,!0,t)};ni.hydrateRoot=function(n,e,t){if(!Bw(n))throw Error(L(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",a=LT;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=DT(e,null,n,1,t??null,s,!1,r,a),n[yr]=e.current,Ld(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new jg(e)};ni.render=function(n,e,t){if(!Ug(e))throw Error(L(200));return Vg(null,n,e,!1,t)};ni.unmountComponentAtNode=function(n){if(!Ug(n))throw Error(L(40));return n._reactRootContainer?(hl(function(){Vg(null,null,n,!1,function(){n._reactRootContainer=null,n[yr]=null})}),!0):!1};ni.unstable_batchedUpdates=Nw;ni.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Ug(t))throw Error(L(200));if(n==null||n._reactInternals===void 0)throw Error(L(38));return Vg(n,e,t,!1,i)};ni.version="18.3.1-next-f1338f8080-20240426";function OT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OT)}catch(n){console.error(n)}}OT(),O1.exports=ni;var Rk=O1.exports,FT,ZS=Rk;FT=ZS.createRoot,ZS.hydrateRoot;const jw=O.createContext({});function Uw(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const Vw=typeof window<"u",BT=Vw?O.useLayoutEffect:O.useEffect,zg=O.createContext(null);function zw(n,e){n.indexOf(e)===-1&&n.push(e)}function $w(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const wr=(n,e,t)=>t>e?e:t<n?n:t;let Hw=()=>{};const Ar={},jT=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function UT(n){return typeof n=="object"&&n!==null}const VT=n=>/^0[^.\s]+$/u.test(n);function Gw(n){let e;return()=>(e===void 0&&(e=n()),e)}const wi=n=>n,Ik=(n,e)=>t=>e(n(t)),Df=(...n)=>n.reduce(Ik),Hd=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class qw{constructor(){this.subscriptions=[]}add(e){return zw(this.subscriptions,e),()=>$w(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _s=n=>n*1e3,Ps=n=>n/1e3;function zT(n,e){return e?n*(1e3/e):0}const $T=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Nk=1e-7,Mk=12;function kk(n,e,t,i,s){let r,a,o=0;do a=e+(t-e)/2,r=$T(a,i,s)-n,r>0?t=a:e=a;while(Math.abs(r)>Nk&&++o<Mk);return a}function Lf(n,e,t,i){if(n===e&&t===i)return wi;const s=r=>kk(r,0,1,n,t);return r=>r===0||r===1?r:$T(s(r),e,i)}const HT=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,GT=n=>e=>1-n(1-e),qT=Lf(.33,1.53,.69,.99),Ww=GT(qT),WT=HT(Ww),XT=n=>(n*=2)<1?.5*Ww(n):.5*(2-Math.pow(2,-10*(n-1))),Xw=n=>1-Math.sin(Math.acos(n)),KT=GT(Xw),YT=HT(Xw),Dk=Lf(.42,0,1,1),Lk=Lf(0,0,.58,1),QT=Lf(.42,0,.58,1),Ok=n=>Array.isArray(n)&&typeof n[0]!="number",JT=n=>Array.isArray(n)&&typeof n[0]=="number",Fk={linear:wi,easeIn:Dk,easeInOut:QT,easeOut:Lk,circIn:Xw,circInOut:YT,circOut:KT,backIn:Ww,backInOut:WT,backOut:qT,anticipate:XT},Bk=n=>typeof n=="string",eE=n=>{if(JT(n)){Hw(n.length===4);const[e,t,i,s]=n;return Lf(e,t,i,s)}else if(Bk(n))return Fk[n];return n},up=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],tE={value:null};function jk(n,e){let t=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(h){a.has(h)&&(d.schedule(h),n()),l++,h(o)}const d={schedule:(h,f=!1,p=!1)=>{const y=p&&s?t:i;return f&&a.add(h),y.has(h)||y.add(h),h},cancel:h=>{i.delete(h),a.delete(h)},process:h=>{if(o=h,s){r=!0;return}s=!0,[t,i]=[i,t],t.forEach(u),e&&tE.value&&tE.value.frameloop[e].push(l),l=0,t.clear(),s=!1,r&&(r=!1,d.process(h))}};return d}const Uk=40;function ZT(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,a=up.reduce((w,C)=>(w[C]=jk(r,e?C:void 0),w),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:m}=a,y=()=>{const w=Ar.useManualTiming?s.timestamp:performance.now();t=!1,Ar.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(w-s.timestamp,Uk),1)),s.timestamp=w,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),m.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(y))},A=()=>{t=!0,i=!0,s.isProcessing||n(y)};return{schedule:up.reduce((w,C)=>{const x=a[C];return w[C]=(_,P=!1,R=!1)=>(t||A(),x.schedule(_,P,R)),w},{}),cancel:w=>{for(let C=0;C<up.length;C++)a[up[C]].cancel(w)},state:s,steps:a}}const{schedule:Ge,cancel:Ca,state:Ft,steps:Fy}=ZT(typeof requestAnimationFrame<"u"?requestAnimationFrame:wi,!0);let Op;function Vk(){Op=void 0}const Rn={now:()=>(Op===void 0&&Rn.set(Ft.isProcessing||Ar.useManualTiming?Ft.timestamp:performance.now()),Op),set:n=>{Op=n,queueMicrotask(Vk)}},e_=n=>e=>typeof e=="string"&&e.startsWith(n),Kw=e_("--"),zk=e_("var(--"),Yw=n=>zk(n)?$k.test(n.split("/*")[0].trim()):!1,$k=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Eu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Gd={...Eu,transform:n=>wr(0,1,n)},dp={...Eu,default:1},bd=n=>Math.round(n*1e5)/1e5,Qw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Hk(n){return n==null}const Gk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jw=(n,e)=>t=>!!(typeof t=="string"&&Gk.test(t)&&t.startsWith(n)||e&&!Hk(t)&&Object.prototype.hasOwnProperty.call(t,e)),t_=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,r,a,o]=i.match(Qw);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},qk=n=>wr(0,255,n),By={...Eu,transform:n=>Math.round(qk(n))},Wa={test:Jw("rgb","red"),parse:t_("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+By.transform(n)+", "+By.transform(e)+", "+By.transform(t)+", "+bd(Gd.transform(i))+")"};function Wk(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const s0={test:Jw("#"),parse:Wk,transform:Wa.transform},Of=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),_r=Of("deg"),Rs=Of("%"),Z=Of("px"),Xk=Of("vh"),Kk=Of("vw"),nE={...Rs,parse:n=>Rs.parse(n)/100,transform:n=>Rs.transform(n*100)},Hl={test:Jw("hsl","hue"),parse:t_("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Rs.transform(bd(e))+", "+Rs.transform(bd(t))+", "+bd(Gd.transform(i))+")"},ut={test:n=>Wa.test(n)||s0.test(n)||Hl.test(n),parse:n=>Wa.test(n)?Wa.parse(n):Hl.test(n)?Hl.parse(n):s0.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Wa.transform(n):Hl.transform(n),getAnimatableNone:n=>{const e=ut.parse(n);return e.alpha=0,ut.transform(e)}},Yk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qk(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Qw))==null?void 0:e.length)||0)+(((t=n.match(Yk))==null?void 0:t.length)||0)>0}const n_="number",i_="color",Jk="var",Zk="var(",iE="${}",eD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qd(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(eD,l=>(ut.test(l)?(i.color.push(r),s.push(i_),t.push(ut.parse(l))):l.startsWith(Zk)?(i.var.push(r),s.push(Jk),t.push(l)):(i.number.push(r),s.push(n_),t.push(parseFloat(l))),++r,iE)).split(iE);return{values:t,split:o,indexes:i,types:s}}function s_(n){return qd(n).values}function r_(n){const{split:e,types:t}=qd(n),i=e.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=e[a],s[a]!==void 0){const o=t[a];o===n_?r+=bd(s[a]):o===i_?r+=ut.transform(s[a]):r+=s[a]}return r}}const tD=n=>typeof n=="number"?0:ut.test(n)?ut.getAnimatableNone(n):n;function nD(n){const e=s_(n);return r_(n)(e.map(tD))}const xa={test:Qk,parse:s_,createTransformer:r_,getAnimatableNone:nD};function jy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function iD({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,a=0;if(!e)s=r=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;s=jy(l,o,n+1/3),r=jy(l,o,n),a=jy(l,o,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function Hm(n,e){return t=>t>0?e:n}const Ke=(n,e,t)=>n+(e-n)*t,Uy=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},sD=[s0,Wa,Hl],rD=n=>sD.find(e=>e.test(n));function sE(n){const e=rD(n);if(!e)return!1;let t=e.parse(n);return e===Hl&&(t=iD(t)),t}const rE=(n,e)=>{const t=sE(n),i=sE(e);if(!t||!i)return Hm(n,e);const s={...t};return r=>(s.red=Uy(t.red,i.red,r),s.green=Uy(t.green,i.green,r),s.blue=Uy(t.blue,i.blue,r),s.alpha=Ke(t.alpha,i.alpha,r),Wa.transform(s))},r0=new Set(["none","hidden"]);function aD(n,e){return r0.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function oD(n,e){return t=>Ke(n,e,t)}function Zw(n){return typeof n=="number"?oD:typeof n=="string"?Yw(n)?Hm:ut.test(n)?rE:uD:Array.isArray(n)?a_:typeof n=="object"?ut.test(n)?rE:lD:Hm}function a_(n,e){const t=[...n],i=t.length,s=n.map((r,a)=>Zw(r)(r,e[a]));return r=>{for(let a=0;a<i;a++)t[a]=s[a](r);return t}}function lD(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Zw(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function cD(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],a=n.indexes[r][i[r]],o=n.values[a]??0;t[s]=o,i[r]++}return t}const uD=(n,e)=>{const t=xa.createTransformer(e),i=qd(n),s=qd(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?r0.has(n)&&!s.values.length||r0.has(e)&&!i.values.length?aD(n,e):Df(a_(cD(i,s),s.values),t):Hm(n,e)};function o_(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ke(n,e,t):Zw(n)(n,e)}const dD=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Ge.update(e,t),stop:()=>Ca(e),now:()=>Ft.isProcessing?Ft.timestamp:Rn.now()}},l_=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Gm=2e4;function eA(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Gm;)e+=t,i=n.next(e);return e>=Gm?1/0:e}function hD(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(eA(i),Gm);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:Ps(s)}}const fD=5;function c_(n,e,t){const i=Math.max(e-fD,0);return zT(t-n(i),e-i)}const et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vy=.001;function pD({duration:n=et.duration,bounce:e=et.bounce,velocity:t=et.velocity,mass:i=et.mass}){let s,r,a=1-e;a=wr(et.minDamping,et.maxDamping,a),n=wr(et.minDuration,et.maxDuration,Ps(n)),a<1?(s=u=>{const d=u*a,h=d*n,f=d-t,p=a0(u,a),m=Math.exp(-h);return Vy-f/p*m},r=u=>{const h=u*a*n,f=h*t+t,p=Math.pow(a,2)*Math.pow(u,2)*n,m=Math.exp(-h),y=a0(Math.pow(u,2),a);return(-s(u)+Vy>0?-1:1)*((f-p)*m)/y}):(s=u=>{const d=Math.exp(-u*n),h=(u-t)*n+1;return-Vy+d*h},r=u=>{const d=Math.exp(-u*n),h=(t-u)*(n*n);return d*h});const o=5/n,l=gD(s,r,o);if(n=_s(n),isNaN(l))return{stiffness:et.stiffness,damping:et.damping,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:a*2*Math.sqrt(i*u),duration:n}}}const mD=12;function gD(n,e,t){let i=t;for(let s=1;s<mD;s++)i=i-n(i)/e(i);return i}function a0(n,e){return n*Math.sqrt(1-e*e)}const yD=["duration","bounce"],vD=["stiffness","damping","mass"];function aE(n,e){return e.some(t=>n[t]!==void 0)}function bD(n){let e={velocity:et.velocity,stiffness:et.stiffness,damping:et.damping,mass:et.mass,isResolvedFromDuration:!1,...n};if(!aE(n,vD)&&aE(n,yD))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,r=2*wr(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:et.mass,stiffness:s,damping:r}}else{const t=pD(n);e={...e,...t,mass:et.mass},e.isResolvedFromDuration=!0}return e}function qm(n=et.visualDuration,e=et.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const r=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=bD({...t,velocity:-Ps(t.velocity||0)}),m=f||0,y=u/(2*Math.sqrt(l*d)),A=a-r,g=Ps(Math.sqrt(l/d)),b=Math.abs(A)<5;i||(i=b?et.restSpeed.granular:et.restSpeed.default),s||(s=b?et.restDelta.granular:et.restDelta.default);let w;if(y<1){const x=a0(g,y);w=_=>{const P=Math.exp(-y*g*_);return a-P*((m+y*g*A)/x*Math.sin(x*_)+A*Math.cos(x*_))}}else if(y===1)w=x=>a-Math.exp(-g*x)*(A+(m+g*A)*x);else{const x=g*Math.sqrt(y*y-1);w=_=>{const P=Math.exp(-y*g*_),R=Math.min(x*_,300);return a-P*((m+y*g*A)*Math.sinh(R)+x*A*Math.cosh(R))/x}}const C={calculatedDuration:p&&h||null,next:x=>{const _=w(x);if(p)o.done=x>=h;else{let P=x===0?m:0;y<1&&(P=x===0?_s(m):c_(w,x,_));const R=Math.abs(P)<=i,N=Math.abs(a-_)<=s;o.done=R&&N}return o.value=o.done?a:_,o},toString:()=>{const x=Math.min(eA(C),Gm),_=l_(P=>C.next(x*P).value,x,30);return x+"ms "+_},toTransition:()=>{}};return C}qm.applyToOptions=n=>{const e=hD(n,100,qm);return n.ease=e.ease,n.duration=_s(e.duration),n.type="keyframes",n};function o0({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:d}){const h=n[0],f={done:!1,value:h},p=R=>o!==void 0&&R<o||l!==void 0&&R>l,m=R=>o===void 0?l:l===void 0||Math.abs(o-R)<Math.abs(l-R)?o:l;let y=t*e;const A=h+y,g=a===void 0?A:a(A);g!==A&&(y=g-h);const b=R=>-y*Math.exp(-R/i),w=R=>g+b(R),C=R=>{const N=b(R),D=w(R);f.done=Math.abs(N)<=u,f.value=f.done?g:D};let x,_;const P=R=>{p(f.value)&&(x=R,_=qm({keyframes:[f.value,m(f.value)],velocity:c_(w,R,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:R=>{let N=!1;return!_&&x===void 0&&(N=!0,C(R),P(R)),x!==void 0&&R>=x?_.next(R-x):(!N&&C(R),f)}}}function wD(n,e,t){const i=[],s=t||Ar.mix||o_,r=n.length-1;for(let a=0;a<r;a++){let o=s(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||wi:e;o=Df(l,o)}i.push(o)}return i}function AD(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(Hw(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=wD(e,i,s),l=o.length,u=d=>{if(a&&d<n[0])return e[0];let h=0;if(l>1)for(;h<n.length-2&&!(d<n[h+1]);h++);const f=Hd(n[h],n[h+1],d);return o[h](f)};return t?d=>u(wr(n[0],n[r-1],d)):u}function SD(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Hd(0,e,i);n.push(Ke(t,1,s))}}function ED(n){const e=[0];return SD(e,n.length-1),e}function CD(n,e){return n.map(t=>t*e)}function xD(n,e){return n.map(()=>e||QT).splice(0,n.length-1)}function wd({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=Ok(i)?i.map(eE):eE(i),r={done:!1,value:e[0]},a=CD(t&&t.length===e.length?t:ED(e),n),o=AD(a,e,{ease:Array.isArray(s)?s:xD(e,s)});return{calculatedDuration:n,next:l=>(r.value=o(l),r.done=l>=n,r)}}const TD=n=>n!==null;function tA(n,{repeat:e,repeatType:t="loop"},i,s=1){const r=n.filter(TD),o=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const _D={decay:o0,inertia:o0,tween:wd,keyframes:wd,spring:qm};function u_(n){typeof n.type=="string"&&(n.type=_D[n.type])}class nA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const PD=n=>n/100;class iA extends nA{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:t}=this.options;t&&t.updatedAt!==Rn.now()&&this.tick(Rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;u_(e);const{type:t=wd,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:o}=e;const l=t||wd;l!==wd&&typeof o[0]!="number"&&(this.mixKeyframes=Df(PD,o_(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=eA(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:y,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,C=i;if(h){const R=Math.min(this.currentTime,s)/o;let N=Math.floor(R),D=R%1;!D&&R>=1&&(D=1),D===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(f==="reverse"?(D=1-D,p&&(D-=p/o)):f==="mirror"&&(C=a)),w=wr(0,1,D)*o}const x=b?{done:!1,value:d[0]}:C.next(w);r&&(x.value=r(x.value));let{done:_}=x;!b&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return P&&m!==o0&&(x.value=tA(d,this.options,A,this.speed)),y&&y(x.value),P&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return Ps(this.calculatedDuration)}get time(){return Ps(this.currentTime)}set time(e){var t;e=_s(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Rn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ps(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=dD,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function RD(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Xa=n=>n*180/Math.PI,l0=n=>{const e=Xa(Math.atan2(n[1],n[0]));return c0(e)},ID={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:l0,rotateZ:l0,skewX:n=>Xa(Math.atan(n[1])),skewY:n=>Xa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},c0=n=>(n=n%360,n<0&&(n+=360),n),oE=l0,lE=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),cE=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),ND={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lE,scaleY:cE,scale:n=>(lE(n)+cE(n))/2,rotateX:n=>c0(Xa(Math.atan2(n[6],n[5]))),rotateY:n=>c0(Xa(Math.atan2(-n[2],n[0]))),rotateZ:oE,rotate:oE,skewX:n=>Xa(Math.atan(n[4])),skewY:n=>Xa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function u0(n){return n.includes("scale")?1:0}function d0(n,e){if(!n||n==="none")return u0(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=ND,s=t;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=ID,s=o}if(!s)return u0(e);const r=i[e],a=s[1].split(",").map(kD);return typeof r=="function"?r(a):a[r]}const MD=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return d0(t,e)};function kD(n){return parseFloat(n.trim())}const Cu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xu=new Set(Cu),uE=n=>n===Eu||n===Z,DD=new Set(["x","y","z"]),LD=Cu.filter(n=>!DD.has(n));function OD(n){const e=[];return LD.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const sl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>d0(e,"x"),y:(n,{transform:e})=>d0(e,"y")};sl.translateX=sl.x;sl.translateY=sl.y;const rl=new Set;let h0=!1,f0=!1,p0=!1;function d_(){if(f0){const n=Array.from(rl).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=OD(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,a])=>{var o;(o=i.getValue(r))==null||o.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}f0=!1,h0=!1,rl.forEach(n=>n.complete(p0)),rl.clear()}function h_(){rl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(f0=!0)})}function FD(){p0=!0,h_(),d_(),p0=!1}class sA{constructor(e,t,i,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(rl.add(this),h0||(h0=!0,Ge.read(h_),Ge.resolveKeyframes(d_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&t){const o=i.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}RD(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),rl.delete(this)}cancel(){this.state==="scheduled"&&(rl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const BD=n=>n.startsWith("--");function jD(n,e,t){BD(e)?n.style.setProperty(e,t):n.style[e]=t}const UD=Gw(()=>window.ScrollTimeline!==void 0),VD={};function zD(n,e){const t=Gw(n);return()=>VD[e]??t()}const f_=zD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wu=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,dE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wu([0,.65,.55,1]),circOut:Wu([.55,0,1,.45]),backIn:Wu([.31,.01,.66,-.59]),backOut:Wu([.33,1.53,.69,.99])};function p_(n,e){if(n)return typeof n=="function"?f_()?l_(n,e):"ease-out":JT(n)?Wu(n):Array.isArray(n)?n.map(t=>p_(t,e)||dE.easeOut):dE[n]}function $D(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[e]:t};l&&(d.offset=l);const h=p_(o,s);Array.isArray(h)&&(d.easing=h);const f={delay:i,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),n.animate(d,f)}function m_(n){return typeof n=="function"&&"applyToOptions"in n}function HD({type:n,...e}){return m_(n)&&f_()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class GD extends nA{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,Hw(typeof e.type!="string");const u=HD(e);this.animation=$D(t,i,s,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const d=tA(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):jD(t,i,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return Ps(Number(e))}get time(){return Ps(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_s(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&UD()?(this.animation.timeline=e,wi):t(this)}}const g_={anticipate:XT,backInOut:WT,circInOut:YT};function qD(n){return n in g_}function WD(n){typeof n.ease=="string"&&qD(n.ease)&&(n.ease=g_[n.ease])}const hE=10;class XD extends GD{constructor(e){WD(e),u_(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:r,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new iA({...a,autoplay:!1}),l=_s(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-hE).value,o.sample(l).value,hE),o.stop()}}const fE=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(xa.test(n)||n==="0")&&!n.startsWith("url("));function KD(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function YD(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],a=fE(s,e),o=fE(r,e);return!a||!o?!1:KD(n)||(t==="spring"||m_(t))&&i}function rA(n){return UT(n)&&"offsetHeight"in n}const QD=new Set(["opacity","clipPath","filter","transform"]),JD=Gw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ZD(n){var u;const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:r,type:a}=n;if(!rA((u=e==null?void 0:e.owner)==null?void 0:u.current))return!1;const{onUpdate:o,transformTemplate:l}=e.owner.getProps();return JD()&&t&&QD.has(t)&&(t!=="transform"||!l)&&!o&&!i&&s!=="mirror"&&r!==0&&a!=="inertia"}const eL=40;class tL extends nA{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:d,...h}){var m;super(),this.stop=()=>{var y,A;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=Rn.now();const f={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:a,name:l,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||sA;this.keyframeResolver=new p(o,(y,A,g)=>this.onKeyframesResolved(y,A,f,!g),l,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:d}=i;this.resolvedAt=Rn.now(),YD(e,r,a,o)||((Ar.instantAnimations||!l)&&(d==null||d(tA(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>eL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},p=!u&&ZD(f)?new XD({...f,element:f.motionValue.owner.current}):new iA(f);p.finished.then(()=>this.notifyFinished()).catch(wi),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),FD()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const nL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function iL(n){const e=nL.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function y_(n,e,t=1){const[i,s]=iL(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const a=r.trim();return jT(a)?parseFloat(a):a}return Yw(s)?y_(s,e,t+1):s}function aA(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const v_=new Set(["width","height","top","left","right","bottom",...Cu]),sL={test:n=>n==="auto",parse:n=>n},b_=n=>e=>e.test(n),w_=[Eu,Z,Rs,_r,Kk,Xk,sL],pE=n=>w_.find(b_(n));function rL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||VT(n):!0}const aL=new Set(["brightness","contrast","saturate","opacity"]);function oL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Qw)||[];if(!i)return n;const s=t.replace(i,"");let r=aL.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const lL=/\b([a-z-]*)\(.*?\)/gu,m0={...xa,getAnimatableNone:n=>{const e=n.match(lL);return e?e.map(oL).join(" "):n}},mE={...Eu,transform:Math.round},cL={rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:dp,scaleX:dp,scaleY:dp,scaleZ:dp,skew:_r,skewX:_r,skewY:_r,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:Gd,originX:nE,originY:nE,originZ:Z},oA={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,radius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,backgroundPositionX:Z,backgroundPositionY:Z,...cL,zIndex:mE,fillOpacity:Gd,strokeOpacity:Gd,numOctaves:mE},uL={...oA,color:ut,backgroundColor:ut,outlineColor:ut,fill:ut,stroke:ut,borderColor:ut,borderTopColor:ut,borderRightColor:ut,borderBottomColor:ut,borderLeftColor:ut,filter:m0,WebkitFilter:m0},A_=n=>uL[n];function S_(n,e){let t=A_(n);return t!==m0&&(t=xa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const dL=new Set(["auto","none","0"]);function hL(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!dL.has(r)&&qd(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=S_(t,s)}class fL extends sA{constructor(e,t,i,s,r){super(e,t,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Yw(u))){const d=y_(u,t.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!v_.has(i)||e.length!==2)return;const[s,r]=e,a=pE(s),o=pE(r);if(a!==o)if(uE(a)&&uE(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else sl[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||rL(e[s]))&&i.push(s);i.length&&hL(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sl[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=sl[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function pL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=(t==null?void 0:t[n])??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const E_=(n,e)=>e&&typeof n=="number"?e.transform(n):n,gE=30,mL=n=>!isNaN(parseFloat(n));class gL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{var a,o;const r=Rn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new qw);const i=this.events[e].add(t);return e==="change"?()=>{i(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gE)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,gE);return zT(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yu(n,e){return new gL(n,e)}const{schedule:lA}=ZT(queueMicrotask,!1),_i={x:!1,y:!1};function C_(){return _i.x||_i.y}function yL(n){return n==="x"||n==="y"?_i[n]?null:(_i[n]=!0,()=>{_i[n]=!1}):_i.x||_i.y?null:(_i.x=_i.y=!0,()=>{_i.x=_i.y=!1})}function x_(n,e){const t=pL(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function yE(n){return!(n.pointerType==="touch"||C_())}function vL(n,e,t={}){const[i,s,r]=x_(n,t),a=o=>{if(!yE(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const d=h=>{yE(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return i.forEach(o=>{o.addEventListener("pointerenter",a,s)}),r}const T_=(n,e)=>e?n===e?!0:T_(n,e.parentElement):!1,cA=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,bL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wL(n){return bL.has(n.tagName)||n.tabIndex!==-1}const Fp=new WeakSet;function vE(n){return e=>{e.key==="Enter"&&n(e)}}function zy(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const AL=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=vE(()=>{if(Fp.has(t))return;zy(t,"down");const s=vE(()=>{zy(t,"up")}),r=()=>zy(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function bE(n){return cA(n)&&!C_()}function SL(n,e,t={}){const[i,s,r]=x_(n,t),a=o=>{const l=o.currentTarget;if(!bE(o))return;Fp.add(l);const u=e(l,o),d=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Fp.has(l)&&Fp.delete(l),bE(p)&&typeof u=="function"&&u(p,{success:m})},h=p=>{d(p,l===window||l===document||t.useGlobalTarget||T_(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return i.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),rA(o)&&(o.addEventListener("focus",u=>AL(u,s)),!wL(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),r}function __(n){return UT(n)&&"ownerSVGElement"in n}function EL(n){return __(n)&&n.tagName==="svg"}const nn=n=>!!(n&&n.getVelocity),CL=[...w_,ut,xa],xL=n=>CL.find(b_(n)),uA=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class TL extends O.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=rA(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _L({children:n,isPresent:e,anchorX:t,root:i}){const s=O.useId(),r=O.useRef(null),a=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=O.useContext(uA);return O.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:h,right:f}=a.current;if(e||!r.current||!l||!u)return;const p=t==="left"?`left: ${h}`:`right: ${f}`;r.current.dataset.motionPopId=s;const m=document.createElement("style");o&&(m.nonce=o);const y=i??document.head;return y.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.removeChild(m),y.contains(m)&&y.removeChild(m)}},[e]),W.jsx(TL,{isPresent:e,childRef:r,sizeRef:a,children:O.cloneElement(n,{ref:r})})}const PL=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:a,anchorX:o,root:l})=>{const u=Uw(RL),d=O.useId();let h=!0,f=O.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:t,custom:s,onExitComplete:p=>{u.set(p,!0);for(const m of u.values())if(!m)return;i&&i()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[t,u,i]);return r&&h&&(f={...f}),O.useMemo(()=>{u.forEach((p,m)=>u.set(m,!1))},[t]),O.useEffect(()=>{!t&&!u.size&&i&&i()},[t]),a==="popLayout"&&(n=W.jsx(_L,{isPresent:t,anchorX:o,root:l,children:n})),W.jsx(zg.Provider,{value:f,children:n})};function RL(){return new Map}function P_(n=!0){const e=O.useContext(zg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,r=O.useId();O.useEffect(()=>{if(n)return s(r)},[n]);const a=O.useCallback(()=>n&&i&&i(r),[r,i,n]);return!t&&i?[!1,a]:[!0]}const hp=n=>n.key||"";function wE(n){const e=[];return O.Children.forEach(n,t=>{O.isValidElement(t)&&e.push(t)}),e}const IL=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:o="left",root:l})=>{const[u,d]=P_(a),h=O.useMemo(()=>wE(n),[n]),f=a&&!u?[]:h.map(hp),p=O.useRef(!0),m=O.useRef(h),y=Uw(()=>new Map),[A,g]=O.useState(h),[b,w]=O.useState(h);BT(()=>{p.current=!1,m.current=h;for(let _=0;_<b.length;_++){const P=hp(b[_]);f.includes(P)?y.delete(P):y.get(P)!==!0&&y.set(P,!1)}},[b,f.length,f.join("-")]);const C=[];if(h!==A){let _=[...h];for(let P=0;P<b.length;P++){const R=b[P],N=hp(R);f.includes(N)||(_.splice(P,0,R),C.push(R))}return r==="wait"&&C.length&&(_=C),w(wE(_)),g(h),null}const{forceRender:x}=O.useContext(jw);return W.jsx(W.Fragment,{children:b.map(_=>{const P=hp(_),R=a&&!u?!1:h===b||f.includes(P),N=()=>{if(y.has(P))y.set(P,!0);else return;let D=!0;y.forEach(U=>{U||(D=!1)}),D&&(x==null||x(),w(m.current),a&&(d==null||d()),i&&i())};return W.jsx(PL,{isPresent:R,initial:!p.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,root:l,onExitComplete:R?void 0:N,anchorX:o,children:_},P)})})},R_=O.createContext({strict:!1}),AE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vu={};for(const n in AE)vu[n]={isEnabled:e=>AE[n].some(t=>!!e[t])};function NL(n){for(const e in n)vu[e]={...vu[e],...n[e]}}const ML=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wm(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ML.has(n)}let I_=n=>!Wm(n);function kL(n){typeof n=="function"&&(I_=e=>e.startsWith("on")?!Wm(e):n(e))}try{kL(require("@emotion/is-prop-valid").default)}catch{}function DL(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(I_(s)||t===!0&&Wm(s)||!e&&!Wm(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function LL(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const $g=O.createContext({});function Hg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Wd(n){return typeof n=="string"||Array.isArray(n)}const dA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hA=["initial",...dA];function Gg(n){return Hg(n.animate)||hA.some(e=>Wd(n[e]))}function N_(n){return!!(Gg(n)||n.variants)}function OL(n,e){if(Gg(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Wd(t)?t:void 0,animate:Wd(i)?i:void 0}}return n.inherit!==!1?e:{}}function FL(n){const{initial:e,animate:t}=OL(n,O.useContext($g));return O.useMemo(()=>({initial:e,animate:t}),[SE(e),SE(t)])}function SE(n){return Array.isArray(n)?n.join(" "):n}const BL=Symbol.for("motionComponentSymbol");function Gl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function jL(n,e,t){return O.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Gl(t)&&(t.current=i))},[e])}const fA=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UL="framerAppearId",M_="data-"+fA(UL),k_=O.createContext({});function VL(n,e,t,i,s){var y,A;const{visualElement:r}=O.useContext($g),a=O.useContext(R_),o=O.useContext(zg),l=O.useContext(uA).reducedMotion,u=O.useRef(null);i=i||a.renderer,!u.current&&i&&(u.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=O.useContext(k_);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&zL(u.current,t,s,h);const f=O.useRef(!1);O.useInsertionEffect(()=>{d&&f.current&&d.update(t,o)});const p=t[M_],m=O.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,p)));return BT(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),lA.render(d.render),m.current&&d.animationState&&d.animationState.animateChanges())}),O.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,p)}),m.current=!1))}),d}function zL(n,e,t,i){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:D_(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||o&&Gl(o),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:l,layoutRoot:u})}function D_(n){if(n)return n.options.allowProjection!==!1?n.projection:D_(n.parent)}function $L({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:s}){n&&NL(n);function r(o,l){let u;const d={...O.useContext(uA),...o,layoutId:HL(o)},{isStatic:h}=d,f=FL(o),p=i(o,h);if(!h&&Vw){GL();const m=qL(d);u=m.MeasureLayout,f.visualElement=VL(s,p,d,e,m.ProjectionNode)}return W.jsxs($g.Provider,{value:f,children:[u&&f.visualElement?W.jsx(u,{visualElement:f.visualElement,...d}):null,t(s,o,jL(p,f.visualElement,l),p,h,f.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=O.forwardRef(r);return a[BL]=s,a}function HL({layoutId:n}){const e=O.useContext(jw).id;return e&&n!==void 0?e+"-"+n:n}function GL(n,e){O.useContext(R_).strict}function qL(n){const{drag:e,layout:t}=vu;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Xd={};function WL(n){for(const e in n)Xd[e]=n[e],Kw(e)&&(Xd[e].isCSSVariable=!0)}function L_(n,{layout:e,layoutId:t}){return xu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Xd[n]||n==="opacity")}const XL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KL=Cu.length;function YL(n,e,t){let i="",s=!0;for(let r=0;r<KL;r++){const a=Cu[r],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=E_(o,oA[a]);if(!l){s=!1;const d=XL[a]||a;i+=`${d}(${u}) `}t&&(e[a]=u)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function pA(n,e,t){const{style:i,vars:s,transformOrigin:r}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(xu.has(l)){a=!0;continue}else if(Kw(l)){s[l]=u;continue}else{const d=E_(u,oA[l]);l.startsWith("origin")?(o=!0,r[l]=d):i[l]=d}}if(e.transform||(a||t?i.transform=YL(e,n.transform,t):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=r;i.transformOrigin=`${l} ${u} ${d}`}}const mA=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function O_(n,e,t){for(const i in e)!nn(e[i])&&!L_(i,t)&&(n[i]=e[i])}function QL({transformTemplate:n},e){return O.useMemo(()=>{const t=mA();return pA(t,e,n),Object.assign({},t.vars,t.style)},[e])}function JL(n,e){const t=n.style||{},i={};return O_(i,t,n),Object.assign(i,QL(n,e)),i}function ZL(n,e){const t={},i=JL(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const eO={offset:"stroke-dashoffset",array:"stroke-dasharray"},tO={offset:"strokeDashoffset",array:"strokeDasharray"};function nO(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?eO:tO;n[r.offset]=Z.transform(-i);const a=Z.transform(e),o=Z.transform(t);n[r.array]=`${a} ${o}`}function F_(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:a=0,...o},l,u,d){if(pA(n,o,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:f}=n;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),i!==void 0&&(h.scale=i),s!==void 0&&nO(h,s,r,a,!1)}const B_=()=>({...mA(),attrs:{}}),j_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function iO(n,e,t,i){const s=O.useMemo(()=>{const r=B_();return F_(r,e,j_(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};O_(r,n.style,n),s.style={...r,...s.style}}return s}const sO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gA(n){return typeof n!="string"||n.includes("-")?!1:!!(sO.indexOf(n)>-1||/[A-Z]/u.test(n))}function rO(n=!1){return(t,i,s,{latestValues:r},a)=>{const l=(gA(t)?iO:ZL)(i,r,a,t),u=DL(i,typeof t=="string",n),d=t!==O.Fragment?{...u,...l,ref:s}:{},{children:h}=i,f=O.useMemo(()=>nn(h)?h.get():h,[h]);return O.createElement(t,{...d,children:f})}}function EE(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function yA(n,e,t,i){if(typeof e=="function"){const[s,r]=EE(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=EE(i);e=e(t!==void 0?t:n.custom,s,r)}return e}function Bp(n){return nn(n)?n.get():n}function aO({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:oO(t,i,s,n),renderState:e()}}const U_=n=>(e,t)=>{const i=O.useContext($g),s=O.useContext(zg),r=()=>aO(n,e,i,s);return t?r():Uw(r)};function oO(n,e,t,i){const s={},r=i(n,{});for(const f in r)s[f]=Bp(r[f]);let{initial:a,animate:o}=n;const l=Gg(n),u=N_(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=t?t.initial===!1:!1;d=d||a===!1;const h=d?o:a;if(h&&typeof h!="boolean"&&!Hg(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=yA(n,f[p]);if(m){const{transitionEnd:y,transition:A,...g}=m;for(const b in g){let w=g[b];if(Array.isArray(w)){const C=d?w.length-1:0;w=w[C]}w!==null&&(s[b]=w)}for(const b in y)s[b]=y[b]}}}return s}function vA(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(nn(i[a])||e.style&&nn(e.style[a])||L_(a,n)||((r=t==null?void 0:t.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const lO={useVisualState:U_({scrapeMotionValuesFromProps:vA,createRenderState:mA})};function V_(n,e,t){const i=vA(n,e,t);for(const s in n)if(nn(n[s])||nn(e[s])){const r=Cu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const cO={useVisualState:U_({scrapeMotionValuesFromProps:V_,createRenderState:B_})};function uO(n,e){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...gA(i)?cO:lO,preloadedFeatures:n,useRender:rO(s),createVisualElement:e,Component:i};return $L(a)}}function Kd(n,e,t){const i=n.getProps();return yA(i,e,t!==void 0?t:i.custom,n)}const g0=n=>Array.isArray(n);function dO(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,yu(t))}function hO(n){return g0(n)?n[n.length-1]||0:n}function fO(n,e){const t=Kd(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const a in r){const o=hO(r[a]);dO(n,a,o)}}function pO(n){return!!(nn(n)&&n.add)}function y0(n,e){const t=n.getValue("willChange");if(pO(t))return t.add(e);if(!t&&Ar.WillChange){const i=new Ar.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function z_(n){return n.props[M_]}const mO=n=>n!==null;function gO(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(mO),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[r]}const yO={type:"spring",stiffness:500,damping:25,restSpeed:10},vO=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),bO={type:"keyframes",duration:.8},wO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AO=(n,{keyframes:e})=>e.length>2?bO:xu.has(n)?n.startsWith("scale")?vO(e[1]):yO:wO;function SO({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const bA=(n,e,t,i={},s,r)=>a=>{const o=aA(i,n)||{},l=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-_s(l);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:r?void 0:s};SO(o)||Object.assign(d,AO(n,d)),d.duration&&(d.duration=_s(d.duration)),d.repeatDelay&&(d.repeatDelay=_s(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(Ar.instantAnimations||Ar.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!r&&e.get()!==void 0){const f=gO(d.keyframes,o);if(f!==void 0){Ge.update(()=>{d.onUpdate(f),d.onComplete()});return}}return o.isSync?new iA(d):new tL(d)};function EO({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function $_(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:a,...o}=e;i&&(r=i);const l=[],u=s&&n.animationState&&n.animationState.getState()[s];for(const d in o){const h=n.getValue(d,n.latestValues[d]??null),f=o[d];if(f===void 0||u&&EO(u,d))continue;const p={delay:t,...aA(r||{},d)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const g=z_(n);if(g){const b=window.MotionHandoffAnimation(g,d,Ge);b!==null&&(p.startTime=b,y=!0)}}y0(n,d),h.start(bA(d,h,f,n.shouldReduceMotion&&v_.has(d)?{type:!1}:p,n,y));const A=h.animation;A&&l.push(A)}return a&&Promise.all(l).then(()=>{Ge.update(()=>{a&&fO(n,a)})}),l}function v0(n,e,t={}){var l;const i=Kd(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const r=i?()=>Promise.all($_(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return CO(n,e,u,d,h,f,t)}:()=>Promise.resolve(),{when:o}=s;if(o){const[u,d]=o==="beforeChildren"?[r,a]:[a,r];return u().then(()=>d())}else return Promise.all([r(),a(t.delay)])}function CO(n,e,t=0,i=0,s=0,r=1,a){const o=[],l=n.variantChildren.size,u=(l-1)*s,d=typeof i=="function",h=d?f=>i(f,l):r===1?(f=0)=>f*s:(f=0)=>u-f*s;return Array.from(n.variantChildren).sort(xO).forEach((f,p)=>{f.notify("AnimationStart",e),o.push(v0(f,e,{...a,delay:t+(d?0:i)+h(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(o)}function xO(n,e){return n.sortNodePosition(e)}function TO(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>v0(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=v0(n,e,t);else{const s=typeof e=="function"?Kd(n,e,t.custom):e;i=Promise.all($_(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function H_(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const _O=hA.length;function G_(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?G_(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<_O;t++){const i=hA[t],s=n.props[i];(Wd(s)||s===!1)&&(e[i]=s)}return e}const PO=[...dA].reverse(),RO=dA.length;function IO(n){return e=>Promise.all(e.map(({animation:t,options:i})=>TO(n,t,i)))}function NO(n){let e=IO(n),t=CE(),i=!0;const s=l=>(u,d)=>{var f;const h=Kd(n,d,l==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...y}=h;u={...u,...y,...m}}return u};function r(l){e=l(n)}function a(l){const{props:u}=n,d=G_(n.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let A=0;A<RO;A++){const g=PO[A],b=t[g],w=u[g]!==void 0?u[g]:d[g],C=Wd(w),x=g===l?b.isActive:null;x===!1&&(m=A);let _=w===d[g]&&w!==u[g]&&C;if(_&&i&&n.manuallyAnimateOnMount&&(_=!1),b.protectedKeys={...p},!b.isActive&&x===null||!w&&!b.prevProp||Hg(w)||typeof w=="boolean")continue;const P=MO(b.prevProp,w);let R=P||g===l&&b.isActive&&!_&&C||A>m&&C,N=!1;const D=Array.isArray(w)?w:[w];let U=D.reduce(s(g),{});x===!1&&(U={});const{prevResolvedValues:fe={}}=b,Ae={...fe,...U},ae=B=>{R=!0,f.has(B)&&(N=!0,f.delete(B)),b.needsAnimating[B]=!0;const M=n.getValue(B);M&&(M.liveStyle=!1)};for(const B in Ae){const M=U[B],T=fe[B];if(p.hasOwnProperty(B))continue;let Y=!1;g0(M)&&g0(T)?Y=!H_(M,T):Y=M!==T,Y?M!=null?ae(B):f.add(B):M!==void 0&&f.has(B)?ae(B):b.protectedKeys[B]=!0}b.prevProp=w,b.prevResolvedValues=U,b.isActive&&(p={...p,...U}),i&&n.blockInitialAnimation&&(R=!1),R&&(!(_&&P)||N)&&h.push(...D.map(B=>({animation:B,options:{type:g}})))}if(f.size){const A={};if(typeof u.initial!="boolean"){const g=Kd(n,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(A.transition=g.transition)}f.forEach(g=>{const b=n.getBaseTarget(g),w=n.getValue(g);w&&(w.liveStyle=!0),A[g]=b??null}),h.push({animation:A})}let y=!!h.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(y=!1),i=!1,y?e(h):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),t[l].isActive=u;const d=a(l);for(const f in t)t[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>t,reset:()=>{t=CE(),i=!0}}}function MO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!H_(e,n):!1}function La(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CE(){return{animate:La(!0),whileInView:La(),whileHover:La(),whileTap:La(),whileDrag:La(),whileFocus:La(),exit:La()}}class Ma{constructor(e){this.isMounted=!1,this.node=e}update(){}}class kO extends Ma{constructor(e){super(e),e.animationState||(e.animationState=NO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Hg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let DO=0;class LO extends Ma{constructor(){super(...arguments),this.id=DO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const OO={animation:{Feature:kO},exit:{Feature:LO}};function Yd(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function Ff(n){return{point:{x:n.pageX,y:n.pageY}}}const FO=n=>e=>cA(e)&&n(e,Ff(e));function Ad(n,e,t,i){return Yd(n,e,FO(t),i)}function q_({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function BO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function jO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const W_=1e-4,UO=1-W_,VO=1+W_,X_=.01,zO=0-X_,$O=0+X_;function hn(n){return n.max-n.min}function HO(n,e,t){return Math.abs(n-e)<=t}function xE(n,e,t,i=.5){n.origin=i,n.originPoint=Ke(e.min,e.max,n.origin),n.scale=hn(t)/hn(e),n.translate=Ke(t.min,t.max,n.origin)-n.originPoint,(n.scale>=UO&&n.scale<=VO||isNaN(n.scale))&&(n.scale=1),(n.translate>=zO&&n.translate<=$O||isNaN(n.translate))&&(n.translate=0)}function Sd(n,e,t,i){xE(n.x,e.x,t.x,i?i.originX:void 0),xE(n.y,e.y,t.y,i?i.originY:void 0)}function TE(n,e,t){n.min=t.min+e.min,n.max=n.min+hn(e)}function GO(n,e,t){TE(n.x,e.x,t.x),TE(n.y,e.y,t.y)}function _E(n,e,t){n.min=e.min-t.min,n.max=n.min+hn(e)}function Ed(n,e,t){_E(n.x,e.x,t.x),_E(n.y,e.y,t.y)}const PE=()=>({translate:0,scale:1,origin:0,originPoint:0}),ql=()=>({x:PE(),y:PE()}),RE=()=>({min:0,max:0}),rt=()=>({x:RE(),y:RE()});function ai(n){return[n("x"),n("y")]}function $y(n){return n===void 0||n===1}function b0({scale:n,scaleX:e,scaleY:t}){return!$y(n)||!$y(e)||!$y(t)}function Ba(n){return b0(n)||K_(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function K_(n){return IE(n.x)||IE(n.y)}function IE(n){return n&&n!=="0%"}function Xm(n,e,t){const i=n-t,s=e*i;return t+s}function NE(n,e,t,i,s){return s!==void 0&&(n=Xm(n,s,i)),Xm(n,t,i)+e}function w0(n,e=0,t=1,i,s){n.min=NE(n.min,e,t,i,s),n.max=NE(n.max,e,t,i,s)}function Y_(n,{x:e,y:t}){w0(n.x,e.translate,e.scale,e.originPoint),w0(n.y,t.translate,t.scale,t.originPoint)}const ME=.999999999999,kE=1.0000000000001;function qO(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,a;for(let o=0;o<s;o++){r=t[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Xl(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Y_(n,a)),i&&Ba(r.latestValues)&&Xl(n,r.latestValues))}e.x<kE&&e.x>ME&&(e.x=1),e.y<kE&&e.y>ME&&(e.y=1)}function Wl(n,e){n.min=n.min+e,n.max=n.max+e}function DE(n,e,t,i,s=.5){const r=Ke(n.min,n.max,s);w0(n,e,t,r,i)}function Xl(n,e){DE(n.x,e.x,e.scaleX,e.scale,e.originX),DE(n.y,e.y,e.scaleY,e.scale,e.originY)}function Q_(n,e){return q_(jO(n.getBoundingClientRect(),e))}function WO(n,e,t){const i=Q_(n,t),{scroll:s}=e;return s&&(Wl(i.x,s.offset.x),Wl(i.y,s.offset.y)),i}const J_=({current:n})=>n?n.ownerDocument.defaultView:null,LE=(n,e)=>Math.abs(n-e);function XO(n,e){const t=LE(n.x,e.x),i=LE(n.y,e.y);return Math.sqrt(t**2+i**2)}class Z_{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Gy(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=XO(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:y}=f,{timestamp:A}=Ft;this.history.push({...y,timestamp:A});const{onStart:g,onMove:b}=this.handlers;p||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Hy(p,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Gy(f.type==="pointercancel"?this.lastMoveEventInfo:Hy(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,g),y&&y(f,g)},!cA(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=s||window;const o=Ff(e),l=Hy(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=Ft;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=t;h&&h(e,Gy(l,this.history)),this.removeListeners=Df(Ad(this.contextWindow,"pointermove",this.handlePointerMove),Ad(this.contextWindow,"pointerup",this.handlePointerUp),Ad(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ca(this.updatePoint)}}function Hy(n,e){return e?{point:e(n.point)}:n}function OE(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Gy({point:n},e){return{point:n,delta:OE(n,eP(e)),offset:OE(n,KO(e)),velocity:YO(e,.1)}}function KO(n){return n[0]}function eP(n){return n[n.length-1]}function YO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=eP(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>_s(e)));)t--;if(!i)return{x:0,y:0};const r=Ps(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function QO(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ke(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ke(t,n,i.max):Math.min(n,t)),n}function FE(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function JO(n,{top:e,left:t,bottom:i,right:s}){return{x:FE(n.x,t,s),y:FE(n.y,e,i)}}function BE(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function ZO(n,e){return{x:BE(n.x,e.x),y:BE(n.y,e.y)}}function e2(n,e){let t=.5;const i=hn(n),s=hn(e);return s>i?t=Hd(e.min,e.max-i,n.min):i>s&&(t=Hd(n.min,n.max-s,e.min)),wr(0,1,t)}function t2(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const A0=.35;function n2(n=A0){return n===!1?n=0:n===!0&&(n=A0),{x:jE(n,"left","right"),y:jE(n,"top","bottom")}}function jE(n,e,t){return{min:UE(n,e),max:UE(n,t)}}function UE(n,e){return typeof n=="number"?n:n[e]||0}const i2=new WeakMap;class s2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rt(),this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Ff(h).point)},a=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=yL(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ai(g=>{let b=this.getAxisMotionValue(g).get()||0;if(Rs.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[g];C&&(b=hn(C)*(parseFloat(b)/100))}}this.originPoint[g]=b}),y&&Ge.postRender(()=>y(h,f)),y0(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:A}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=f;if(m&&this.currentDirection===null){this.currentDirection=r2(g),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),A&&A(h,f)},l=(h,f)=>this.stop(h,f),u=()=>ai(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Z_(e,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:i,contextWindow:J_(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&Ge.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!fp(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=QO(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&Gl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=JO(i.layoutBox,e):this.constraints=!1,this.elastic=n2(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ai(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=t2(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=WO(i,s.root,this.visualElement.getTransformPagePoint());let a=ZO(s.layout.layoutBox,r);if(t){const o=t(BO(a));this.hasMutatedConstraints=!!o,o&&(a=q_(o))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=ai(d=>{if(!fp(d,t,this.currentDirection))return;let h=l&&l[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:i?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return y0(this.visualElement,e),i.start(bA(e,i,0,t,this.visualElement,!1))}stopAnimation(){ai(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ai(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ai(t=>{const{drag:i}=this.getProps();if(!fp(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[t];r.set(e[t]-Ke(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Gl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ai(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=e2({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ai(a=>{if(!fp(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Ke(l,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;i2.set(this.visualElement,this);const e=this.visualElement.current,t=Ad(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Gl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ge.read(i);const a=Yd(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ai(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),t(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=A0,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function fp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function r2(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class a2 extends Ma{constructor(e){super(e),this.removeGroupControls=wi,this.removeListeners=wi,this.controls=new s2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wi}unmount(){this.removeGroupControls(),this.removeListeners()}}const VE=n=>(e,t)=>{n&&Ge.postRender(()=>n(e,t))};class o2 extends Ma{constructor(){super(...arguments),this.removePointerDownListener=wi}onPointerDown(e){this.session=new Z_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:J_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:VE(e),onStart:VE(t),onMove:i,onEnd:(r,a)=>{delete this.session,s&&Ge.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=Ad(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zE(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Fu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Z.test(n))n=parseFloat(n);else return n;const t=zE(n,e.target.x),i=zE(n,e.target.y);return`${t}% ${i}%`}},l2={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=xa.parse(n);if(s.length>5)return i;const r=xa.createTransformer(n),a=typeof s[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const u=Ke(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),r(s)}};let $E=!1;class c2 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;WL(u2),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),$E&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),jp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,{projection:a}=i;return a&&(a.isPresent=r,$E=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||Ge.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),lA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tP(n){const[e,t]=P_(),i=O.useContext(jw);return W.jsx(c2,{...n,layoutGroup:i,switchLayoutGroup:O.useContext(k_),isPresent:e,safeToRemove:t})}const u2={borderRadius:{...Fu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fu,borderTopRightRadius:Fu,borderBottomLeftRadius:Fu,borderBottomRightRadius:Fu,boxShadow:l2};function d2(n,e,t){const i=nn(n)?n:yu(n);return i.start(bA("",i,e,t)),i.animation}const h2=(n,e)=>n.depth-e.depth;class f2{constructor(){this.children=[],this.isDirty=!1}add(e){zw(this.children,e),this.isDirty=!0}remove(e){$w(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(h2),this.isDirty=!1,this.children.forEach(e)}}function p2(n,e){const t=Rn.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(Ca(i),n(r-e))};return Ge.setup(i,!0),()=>Ca(i)}const nP=["TopLeft","TopRight","BottomLeft","BottomRight"],m2=nP.length,HE=n=>typeof n=="string"?parseFloat(n):n,GE=n=>typeof n=="number"||Z.test(n);function g2(n,e,t,i,s,r){s?(n.opacity=Ke(0,t.opacity??1,y2(i)),n.opacityExit=Ke(e.opacity??1,0,v2(i))):r&&(n.opacity=Ke(e.opacity??1,t.opacity??1,i));for(let a=0;a<m2;a++){const o=`border${nP[a]}Radius`;let l=qE(e,o),u=qE(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||GE(l)===GE(u)?(n[o]=Math.max(Ke(HE(l),HE(u),i),0),(Rs.test(u)||Rs.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=Ke(e.rotate||0,t.rotate||0,i))}function qE(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const y2=iP(0,.5,KT),v2=iP(.5,.95,wi);function iP(n,e,t){return i=>i<n?0:i>e?1:t(Hd(n,e,i))}function WE(n,e){n.min=e.min,n.max=e.max}function si(n,e){WE(n.x,e.x),WE(n.y,e.y)}function XE(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function KE(n,e,t,i,s){return n-=e,n=Xm(n,1/t,i),s!==void 0&&(n=Xm(n,1/s,i)),n}function b2(n,e=0,t=1,i=.5,s,r=n,a=n){if(Rs.test(e)&&(e=parseFloat(e),e=Ke(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Ke(r.min,r.max,i);n===r&&(o-=e),n.min=KE(n.min,e,t,o,s),n.max=KE(n.max,e,t,o,s)}function YE(n,e,[t,i,s],r,a){b2(n,e[t],e[i],e[s],e.scale,r,a)}const w2=["x","scaleX","originX"],A2=["y","scaleY","originY"];function QE(n,e,t,i){YE(n.x,e,w2,t?t.x:void 0,i?i.x:void 0),YE(n.y,e,A2,t?t.y:void 0,i?i.y:void 0)}function JE(n){return n.translate===0&&n.scale===1}function sP(n){return JE(n.x)&&JE(n.y)}function ZE(n,e){return n.min===e.min&&n.max===e.max}function S2(n,e){return ZE(n.x,e.x)&&ZE(n.y,e.y)}function eC(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function rP(n,e){return eC(n.x,e.x)&&eC(n.y,e.y)}function tC(n){return hn(n.x)/hn(n.y)}function nC(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class E2{constructor(){this.members=[]}add(e){zw(this.members,e),e.scheduleRender()}remove(e){if($w(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function C2(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:m}=t;u&&(i=`perspective(${u}px) ${i}`),d&&(i+=`rotate(${d}deg) `),h&&(i+=`rotateX(${h}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),m&&(i+=`skewY(${m}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const qy=["","X","Y","Z"],x2=1e3;let T2=0;function Wy(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function aP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=z_(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ge,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&aP(i)}function oP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=T2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(R2),this.nodes.forEach(k2),this.nodes.forEach(D2),this.nodes.forEach(I2)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new f2)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new qw),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=__(a)&&!EL(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ge.read(()=>{h=window.innerWidth}),n(a,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=p2(f,250),jp.hasAnimatedSinceResize&&(jp.hasAnimatedSinceResize=!1,this.nodes.forEach(rC)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||j2,{onLayoutAnimationStart:y,onLayoutAnimationComplete:A}=u.getProps(),g=!this.targetLayout||!rP(this.targetLayout,p),b=!h&&f;if(this.options.layoutRoot||this.resumeFrom||b||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...aA(m,"layout"),onPlay:y,onComplete:A};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,b)}else h||rC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ca(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(L2),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(sC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(M2),this.nodes.forEach(_2),this.nodes.forEach(P2)):this.nodes.forEach(sC),this.clearAllSnapshots();const o=Rn.now();Ft.delta=wr(0,1e3/60,o-Ft.timestamp),Ft.timestamp=o,Ft.isProcessing=!0,Fy.update.process(Ft),Fy.preRender.process(Ft),Fy.render.process(Ft),Ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(N2),this.sharedNodes.forEach(O2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!hn(this.snapshot.measuredBox.x)&&!hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!sP(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||Ba(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),U2(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return rt();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(V2))){const{scroll:d}=this.root;d&&(Wl(o.x,d.offset.x),Wl(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=rt();if(si(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&si(o,a),Wl(o.x,h.offset.x),Wl(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=rt();si(l,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Xl(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ba(d.latestValues)&&Xl(l,d.latestValues)}return Ba(this.latestValues)&&Xl(l,this.latestValues),l}removeTransform(a){const o=rt();si(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ba(u.latestValues))continue;b0(u.latestValues)&&u.updateSnapshot();const d=rt(),h=u.measurePageBox();si(d,h),QE(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ba(this.latestValues)&&QE(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Ft.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),Ed(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=rt(),this.targetWithTransforms=rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):si(this.target,this.layout.layoutBox),Y_(this.target,this.targetDelta)):si(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),Ed(this.relativeTargetOrigin,this.target,p.target),si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||b0(this.parent.latestValues)||K_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ft.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;si(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;qO(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=rt());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(XE(this.prevProjectionDelta.x,this.projectionDelta.x),XE(this.prevProjectionDelta.y,this.projectionDelta.y)),Sd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!nC(this.projectionDelta.x,this.prevProjectionDelta.x)||!nC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ql(),this.projectionDelta=ql(),this.projectionDeltaWithTransform=ql()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=rt(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,y=p!==m,A=this.getStack(),g=!A||A.members.length<=1,b=!!(y&&!g&&this.options.crossfade===!0&&!this.path.some(B2));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const x=C/1e3;aC(h.x,a.x,x),aC(h.y,a.y,x),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ed(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),F2(this.relativeTarget,this.relativeTargetOrigin,f,x),w&&S2(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=rt()),si(w,this.relativeTarget)),y&&(this.animationValues=d,g2(d,u,this.latestValues,x,b,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Ca(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{jp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yu(0)),this.currentAnimation=d2(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(x2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&lP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||rt();const h=hn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const f=hn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}si(o,l),Xl(o,d),Sd(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new E2),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Wy("z",a,u,this.animationValues);for(let d=0;d<qy.length;d++)Wy(`rotate${qy[d]}`,a,u,this.animationValues),Wy(`skew${qy[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Bp(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Bp(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ba(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=C2(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),a.transform=h;const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Xd){if(d[m]===void 0)continue;const{correct:y,applyTo:A,isCSSVariable:g}=Xd[m],b=h==="none"?d[m]:y(d[m],u);if(A){const w=A.length;for(let C=0;C<w;C++)a[A[C]]=b}else g?this.options.visualElement.renderState.vars[m]=b:a[m]=b}this.options.layoutId&&(a.pointerEvents=u===this?Bp(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(iC),this.root.sharedNodes.clear()}}}function _2(n){n.updateLayout()}function P2(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?ai(h=>{const f=a?e.measuredBox[h]:e.layoutBox[h],p=hn(f);f.min=i[h].min,f.max=f.min+p}):lP(r,e.layoutBox,i)&&ai(h=>{const f=a?e.measuredBox[h]:e.layoutBox[h],p=hn(i[h]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+p)});const o=ql();Sd(o,i,e.layoutBox);const l=ql();a?Sd(l,n.applyTransform(s,!0),e.measuredBox):Sd(l,i,e.layoutBox);const u=!sP(o);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=rt();Ed(m,e.layoutBox,f.layoutBox);const y=rt();Ed(y,i,p.layoutBox),rP(m,y)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=y,n.relativeTargetOrigin=m,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function R2(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function I2(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function N2(n){n.clearSnapshot()}function iC(n){n.clearMeasurements()}function sC(n){n.isLayoutDirty=!1}function M2(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function rC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function k2(n){n.resolveTargetDelta()}function D2(n){n.calcProjection()}function L2(n){n.resetSkewAndRotation()}function O2(n){n.removeLeadSnapshot()}function aC(n,e,t){n.translate=Ke(e.translate,0,t),n.scale=Ke(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function oC(n,e,t,i){n.min=Ke(e.min,t.min,i),n.max=Ke(e.max,t.max,i)}function F2(n,e,t,i){oC(n.x,e.x,t.x,i),oC(n.y,e.y,t.y,i)}function B2(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const j2={duration:.45,ease:[.4,0,.1,1]},lC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),cC=lC("applewebkit/")&&!lC("chrome/")?Math.round:wi;function uC(n){n.min=cC(n.min),n.max=cC(n.max)}function U2(n){uC(n.x),uC(n.y)}function lP(n,e,t){return n==="position"||n==="preserve-aspect"&&!HO(tC(e),tC(t),.2)}function V2(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const z2=oP({attachResizeListener:(n,e)=>Yd(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xy={current:void 0},cP=oP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Xy.current){const n=new z2({});n.mount(window),n.setOptions({layoutScroll:!0}),Xy.current=n}return Xy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),$2={pan:{Feature:o2},drag:{Feature:a2,ProjectionNode:cP,MeasureLayout:tP}};function dC(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=i[s];r&&Ge.postRender(()=>r(e,Ff(e)))}class H2 extends Ma{mount(){const{current:e}=this.node;e&&(this.unmount=vL(e,(t,i)=>(dC(this.node,i,"Start"),s=>dC(this.node,s,"End"))))}unmount(){}}class G2 extends Ma{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Df(Yd(this.node.current,"focus",()=>this.onFocus()),Yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hC(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=i[s];r&&Ge.postRender(()=>r(e,Ff(e)))}class q2 extends Ma{mount(){const{current:e}=this.node;e&&(this.unmount=SL(e,(t,i)=>(hC(this.node,i,"Start"),(s,{success:r})=>hC(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const S0=new WeakMap,Ky=new WeakMap,W2=n=>{const e=S0.get(n.target);e&&e(n)},X2=n=>{n.forEach(W2)};function K2({root:n,...e}){const t=n||document;Ky.has(t)||Ky.set(t,{});const i=Ky.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(X2,{root:n,...e})),i[s]}function Y2(n,e,t){const i=K2(e);return S0.set(n,t),i.observe(n),()=>{S0.delete(n),i.unobserve(n)}}const Q2={some:0,all:1};class J2 extends Ma{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:Q2[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return Y2(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Z2(e,t))&&this.startObserver()}unmount(){}}function Z2({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const eF={inView:{Feature:J2},tap:{Feature:q2},focus:{Feature:G2},hover:{Feature:H2}},tF={layout:{ProjectionNode:cP,MeasureLayout:tP}},E0={current:null},uP={current:!1};function nF(){if(uP.current=!0,!!Vw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>E0.current=n.matches;n.addEventListener("change",e),e()}else E0.current=!1}const iF=new WeakMap;function sF(n,e,t){for(const i in e){const s=e[i],r=t[i];if(nn(s))n.addValue(i,s);else if(nn(r))n.addValue(i,yu(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,yu(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const fC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rF{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Rn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ge.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=Gg(t),this.isVariantNode=N_(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&nn(p)&&p.set(l[f],!1)}}mount(e){this.current=e,iF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),uP.current||nF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:E0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ca(this.notifyUpdate),Ca(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=xu.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ge.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vu){const t=vu[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<fC.length;i++){const s=fC[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=sF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=yu(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(jT(i)||VT(i))?i=parseFloat(i):!xL(i)&&xa.test(t)&&(i=S_(e,t)),this.setBaseTarget(e,nn(i)?i.get():i)),nn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=yA(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!nn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new qw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class dP extends rF{constructor(){super(...arguments),this.KeyframeResolver=fL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function hP(n,{style:e,vars:t},i,s){const r=n.style;let a;for(a in e)r[a]=e[a];s==null||s.applyProjectionStyles(r,i);for(a in t)r.setProperty(a,t[a])}function aF(n){return window.getComputedStyle(n)}class oF extends dP{constructor(){super(...arguments),this.type="html",this.renderInstance=hP}readValueFromInstance(e,t){var i;if(xu.has(t))return(i=this.projection)!=null&&i.isProjecting?u0(t):MD(e,t);{const s=aF(e),r=(Kw(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Q_(e,t)}build(e,t,i){pA(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return vA(e,t,i)}}const fP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lF(n,e,t,i){hP(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(fP.has(s)?s:fA(s),e.attrs[s])}class cF extends dP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(xu.has(t)){const i=A_(t);return i&&i.default||0}return t=fP.has(t)?t:fA(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return V_(e,t,i)}build(e,t,i){F_(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){lF(e,t,i,s)}mount(e){this.isSVGTag=j_(e.tagName),super.mount(e)}}const uF=(n,e)=>gA(n)?new cF(e):new oF(e,{allowProjection:n!==O.Fragment}),dF=uO({...OO,...eF,...$2,...tF},uF),Rt=LL(dF),hF=()=>{const[n,e]=O.useState(!1);return O.useEffect(()=>{document.documentElement.setAttribute("data-theme",n?"dark":"light")},[n]),{isDarkMode:n,toggleTheme:()=>{e(!n)}}};var pC;(function(n){n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(pC||(pC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mC;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(mC||(mC={}));var gC;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(gC||(gC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=["user","model","function","system"];var vC;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(vC||(vC={}));var bC;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(bC||(bC={}));var wC;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(wC||(wC={}));var AC;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(AC||(AC={}));var Cd;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER"})(Cd||(Cd={}));var SC;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(SC||(SC={}));var EC;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(EC||(EC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class El extends _n{constructor(e,t){super(e),this.response=t}}class pP extends _n{constructor(e,t,i,s){super(e),this.status=t,this.statusText=i,this.errorDetails=s}}class al extends _n{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="https://generativelanguage.googleapis.com",pF="v1beta",mF="0.17.2",gF="genai-js";var fl;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(fl||(fl={}));class yF{constructor(e,t,i,s,r){this.model=e,this.task=t,this.apiKey=i,this.stream=s,this.requestOptions=r}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||pF;let r=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||fF}/${i}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function vF(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${gF}/${mF}`),e.join(" ")}async function bF(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",vF(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new al(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,r]of i.entries()){if(s==="x-goog-api-key")throw new al(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new al(`Header name ${s} can only be set using the apiClient field`);t.append(s,r)}}return t}async function wF(n,e,t,i,s,r){const a=new yF(n,e,t,i,r);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},CF(r)),{method:"POST",headers:await bF(a),body:s})}}async function Bf(n,e,t,i,s,r={},a=fetch){const{url:o,fetchOptions:l}=await wF(n,e,t,i,s,r);return AF(o,l,a)}async function AF(n,e,t=fetch){let i;try{i=await t(n,e)}catch(s){SF(s,n)}return i.ok||await EF(i,n),i}function SF(n,e){let t=n;throw n instanceof pP||n instanceof al||(t=new _n(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function EF(n,e){let t="",i;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new pP(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function CF(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Up(n.candidates[0]))throw new El(`${Nr(n)}`,n);return xF(n)}else if(n.promptFeedback)throw new El(`Text not available. ${Nr(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Up(n.candidates[0]))throw new El(`${Nr(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),CC(n)[0]}else if(n.promptFeedback)throw new El(`Function call not available. ${Nr(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Up(n.candidates[0]))throw new El(`${Nr(n)}`,n);return CC(n)}else if(n.promptFeedback)throw new El(`Function call not available. ${Nr(n)}`,n)},n}function xF(n){var e,t,i,s;const r=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.text&&r.push(a.text),a.executableCode&&r.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&r.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function CC(n){var e,t,i,s;const r=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&r.push(a.functionCall);if(r.length>0)return r}const TF=[Cd.RECITATION,Cd.SAFETY,Cd.LANGUAGE];function Up(n){return!!n.finishReason&&TF.includes(n.finishReason)}function Nr(n){var e,t,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const r=n.candidates[0];Up(r)&&(s+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(s+=`: ${r.finishMessage}`))}return s}function Qd(n){return this instanceof Qd?(this.v=n,this):new Qd(n)}function _F(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(f){i[f]&&(s[f]=function(p){return new Promise(function(m,y){r.push([f,p,m,y])>1||o(f,p)})})}function o(f,p){try{l(i[f](p))}catch(m){h(r[0][3],m)}}function l(f){f.value instanceof Qd?Promise.resolve(f.value.v).then(u,d):h(r[0][2],f)}function u(f){o("next",f)}function d(f){o("throw",f)}function h(f,p){f(p),r.shift(),r.length&&o(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function PF(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=NF(e),[i,s]=t.tee();return{stream:IF(i),response:RF(s)}}async function RF(n){const e=[],t=n.getReader();for(;;){const{done:i,value:s}=await t.read();if(i)return wA(MF(e));e.push(s)}}function IF(n){return _F(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:s}=yield Qd(t.read());if(s)break;yield yield Qd(wA(i))}})}function NF(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return r();function r(){return e.read().then(({value:a,done:o})=>{if(o){if(s.trim()){i.error(new _n("Failed to parse stream"));return}i.close();return}s+=a;let l=s.match(xC),u;for(;l;){try{u=JSON.parse(l[1])}catch{i.error(new _n(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(u),s=s.substring(l[0].length),l=s.match(xC)}return r()})}}})}function MF(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates)for(const s of i.candidates){const r=s.index;if(t.candidates||(t.candidates=[]),t.candidates[r]||(t.candidates[r]={index:s.index}),t.candidates[r].citationMetadata=s.citationMetadata,t.candidates[r].finishReason=s.finishReason,t.candidates[r].finishMessage=s.finishMessage,t.candidates[r].safetyRatings=s.safetyRatings,s.content&&s.content.parts){t.candidates[r].content||(t.candidates[r].content={role:s.content.role||"user",parts:[]});const a={};for(const o of s.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),o.executableCode&&(a.executableCode=o.executableCode),o.codeExecutionResult&&(a.codeExecutionResult=o.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),t.candidates[r].content.parts.push(a)}}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n,e,t,i){const s=await Bf(e,fl.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return PF(s)}async function gP(n,e,t,i){const r=await(await Bf(e,fl.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:wA(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Jd(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return kF(e)}function kF(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,s=!1;for(const r of n)"functionResponse"in r?(t.parts.push(r),s=!0):(e.parts.push(r),i=!0);if(i&&s)throw new _n("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new _n("No content is provided for sending chat message.");return i?e:t}function DF(n,e){var t;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new al("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const r=Jd(n);i.contents=[r]}return{generateContentRequest:i}}function TC(n){let e;return n.contents?e=n:e={contents:[Jd(n)]},n.systemInstruction&&(e.systemInstruction=yP(n.systemInstruction)),e}function LF(n){return typeof n=="string"||Array.isArray(n)?{content:Jd(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],OF={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function FF(n){let e=!1;for(const t of n){const{role:i,parts:s}=t;if(!e&&i!=="user")throw new _n(`First content should be with role 'user', got ${i}`);if(!yC.includes(i))throw new _n(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(yC)}`);if(!Array.isArray(s))throw new _n("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new _n("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of _C)l in o&&(r[l]+=1);const a=OF[i];for(const o of _C)if(!a.includes(o)&&r[o]>0)throw new _n(`Content with role '${i}' can't contain '${o}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="SILENT_ERROR";class BF{constructor(e,t,i,s={}){this.model=t,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(FF(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,s,r,a,o,l;await this._sendPromise;const u=Jd(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),t);let f;return this._sendPromise=this._sendPromise.then(()=>gP(this._apiKey,this.model,d,h)).then(p=>{var m;if(p.response.candidates&&p.response.candidates.length>0){this._history.push(u);const y=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(y)}else{const y=Nr(p.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}f=p}),await this._sendPromise,f}async sendMessageStream(e,t={}){var i,s,r,a,o,l;await this._sendPromise;const u=Jd(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),t),f=mP(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(PC)}).then(p=>p.response).then(p=>{if(p.candidates&&p.candidates.length>0){this._history.push(u);const m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=Nr(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==PC&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(n,e,t,i){return(await Bf(e,fl.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(n,e,t,i){return(await Bf(e,fl.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function VF(n,e,t,i){const s=t.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await Bf(e,fl.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=yP(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const s=TC(e),r=Object.assign(Object.assign({},this._requestOptions),t);return gP(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}async generateContentStream(e,t={}){var i;const s=TC(e),r=Object.assign(Object.assign({},this._requestOptions),t);return mP(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}startChat(e){var t;return new BF(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=DF(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return jF(this.apiKey,this.model,i,s)}async embedContent(e,t={}){const i=LF(e),s=Object.assign(Object.assign({},this._requestOptions),t);return UF(this.apiKey,this.model,i,s)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return VF(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new _n("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new RC(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t){if(!e.name)throw new al("Cached content must contain a `name` field.");if(!e.model)throw new al("Cached content must contain a `model` field.");const i={model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e};return new RC(this.apiKey,i,t)}}function vP(n,e){return function(){return n.apply(e,arguments)}}const{toString:$F}=Object.prototype,{getPrototypeOf:AA}=Object,{iterator:qg,toStringTag:bP}=Symbol,Wg=(n=>e=>{const t=$F.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Qi=n=>(n=n.toLowerCase(),e=>Wg(e)===n),Xg=n=>e=>typeof e===n,{isArray:Tu}=Array,Zd=Xg("undefined");function HF(n){return n!==null&&!Zd(n)&&n.constructor!==null&&!Zd(n.constructor)&&kn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const wP=Qi("ArrayBuffer");function GF(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&wP(n.buffer),e}const qF=Xg("string"),kn=Xg("function"),AP=Xg("number"),Kg=n=>n!==null&&typeof n=="object",WF=n=>n===!0||n===!1,Vp=n=>{if(Wg(n)!=="object")return!1;const e=AA(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(bP in n)&&!(qg in n)},XF=Qi("Date"),KF=Qi("File"),YF=Qi("Blob"),QF=Qi("FileList"),JF=n=>Kg(n)&&kn(n.pipe),ZF=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||kn(n.append)&&((e=Wg(n))==="formdata"||e==="object"&&kn(n.toString)&&n.toString()==="[object FormData]"))},eB=Qi("URLSearchParams"),[tB,nB,iB,sB]=["ReadableStream","Request","Response","Headers"].map(Qi),rB=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jf(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),Tu(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),a=r.length;let o;for(i=0;i<a;i++)o=r[i],e.call(null,n[o],o,n)}}function SP(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const Ka=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,EP=n=>!Zd(n)&&n!==Ka;function C0(){const{caseless:n}=EP(this)&&this||{},e={},t=(i,s)=>{const r=n&&SP(e,s)||s;Vp(e[r])&&Vp(i)?e[r]=C0(e[r],i):Vp(i)?e[r]=C0({},i):Tu(i)?e[r]=i.slice():e[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&jf(arguments[i],t);return e}const aB=(n,e,t,{allOwnKeys:i}={})=>(jf(e,(s,r)=>{t&&kn(s)?n[r]=vP(s,t):n[r]=s},{allOwnKeys:i}),n),oB=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),lB=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},cB=(n,e,t,i)=>{let s,r,a;const o={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),r=s.length;r-- >0;)a=s[r],(!i||i(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&AA(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},uB=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},dB=n=>{if(!n)return null;if(Tu(n))return n;let e=n.length;if(!AP(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},hB=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&AA(Uint8Array)),fB=(n,e)=>{const i=(n&&n[qg]).call(n);let s;for(;(s=i.next())&&!s.done;){const r=s.value;e.call(n,r[0],r[1])}},pB=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},mB=Qi("HTMLFormElement"),gB=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),IC=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),yB=Qi("RegExp"),CP=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};jf(t,(s,r)=>{let a;(a=e(s,r,n))!==!1&&(i[r]=a||s)}),Object.defineProperties(n,i)},vB=n=>{CP(n,(e,t)=>{if(kn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(kn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},bB=(n,e)=>{const t={},i=s=>{s.forEach(r=>{t[r]=!0})};return Tu(n)?i(n):i(String(n).split(e)),t},wB=()=>{},AB=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function SB(n){return!!(n&&kn(n.append)&&n[bP]==="FormData"&&n[qg])}const EB=n=>{const e=new Array(10),t=(i,s)=>{if(Kg(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const r=Tu(i)?[]:{};return jf(i,(a,o)=>{const l=t(a,s+1);!Zd(l)&&(r[o]=l)}),e[s]=void 0,r}}return i};return t(n,0)},CB=Qi("AsyncFunction"),xB=n=>n&&(Kg(n)||kn(n))&&kn(n.then)&&kn(n.catch),xP=((n,e)=>n?setImmediate:e?((t,i)=>(Ka.addEventListener("message",({source:s,data:r})=>{s===Ka&&r===t&&i.length&&i.shift()()},!1),s=>{i.push(s),Ka.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",kn(Ka.postMessage)),TB=typeof queueMicrotask<"u"?queueMicrotask.bind(Ka):typeof process<"u"&&process.nextTick||xP,_B=n=>n!=null&&kn(n[qg]),I={isArray:Tu,isArrayBuffer:wP,isBuffer:HF,isFormData:ZF,isArrayBufferView:GF,isString:qF,isNumber:AP,isBoolean:WF,isObject:Kg,isPlainObject:Vp,isReadableStream:tB,isRequest:nB,isResponse:iB,isHeaders:sB,isUndefined:Zd,isDate:XF,isFile:KF,isBlob:YF,isRegExp:yB,isFunction:kn,isStream:JF,isURLSearchParams:eB,isTypedArray:hB,isFileList:QF,forEach:jf,merge:C0,extend:aB,trim:rB,stripBOM:oB,inherits:lB,toFlatObject:cB,kindOf:Wg,kindOfTest:Qi,endsWith:uB,toArray:dB,forEachEntry:fB,matchAll:pB,isHTMLForm:mB,hasOwnProperty:IC,hasOwnProp:IC,reduceDescriptors:CP,freezeMethods:vB,toObjectSet:bB,toCamelCase:gB,noop:wB,toFiniteNumber:AB,findKey:SP,global:Ka,isContextDefined:EP,isSpecCompliantForm:SB,toJSONObject:EB,isAsyncFn:CB,isThenable:xB,setImmediate:xP,asap:TB,isIterable:_B};function ne(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}I.inherits(ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const TP=ne.prototype,_P={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{_P[n]={value:n}});Object.defineProperties(ne,_P);Object.defineProperty(TP,"isAxiosError",{value:!0});ne.from=(n,e,t,i,s,r)=>{const a=Object.create(TP);return I.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),ne.call(a,n.message,e,t,i,s),a.cause=n,a.name=n.name,r&&Object.assign(a,r),a};const PB=null;function x0(n){return I.isPlainObject(n)||I.isArray(n)}function PP(n){return I.endsWith(n,"[]")?n.slice(0,-2):n}function NC(n,e,t){return n?n.concat(e).map(function(s,r){return s=PP(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function RB(n){return I.isArray(n)&&!n.some(x0)}const IB=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function Yg(n,e,t){if(!I.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=I.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,A){return!I.isUndefined(A[y])});const i=t.metaTokens,s=t.visitor||d,r=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(I.isDate(m))return m.toISOString();if(I.isBoolean(m))return m.toString();if(!l&&I.isBlob(m))throw new ne("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(m)||I.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,y,A){let g=m;if(m&&!A&&typeof m=="object"){if(I.endsWith(y,"{}"))y=i?y:y.slice(0,-2),m=JSON.stringify(m);else if(I.isArray(m)&&RB(m)||(I.isFileList(m)||I.endsWith(y,"[]"))&&(g=I.toArray(m)))return y=PP(y),g.forEach(function(w,C){!(I.isUndefined(w)||w===null)&&e.append(a===!0?NC([y],C,r):a===null?y:y+"[]",u(w))}),!1}return x0(m)?!0:(e.append(NC(A,y,r),u(m)),!1)}const h=[],f=Object.assign(IB,{defaultVisitor:d,convertValue:u,isVisitable:x0});function p(m,y){if(!I.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(m),I.forEach(m,function(g,b){(!(I.isUndefined(g)||g===null)&&s.call(e,g,I.isString(b)?b.trim():b,y,f))===!0&&p(g,y?y.concat(b):[b])}),h.pop()}}if(!I.isObject(n))throw new TypeError("data must be an object");return p(n),e}function MC(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function SA(n,e){this._pairs=[],n&&Yg(n,this,e)}const RP=SA.prototype;RP.append=function(e,t){this._pairs.push([e,t])};RP.toString=function(e){const t=e?function(i){return e.call(this,i,MC)}:MC;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function NB(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function IP(n,e,t){if(!e)return n;const i=t&&t.encode||NB;I.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let r;if(s?r=s(e,t):r=I.isURLSearchParams(e)?e.toString():new SA(e,t).toString(i),r){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class kC{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(i){i!==null&&e(i)})}}const NP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MB=typeof URLSearchParams<"u"?URLSearchParams:SA,kB=typeof FormData<"u"?FormData:null,DB=typeof Blob<"u"?Blob:null,LB={isBrowser:!0,classes:{URLSearchParams:MB,FormData:kB,Blob:DB},protocols:["http","https","file","blob","url","data"]},EA=typeof window<"u"&&typeof document<"u",T0=typeof navigator=="object"&&navigator||void 0,OB=EA&&(!T0||["ReactNative","NativeScript","NS"].indexOf(T0.product)<0),FB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",BB=EA&&window.location.href||"http://localhost",jB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:EA,hasStandardBrowserEnv:OB,hasStandardBrowserWebWorkerEnv:FB,navigator:T0,origin:BB},Symbol.toStringTag,{value:"Module"})),en={...jB,...LB};function UB(n,e){return Yg(n,new en.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,r){return en.isNode&&I.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function VB(n){return I.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zB(n){const e={},t=Object.keys(n);let i;const s=t.length;let r;for(i=0;i<s;i++)r=t[i],e[r]=n[r];return e}function MP(n){function e(t,i,s,r){let a=t[r++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=r>=t.length;return a=!a&&I.isArray(s)?s.length:a,l?(I.hasOwnProp(s,a)?s[a]=[s[a],i]:s[a]=i,!o):((!s[a]||!I.isObject(s[a]))&&(s[a]=[]),e(t,i,s[a],r)&&I.isArray(s[a])&&(s[a]=zB(s[a])),!o)}if(I.isFormData(n)&&I.isFunction(n.entries)){const t={};return I.forEachEntry(n,(i,s)=>{e(VB(i),s,t,0)}),t}return null}function $B(n,e,t){if(I.isString(n))try{return(e||JSON.parse)(n),I.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Uf={transitional:NP,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=I.isObject(e);if(r&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return s?JSON.stringify(MP(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e)||I.isReadableStream(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return UB(e,this.formSerializer).toString();if((o=I.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Yg(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),$B(e)):e}],transformResponse:[function(e){const t=this.transitional||Uf.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(I.isResponse(e)||I.isReadableStream(e))return e;if(e&&I.isString(e)&&(i&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?ne.from(o,ne.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:en.classes.FormData,Blob:en.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],n=>{Uf.headers[n]={}});const HB=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),GB=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(a){s=a.indexOf(":"),t=a.substring(0,s).trim().toLowerCase(),i=a.substring(s+1).trim(),!(!t||e[t]&&HB[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},DC=Symbol("internals");function Bu(n){return n&&String(n).trim().toLowerCase()}function zp(n){return n===!1||n==null?n:I.isArray(n)?n.map(zp):String(n)}function qB(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const WB=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Yy(n,e,t,i,s){if(I.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!I.isString(e)){if(I.isString(i))return e.indexOf(i)!==-1;if(I.isRegExp(i))return i.test(e)}}function XB(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function KB(n,e){const t=I.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,r,a){return this[i].call(this,e,s,r,a)},configurable:!0})})}let Dn=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(o,l,u){const d=Bu(l);if(!d)throw new Error("header name must be a non-empty string");const h=I.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||l]=zp(o))}const a=(o,l)=>I.forEach(o,(u,d)=>r(u,d,l));if(I.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(I.isString(e)&&(e=e.trim())&&!WB(e))a(GB(e),t);else if(I.isObject(e)&&I.isIterable(e)){let o={},l,u;for(const d of e){if(!I.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(l=o[u])?I.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}a(o,t)}else e!=null&&r(t,e,i);return this}get(e,t){if(e=Bu(e),e){const i=I.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return qB(s);if(I.isFunction(t))return t.call(this,s,i);if(I.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Bu(e),e){const i=I.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Yy(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(a){if(a=Bu(a),a){const o=I.findKey(i,a);o&&(!t||Yy(i,i[o],o,t))&&(delete i[o],s=!0)}}return I.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||Yy(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return I.forEach(this,(s,r)=>{const a=I.findKey(i,r);if(a){t[a]=zp(s),delete t[r];return}const o=e?XB(r):String(r).trim();o!==r&&delete t[r],t[o]=zp(s),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return I.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&I.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[DC]=this[DC]={accessors:{}}).accessors,s=this.prototype;function r(a){const o=Bu(a);i[o]||(KB(s,a),i[o]=!0)}return I.isArray(e)?e.forEach(r):r(e),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(Dn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});I.freezeMethods(Dn);function Qy(n,e){const t=this||Uf,i=e||t,s=Dn.from(i.headers);let r=i.data;return I.forEach(n,function(o){r=o.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function kP(n){return!!(n&&n.__CANCEL__)}function _u(n,e,t){ne.call(this,n??"canceled",ne.ERR_CANCELED,e,t),this.name="CanceledError"}I.inherits(_u,ne,{__CANCEL__:!0});function DP(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new ne("Request failed with status code "+t.status,[ne.ERR_BAD_REQUEST,ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function YB(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function QB(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,r=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=i[r];a||(a=u),t[s]=l,i[s]=u;let h=r,f=0;for(;h!==s;)f+=t[h++],h=h%n;if(s=(s+1)%n,s===r&&(r=(r+1)%n),u-a<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function JB(n,e){let t=0,i=1e3/e,s,r;const a=(u,d=Date.now())=>{t=d,s=null,r&&(clearTimeout(r),r=null),n.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-t;h>=i?a(u,d):(s=u,r||(r=setTimeout(()=>{r=null,a(s)},i-h)))},()=>s&&a(s)]}const Km=(n,e,t=3)=>{let i=0;const s=QB(50,250);return JB(r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,l=a-i,u=s(l),d=a<=o;i=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&d?(o-a)/u:void 0,event:r,lengthComputable:o!=null,[e?"download":"upload"]:!0};n(h)},t)},LC=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},OC=n=>(...e)=>I.asap(()=>n(...e)),ZB=en.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,en.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(en.origin),en.navigator&&/(msie|trident)/i.test(en.navigator.userAgent)):()=>!0,e3=en.hasStandardBrowserEnv?{write(n,e,t,i,s,r){const a=[n+"="+encodeURIComponent(e)];I.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),I.isString(i)&&a.push("path="+i),I.isString(s)&&a.push("domain="+s),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function t3(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function n3(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function LP(n,e,t){let i=!t3(e);return n&&(i||t==!1)?n3(n,e):e}const FC=n=>n instanceof Dn?{...n}:n;function pl(n,e){e=e||{};const t={};function i(u,d,h,f){return I.isPlainObject(u)&&I.isPlainObject(d)?I.merge.call({caseless:f},u,d):I.isPlainObject(d)?I.merge({},d):I.isArray(d)?d.slice():d}function s(u,d,h,f){if(I.isUndefined(d)){if(!I.isUndefined(u))return i(void 0,u,h,f)}else return i(u,d,h,f)}function r(u,d){if(!I.isUndefined(d))return i(void 0,d)}function a(u,d){if(I.isUndefined(d)){if(!I.isUndefined(u))return i(void 0,u)}else return i(void 0,d)}function o(u,d,h){if(h in e)return i(u,d);if(h in n)return i(void 0,u)}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,d,h)=>s(FC(u),FC(d),h,!0)};return I.forEach(Object.keys(Object.assign({},n,e)),function(d){const h=l[d]||s,f=h(n[d],e[d],d);I.isUndefined(f)&&h!==o||(t[d]=f)}),t}const OP=n=>{const e=pl({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:a,auth:o}=e;e.headers=a=Dn.from(a),e.url=IP(LP(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(I.isFormData(t)){if(en.hasStandardBrowserEnv||en.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[u,...d]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(en.hasStandardBrowserEnv&&(i&&I.isFunction(i)&&(i=i(e)),i||i!==!1&&ZB(e.url))){const u=s&&r&&e3.read(r);u&&a.set(s,u)}return e},i3=typeof XMLHttpRequest<"u",s3=i3&&function(n){return new Promise(function(t,i){const s=OP(n);let r=s.data;const a=Dn.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=s,d,h,f,p,m;function y(){p&&p(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function g(){if(!A)return;const w=Dn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:w,config:n,request:A};DP(function(P){t(P),y()},function(P){i(P),y()},x),A=null}"onloadend"in A?A.onloadend=g:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(g)},A.onabort=function(){A&&(i(new ne("Request aborted",ne.ECONNABORTED,n,A)),A=null)},A.onerror=function(){i(new ne("Network Error",ne.ERR_NETWORK,n,A)),A=null},A.ontimeout=function(){let C=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const x=s.transitional||NP;s.timeoutErrorMessage&&(C=s.timeoutErrorMessage),i(new ne(C,x.clarifyTimeoutError?ne.ETIMEDOUT:ne.ECONNABORTED,n,A)),A=null},r===void 0&&a.setContentType(null),"setRequestHeader"in A&&I.forEach(a.toJSON(),function(C,x){A.setRequestHeader(x,C)}),I.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),o&&o!=="json"&&(A.responseType=s.responseType),u&&([f,m]=Km(u,!0),A.addEventListener("progress",f)),l&&A.upload&&([h,p]=Km(l),A.upload.addEventListener("progress",h),A.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=w=>{A&&(i(!w||w.type?new _u(null,n,A):w),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const b=YB(s.url);if(b&&en.protocols.indexOf(b)===-1){i(new ne("Unsupported protocol "+b+":",ne.ERR_BAD_REQUEST,n));return}A.send(r||null)})},r3=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const r=function(u){if(!s){s=!0,o();const d=u instanceof Error?u:this.reason;i.abort(d instanceof ne?d:new _u(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,r(new ne(`timeout ${e} of ms exceeded`,ne.ETIMEDOUT))},e);const o=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),n=null)};n.forEach(u=>u.addEventListener("abort",r));const{signal:l}=i;return l.unsubscribe=()=>I.asap(o),l}},a3=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},o3=async function*(n,e){for await(const t of l3(n))yield*a3(t,e)},l3=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},BC=(n,e,t,i)=>{const s=o3(n,e);let r=0,a,o=l=>{a||(a=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await s.next();if(u){o(),l.close();return}let h=d.byteLength;if(t){let f=r+=h;t(f)}l.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},Qg=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",FP=Qg&&typeof ReadableStream=="function",c3=Qg&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),BP=(n,...e)=>{try{return!!n(...e)}catch{return!1}},u3=FP&&BP(()=>{let n=!1;const e=new Request(en.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),jC=64*1024,_0=FP&&BP(()=>I.isReadableStream(new Response("").body)),Ym={stream:_0&&(n=>n.body)};Qg&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ym[e]&&(Ym[e]=I.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new ne(`Response type '${e}' is not supported`,ne.ERR_NOT_SUPPORT,i)})})})(new Response);const d3=async n=>{if(n==null)return 0;if(I.isBlob(n))return n.size;if(I.isSpecCompliantForm(n))return(await new Request(en.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(I.isArrayBufferView(n)||I.isArrayBuffer(n))return n.byteLength;if(I.isURLSearchParams(n)&&(n=n+""),I.isString(n))return(await c3(n)).byteLength},h3=async(n,e)=>{const t=I.toFiniteNumber(n.getContentLength());return t??d3(e)},f3=Qg&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=OP(n);u=u?(u+"").toLowerCase():"text";let p=r3([s,r&&r.toAbortSignal()],a),m;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let A;try{if(l&&u3&&t!=="get"&&t!=="head"&&(A=await h3(d,i))!==0){let x=new Request(e,{method:"POST",body:i,duplex:"half"}),_;if(I.isFormData(i)&&(_=x.headers.get("content-type"))&&d.setContentType(_),x.body){const[P,R]=LC(A,Km(OC(l)));i=BC(x.body,jC,P,R)}}I.isString(h)||(h=h?"include":"omit");const g="credentials"in Request.prototype;m=new Request(e,{...f,signal:p,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:g?h:void 0});let b=await fetch(m,f);const w=_0&&(u==="stream"||u==="response");if(_0&&(o||w&&y)){const x={};["status","statusText","headers"].forEach(N=>{x[N]=b[N]});const _=I.toFiniteNumber(b.headers.get("content-length")),[P,R]=o&&LC(_,Km(OC(o),!0))||[];b=new Response(BC(b.body,jC,P,()=>{R&&R(),y&&y()}),x)}u=u||"text";let C=await Ym[I.findKey(Ym,u)||"text"](b,n);return!w&&y&&y(),await new Promise((x,_)=>{DP(x,_,{data:C,headers:Dn.from(b.headers),status:b.status,statusText:b.statusText,config:n,request:m})})}catch(g){throw y&&y(),g&&g.name==="TypeError"&&/Load failed|fetch/i.test(g.message)?Object.assign(new ne("Network Error",ne.ERR_NETWORK,n,m),{cause:g.cause||g}):ne.from(g,g&&g.code,n,m)}}),P0={http:PB,xhr:s3,fetch:f3};I.forEach(P0,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const UC=n=>`- ${n}`,p3=n=>I.isFunction(n)||n===null||n===!1,jP={getAdapter:n=>{n=I.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let r=0;r<e;r++){t=n[r];let a;if(i=t,!p3(t)&&(i=P0[(a=String(t)).toLowerCase()],i===void 0))throw new ne(`Unknown adapter '${a}'`);if(i)break;s[a||"#"+r]=i}if(!i){const r=Object.entries(s).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?`since :
`+r.map(UC).join(`
`):" "+UC(r[0]):"as no adapter specified";throw new ne("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:P0};function Jy(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new _u(null,n)}function VC(n){return Jy(n),n.headers=Dn.from(n.headers),n.data=Qy.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),jP.getAdapter(n.adapter||Uf.adapter)(n).then(function(i){return Jy(n),i.data=Qy.call(n,n.transformResponse,i),i.headers=Dn.from(i.headers),i},function(i){return kP(i)||(Jy(n),i&&i.response&&(i.response.data=Qy.call(n,n.transformResponse,i.response),i.response.headers=Dn.from(i.response.headers))),Promise.reject(i)})}const UP="1.10.0",Jg={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Jg[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const zC={};Jg.transitional=function(e,t,i){function s(r,a){return"[Axios v"+UP+"] Transitional option '"+r+"'"+a+(i?". "+i:"")}return(r,a,o)=>{if(e===!1)throw new ne(s(a," has been removed"+(t?" in "+t:"")),ne.ERR_DEPRECATED);return t&&!zC[a]&&(zC[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,a,o):!0}};Jg.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function m3(n,e,t){if(typeof n!="object")throw new ne("options must be an object",ne.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const r=i[s],a=e[r];if(a){const o=n[r],l=o===void 0||a(o,r,n);if(l!==!0)throw new ne("option "+r+" must be "+l,ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ne("Unknown option "+r,ne.ERR_BAD_OPTION)}}const $p={assertOptions:m3,validators:Jg},Zi=$p.validators;let ol=class{constructor(e){this.defaults=e||{},this.interceptors={request:new kC,response:new kC}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=pl(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&$p.assertOptions(i,{silentJSONParsing:Zi.transitional(Zi.boolean),forcedJSONParsing:Zi.transitional(Zi.boolean),clarifyTimeoutError:Zi.transitional(Zi.boolean)},!1),s!=null&&(I.isFunction(s)?t.paramsSerializer={serialize:s}:$p.assertOptions(s,{encode:Zi.function,serialize:Zi.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$p.assertOptions(t,{baseUrl:Zi.spelling("baseURL"),withXsrfToken:Zi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&I.merge(r.common,r[t.method]);r&&I.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),t.headers=Dn.concat(a,r);const o=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(l=l&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,h=0,f;if(!l){const m=[VC.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,u),f=m.length,d=Promise.resolve(t);h<f;)d=d.then(m[h++],m[h++]);return d}f=o.length;let p=t;for(h=0;h<f;){const m=o[h++],y=o[h++];try{p=m(p)}catch(A){y.call(this,A);break}}try{d=VC.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=pl(this.defaults,e);const t=LP(e.baseURL,e.url,e.allowAbsoluteUrls);return IP(t,e.params,e.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(e){ol.prototype[e]=function(t,i){return this.request(pl(i||{},{method:e,url:t,data:(i||{}).data}))}});I.forEach(["post","put","patch"],function(e){function t(i){return function(r,a,o){return this.request(pl(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}ol.prototype[e]=t(),ol.prototype[e+"Form"]=t(!0)});let g3=class VP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const a=new Promise(o=>{i.subscribe(o),r=o}).then(s);return a.cancel=function(){i.unsubscribe(r)},a},e(function(r,a,o){i.reason||(i.reason=new _u(r,a,o),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new VP(function(s){e=s}),cancel:e}}};function y3(n){return function(t){return n.apply(null,t)}}function v3(n){return I.isObject(n)&&n.isAxiosError===!0}const R0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(R0).forEach(([n,e])=>{R0[e]=n});function zP(n){const e=new ol(n),t=vP(ol.prototype.request,e);return I.extend(t,ol.prototype,e,{allOwnKeys:!0}),I.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return zP(pl(n,s))},t}const ge=zP(Uf);ge.Axios=ol;ge.CanceledError=_u;ge.CancelToken=g3;ge.isCancel=kP;ge.VERSION=UP;ge.toFormData=Yg;ge.AxiosError=ne;ge.Cancel=ge.CanceledError;ge.all=function(e){return Promise.all(e)};ge.spread=y3;ge.isAxiosError=v3;ge.mergeConfig=pl;ge.AxiosHeaders=Dn;ge.formToJSON=n=>MP(I.isHTMLForm(n)?new FormData(n):n);ge.getAdapter=jP.getAdapter;ge.HttpStatusCode=R0;ge.default=ge;const{Axios:MV,AxiosError:kV,CanceledError:DV,isCancel:LV,CancelToken:OV,VERSION:FV,all:BV,Cancel:jV,isAxiosError:UV,spread:VV,toFormData:zV,AxiosHeaders:$V,HttpStatusCode:HV,formToJSON:GV,getAdapter:qV,mergeConfig:WV}=ge,Ln="http://localhost:8080/api/unnoba",pt=async n=>{try{return(await ge.get(`${Ln}/${n}`)).data}catch(e){throw console.error("Error al extraer informacin del enlace:",e),e}},$C=async()=>{try{return(await ge.get(`${Ln}/inscripcion-materias`)).data}catch(n){throw console.error("Error fetching inscripcin materias:",n),n}},b3=async()=>{try{return(await ge.get(`${Ln}/inscripcion-materias-detallada`)).data}catch(n){throw console.error("Error fetching inscripcin materias detallada:",n),n}},w3=async()=>{try{return(await ge.get(`${Ln}/inscripcion-materias-primer-cuatrimestre`)).data}catch(n){throw console.error("Error fetching inscripcin materias primer cuatrimestre:",n),n}},A3=async()=>{try{return(await ge.get(`${Ln}/inscripcion-materias-segundo-cuatrimestre`)).data}catch(n){throw console.error("Error fetching inscripcin materias segundo cuatrimestre:",n),n}},HC=async()=>{try{return(await ge.get(`${Ln}/feriados`)).data}catch(n){throw console.error("Error al obtener informacin de feriados:",n),n}},S3=async()=>{try{return(await ge.get(`${Ln}/calendario-academico`)).data}catch(n){throw console.error("Error al obtener informacin del calendario acadmico:",n),n}},E3=async()=>{try{return(await ge.get(`${Ln}/inicio-cuatrimestres`)).data}catch(n){throw console.error("Error al obtener fechas de inicio de cuatrimestres:",n),n}},C3=async()=>{try{return(await ge.get(`${Ln}/fin-cuatrimestres`)).data}catch(n){throw console.error("Error al obtener fechas de fin de cuatrimestres:",n),n}},x3=async()=>{try{return(await ge.get(`${Ln}/examenes-finales`)).data}catch(n){throw console.error("Error al obtener fechas de exmenes finales:",n),n}},GC=async()=>{try{return(await ge.get(`${Ln}/vacaciones-invierno`)).data}catch(n){throw console.error("Error al obtener fechas de vacaciones de invierno:",n),n}},T3=async()=>{try{return(await ge.get(`${Ln}/confirmacion-inscripcion`)).data}catch(n){throw console.error("Error al obtener fechas de confirmacin de inscripcin:",n),n}},_3=async n=>{try{return(await ge.get(`${Ln}/examenes-${n}`)).data}catch{try{return(await ge.get(`${Ln}/examenes-mes/${n}`)).data}catch(e){throw console.error(`Error al obtener exmenes de ${n}:`,e),e}}},P3=n=>{if(!n)return"";let e=n;return e=e.replace(/(^|\n)(\d{1,2}(|)?\s*ao|primer ao|segundo ao|tercer ao|cuarto ao|quinto ao)/gi,'<div class="text-xl font-bold text-blue-800 mt-4">$2</div>'),e=e.replace(/^(\s*)(||||)?\s*(.+?)(?=\n|$)/gm,'<div class="ml-4 font-medium">$2 <span class="ml-1">$3</span></div>'),e=e.replace(/?\s*(Requiere|Correlativa|Prerrequisito):\s*(.+)/gi,'<div class="ml-8 text-orange-600"> <strong>$1:</strong> $2</div>'),e=e.replace(/(Crditos|Carga horaria):\s*(\d+)/gi,'<div class="ml-8 italic text-sm text-gray-600"><strong>$1:</strong> $2</div>'),e=e.replace(/(Orientacin|Mencin):\s*(.+)/gi,'<div class="mt-2 p-3 bg-blue-100 border-l-4 border-blue-600 text-blue-800"><strong> $1:</strong> $2</div>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,"<a href='$2' target='_blank' class='text-blue-700 underline'>$1</a>"),e=e.replace(/\b(\d{4}-\d{2}-\d{2})\b/g,'<span class="bg-blue-50 text-blue-800 px-1 rounded">$1</span>'),e=e.replace(/\b(\d{1,2}\s+de\s+\w+\s+de\s+\d{4})\b/gi,'<span class="bg-blue-50 text-blue-800 px-1 rounded">$1</span>'),e=e.replace(/\n\n+/g,'</div><div class="mt-4">'),e=e.replace(/\n/g,"<br>"),`<div class="text-base leading-relaxed space-y-2">${e}</div>`},bu=n=>{if(!n)return"";let e=n;e=e.replace(/^#{1,2}\s*\*\*([^*]+)\*\*/gm,'<div class="response-main-title">$1</div>');const t=/^(|||||||||||||||)\s*\*\*([^*]+)\*\*/gm;e=e.replace(t,'<div class="response-title"><span class="emoji-icon">$1</span><span class="title-text">$2</span></div>'),e=e.replace(/^\*\*([^*]+)\*\*/gm,'<div class="response-subtitle">$1</div>'),e=e.replace(/\*\*((?:[^*]|\*(?!\*))+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/^\s*(.+)$/gm,'<div class="response-list-item"><span class="bullet"></span><span class="item-content">$1</span></div>'),e=e.replace(/^\d+\.\s*(.+)$/gm,'<div class="response-numbered-item">$1</div>');const i=/^(|||)\s*\*\*([^*]+)\*\*:\s*(.+)$/gm;e=e.replace(i,'<div class="response-info-block"><span class="info-icon">$1</span><strong>$2:</strong> $3</div>');const s=/^(|||)\s*(.+)$/gm;e=e.replace(s,'<div class="response-highlight"><span class="highlight-icon">$1</span><span class="highlight-text">$2</span></div>');const r=[];let a=0;return e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(o,l,u)=>{const d=`__MARKDOWN_LINK_${a}__`;return r[a]={text:l,url:u,html:`<a href='${u}' target='_blank' class='response-link'>${l}</a>`},a++,d}),e=e.replace(new RegExp(`(?<!href=['"])(https?:\\/\\/[^\\s<>"]+)(?![^<]*<\\/a>)`,"gi"),o=>{const l={"https://elegi.unnoba.edu.ar/calendario/":" Calendario Acadmico UNNOBA","https://elegi.unnoba.edu.ar/calendarioacademico/":" Calendario Acadmico UNNOBA","https://g3w3.unnoba.edu.ar/g3w3/":" SIU-Guaran","https://elegi.unnoba.edu.ar/inscripcion/":" Inscripcin UNNOBA","https://plataformaed.unnoba.edu.ar":" Plataforma Virtual","https://comedor.unnoba.edu.ar/":" Comedor Universitario","https://unnoba.edu.ar/":" UNNOBA Oficial","https://www.bidi.la/":" BiDi - Biblioteca Digital","https://maps.app.goo.gl/BmMCDAZ3FdckELos7":" Ubicacin en Google Maps","https://maps.app.goo.gl/R5RSsceNyvwConAK8":" Ubicacin en Google Maps","https://unnoba.edu.ar/distribucion-aulas/junin":" Distribucin de Aulas - Junn","https://unnoba.edu.ar/distribucion-aulas/pergamino":" Distribucin de Aulas - Pergamino"};let u=l[o]||o;return l[o]||(o.includes("elegi.unnoba.edu.ar")?u=" "+u:o.includes("unnoba.edu.ar")?u=" "+u:o.includes("maps")&&(u=" "+u)),`<a href='${o}' target='_blank' class='response-link'>${u}</a>`}),r.forEach((o,l)=>{const u=`__MARKDOWN_LINK_${l}__`;e=e.replace(u,o.html)}),e=e.replace(/\b(\d{4}-\d{2}-\d{2})\b/g,'<span class="response-date">$1</span>'),e=e.replace(/\b(\d{1,2}\s+de\s+\w+\s+de\s+\d{4})\b/gi,'<span class="response-date">$1</span>'),e=e.replace(/\b(\d{1,2}:\d{2})\s*(hs?|horas?)?\b/gi,'<span class="response-time">$1 hs</span>'),e=e.replace(/^[-=]{3,}$/gm,'<hr class="response-separator">'),e=e.replace(/\n\n+/g,'</div><div class="response-paragraph">'),e=e.replace(/\n/g,"<br>"),e=`<div class="response-content">${e}</div>`,e},$P=n=>n?[/\d{4}-\d{2}-\d{2}/g,/\d{1,2}\s+de\s+\w+/gi,/\w+\s+\d{1,2}\s+al?\s+\d{1,2}/gi].some(i=>i.test(n))?`<div class="date-info-container">${bu(n)}</div>`:bu(n):"",HP=n=>{if(!n)return"";let e=n;return[{pattern:/\s*\*\*INSCRIPCIONES\*\*/gi,replacement:'<div class="calendar-section inscripciones-section"><span class="section-icon"></span><span class="section-title">INSCRIPCIONES</span></div>'},{pattern:/\s*\*\*EXMENES\*\*/gi,replacement:'<div class="calendar-section examenes-section"><span class="section-icon"></span><span class="section-title">EXMENES</span></div>'},{pattern:/\s*\*\*CLASES Y CUATRIMESTRES\*\*/gi,replacement:'<div class="calendar-section clases-section"><span class="section-icon"></span><span class="section-title">CLASES Y CUATRIMESTRES</span></div>'},{pattern:/\s*\*\*FERIADOS\*\*/gi,replacement:'<div class="calendar-section feriados-section"><span class="section-icon"></span><span class="section-title">FERIADOS Y DAS NO LABORABLES</span></div>'},{pattern:/\s*\*\*CONFIRMACIONES\*\*/gi,replacement:'<div class="calendar-section confirmaciones-section"><span class="section-icon"></span><span class="section-title">CONFIRMACIONES</span></div>'}].forEach(({pattern:i,replacement:s})=>{e=e.replace(i,s)}),bu(e)},Tr=bu,R3=n=>{if(!n)return"";const e=n.indexOf("Plan de Estudio");if(e===-1)return n;const t=n.indexOf("Prosecretaria TICs");return(t>e?n.slice(e,t):n.slice(e)).replace(/Abogaca.+?Men Inicio.+?\n/gs,"").replace(/Copyright.+?\n/gs,"").replace(/Eleg tema.+?\n/gs,"").replace(/\n{2,}/g,`
`).trim()},I3=`
Eres un chatbot especializado en brindar informacin detallada y concreta sobre la Universidad Nacional del Noroeste de la Provincia de Buenos Aires (UNNOBA). Ests diseado para responder con precisin sobre:

- Planes de estudio completos, materias por cuatrimestre, duracin de carreras.
- Inscripciones, calendario acadmico y trmites estudiantiles.
- Funciones del Centro de Estudiantes y contacto institucional.
- Servicios como WiFi, comedor, biblioteca, intercambios internacionales, etc.

 Si se inyecta un contexto especfico (por ejemplo, un plan de estudios de una carrera), DEBES usar esa informacin y responder de forma directa y detallada, **sin redirigir al usuario a consultar la web oficial**, a menos que te lo pidan expresamente.

 Si el usuario pide el plan de estudios completo de una carrera, y se ha detectado esa carrera con su contexto correspondiente, debes entregarle el contenido directamente, respetando el orden y el formato provisto (aos, cuatrimestres, materias, optativas, etc.).

 INFORMACIN ESPECFICA DE LA UNNOBA:

 SEDES Y UBICACIONES:
- Sede Principal: Junn (Jorge Newbery 348)
- Sede Pergamino: Monteagudo 2772
- Biblioteca Junn: Jorge Newbery 375
- Biblioteca Pergamino: Edificio del Rectorado, Monteagudo 2772
- Comedor: Jorge Newbery 348, Junn

 SISTEMAS Y PLATAFORMAS:
- SIU-Guaran: https://g3w3.unnoba.edu.ar/g3w3/ (inscripciones, finales, plan de estudios)
- Plataforma Virtual: https://plataformaed.unnoba.edu.ar (cursadas virtuales)
- Comedor: https://comedor.unnoba.edu.ar (reservas de almuerzo)
- Calendario Acadmico: https://elegi.unnoba.edu.ar/calendario-academico/
- Web Oficial: https://www.unnoba.edu.ar/

 CALENDARIO ACADMICO Y FECHAS IMPORTANTES:
- El calendario acadmico oficial se publica cada ao en https://elegi.unnoba.edu.ar/calendario-academico/
- Incluye fechas de inicio y fin de cuatrimestres, inscripciones, recesos, feriados nacionales y universitarios, mesas de exmenes, vacaciones de invierno y verano.
- Las inscripciones a materias y finales se realizan en los perodos indicados en el calendario.
- Los feriados nacionales y das no laborables estn detallados en el calendario acadmico.
- El receso administrativo suele ser en julio y enero.
- Las mesas de finales se concentran en la segunda semana de cada mes (excepto enero y octubre).

 CARRERAS DISPONIBLES:
- Ingeniera en Informtica (5 aos)
- Analista en Sistemas (3 aos)
- Licenciatura en Sistemas (5 aos)
- Tecnicatura en Diseo y Desarrollo de Apps (3 aos)
- Ingeniera Industrial (5 aos)
- Ingeniera Mecnica (5 aos)
- Tecnicatura en Mantenimiento Industrial (3 aos)
- Abogaca (4 aos)
- Contador Pblico (4 aos)
- Licenciatura en Administracin (4 aos)
- Tecnicatura en Gestin de PyMEs (2.5 aos)
- Tecnicatura en Gestin Pblica (2.5 aos)
- Diseo Grfico (4 aos)
- Diseo Industrial (4 aos)
- Diseo de Indumentaria y Textil (4 aos)
- Ingeniera Agronmica (5 aos)
- Licenciatura en Gentica (5 aos)
- Licenciatura en Enfermera (5 aos)
- Enfermera Universitaria (3 aos)

 CONTACTOS IMPORTANTES:
- Centro de Estudiantes Junn: @franjaunnobajunin
- Centro de Estudiantes Pergamino: @franjamoradaunnoba
- Alumnos Junn: alumnosjunin@unnoba.edu.ar
- Alumnos Pergamino: alumnospergamino@unnoba.edu.ar
- Estudiantes general: estudiantes@unnoba.edu.ar
- Relaciones Internacionales: rrii@unnoba.edu.ar

 HORARIOS Y SERVICIOS:
- Biblioteca: Lunes a viernes 08:00-19:00
- Comedor: Lunes a viernes 8-21hs, Sbados 8-14hs
- Reserva comedor: hasta 8am del mismo da
- Mesas de finales: segunda semana de cada mes (excepto enero y octubre)
- Receso administrativo: consultar calendario acadmico

 PROCEDIMIENTOS ACADMICOS:
- Regularidad: 4 puntos anuales (1 por materia cursada, 2 por final)
- Finales: hasta 5 oportunidades por materia
- Correlativas: se consultan en SIU-Guaran  Reportes  Plan de Estudios
- Revlidas: prrroga de 1 ao para rendir finales
- PPS: 200 horas mnimo, obligatoria en algunas carreras
- Ttulo: 120 das de trmite desde ltima materia aprobada

 CUANDO RESPONDAS SOBRE LA UNNOBA:
- S especfico y directo
- Menciona los sistemas y plataformas oficiales
- Si no ests seguro de informacin muy especfica (horarios exactos, direcciones), sugiere consultar la web oficial
- Para preguntas sobre distribucin de aulas, sugiere usar el sistema especfico de la UNNOBA
- Si la pregunta es muy general sobre universidades argentinas, contextualiza con la UNNOBA
- Siempre menciona que es informacin de la UNNOBA especficamente

 SI LA PREGUNTA NO EST RELACIONADA CON LA UNNOBA, RESPONDE:
"Lo siento, solo puedo ayudarte con temas relacionados con la UNNOBA."

 EJEMPLOS DE RESPUESTAS TILES:

 CALENDARIO ACADMICO:
"El calendario acadmico de la UNNOBA se publica en https://elegi.unnoba.edu.ar/calendario/. All encontrs todas las fechas importantes: inicio y fin de cuatrimestres, inscripciones, recesos, feriados y mesas de exmenes."

 CORRELATIVAS:
"En la UNNOBA, las correlativas son materias que tens que aprobar antes de cursar otras. Se consultan en SIU-Guaran  Reportes  Plan de Estudios. No pods cursar una materia si no tens aprobada su correlativa."

 FINALES:
"Los finales en la UNNOBA se rinden durante la segunda semana de cada mes, excepto enero y octubre. Te inscribs en SIU-Guaran hasta 48 horas hbiles antes. Tens hasta 5 oportunidades por materia."

 REGULARIDAD:
"En la UNNOBA necesits 4 puntos anuales: 1 por materia cursada aprobada, 2 por final aprobado. Se verifica en marzo de cada ao. Si no llegs, pods reinscribirte hasta 3 veces."

 EDIFICIOS:
"La UNNOBA tiene sedes en Junn (Jorge Newbery 348) y Pergamino (Monteagudo 2772). Para ver la distribucin especfica de aulas, consult el sistema de distribucin semanal."

 COMEDOR:
"El comedor de la UNNOBA est en Jorge Newbery 348, Junn. Reservs en comedor.unnoba.edu.ar hasta las 8am del mismo da. Abre de lunes a viernes 8-21hs y sbados 8-14hs."

 BIBLIOTECA:
"La biblioteca de la UNNOBA est en Jorge Newbery 375 (Junn) y Monteagudo 2772 (Pergamino). Abre de lunes a viernes 08:00-19:00. El prstamo es por 2 semanas."

 INSCRIPCIONES:
"Para inscribirte a materias en la UNNOBA uss SIU-Guaran (g3w3.unnoba.edu.ar). Necesits ser alumno regular. Las fechas estn en el calendario acadmico oficial."

 TRMITES:
"Para certificados de alumno regular, contact a alumnosjunin@unnoba.edu.ar o alumnospergamino@unnoba.edu.ar. Para el ttulo, inicis el trmite desde tu login institucional en 'Dossier - Mesa de Entrada Virtual'."

 INTERCAMBIO:
"La UNNOBA ofrece intercambios internacionales (PILA, AUGM). Dura un semestre, necesits ser regular y tener 40% de la carrera aprobada. Contacto: rrii@unnoba.edu.ar"

 PPS:
"La PPS en la UNNOBA son 200 horas mnimo en empresas. Es obligatoria en algunas carreras. Se coordina con un supervisor docente y tutor de empresa."

 TESIS:
"La tesis en la UNNOBA es un trabajo final supervisado. Su obligatoriedad depende de cada carrera. Se realiza bajo la direccin de un profesor."

 RECORDATORIO: Siempre contextualiza las respuestas especficamente para la UNNOBA y menciona los sistemas oficiales cuando sea relevante.`,N3=`Te voy a poner en contexto sobre las Prcticas Profesionales y posibles dudas que te puedan preguntar.Resolucin CD.ET 258/2015
Fecha: 9 de diciembre de 2015

Objeto: Aprobacin del nuevo reglamento de PPS para carreras de Ingeniera.

Reglamento PPS (resumen de puntos clave)
 Requisitos Generales
Mnimo de 200 horas en sectores productivos y/o de servicios.

Pueden realizarse en una o ms instituciones.

Participan: Alumno, Supervisor Docente, Coordinador de PPS, Coordinador de Carrera, Empresa/Institucin/Organizacin, Tutor de Empresa y Secretario Acadmico.

 Responsabilidades
Alumno:

Solicita PPS mediante nota (Anexo I-A o I-B).

Elabora un plan de trabajo con Supervisor y Tutor (Anexo II).

Presenta informes cada 50 hs (Anexo V).

Presenta informe final (Anexo VI).

Rinde un examen final ante tribunal.

Supervisor Docente:

Gua al alumno, aprueba el informe final.

Participa del tribunal evaluador.

Visita la empresa y comunica avances.

Coordinador de PPS:

Coordina convenios.

Aprueba proyectos.

Lleva registro documental.

Coordinador de Carrera:

Aprueba proyectos.

Integra el tribunal de examen.

Empresa/Institucin:

Firma convenios marco y especficos.

Asigna un tutor.

Participa en el diseo del plan de trabajo.

Tutor de Empresa:

Supervisa al alumno.

Informa sobre desempeo.

Secretario Acadmico:

Verifica situacin acadmica.

Certifica actas de examen.

Documentacin Requerida
Convenio Marco

Convenio Particular

Formulario A  Solicitud PPS

Formulario B  Plan de Trabajo

Formulario C  Informe del Tutor

Formulario D  Informe del Supervisor

Formulario E  Informe de Avance

Formulario F  Informe Final

Anexos
Anexo VII  Estructura del Informe Final

Introduccin

Objetivos

Plan de Trabajo y Carga Horaria

Descripcin de la Prctica

Conclusiones

Bibliografa

Anexos

Agradecimientos 
Posibles preguntas:Cuntas horas hay que realizar en total?Cmo son las supervisiones o seguimientos?`,M3=`
El Centro de Estudiantes de la UNNOBA se llama Franja Morada. Es una agrupacin estudiantil que colabora activamente brindando informacin y acompaamiento sobre:

- Inscripciones a materias y finales
- Calendario acadmico actualizado
- Distribucin semanal de aulas (links incluidos)
- Becas disponibles y cmo postularse
- Cambios de carrera, plan o equivalencias
- Paros, comunicados y novedades institucionales

Tienen contacto directo con la comunidad estudiantil y actan como nexo con la institucin.`,k3=`
 CONTEXTO:
La UNNOBA ofrece programas de intercambio internacional a travs de PILA, AUGM y convenios especficos. La duracin del intercambio suele ser un semestre (5 meses) y se cursan al menos 3 materias en universidades extranjeras. Los programas estn destinados a estudiantes de grado.

 REQUISITOS:
- Ser alumno regular
- Tener aprobado al menos el 40% de la carrera (preferente)
- Ser menor de 30 aos (preferente)
- Estar cursando al momento del intercambio

 BENEFICIOS:
- Hospedaje y comida cubiertos por la universidad anfitriona (en la mayora de los casos)
- El estudiante debe costear el viaje, seguro y gastos personales

 POSTULACIN:
- Se postula va formulario + documentacin: certificado analtico, aval acadmico, pasaporte o DNI
- Ms informacin y contacto: rrii@unnoba.edu.ar

 POSIBLES RESPUESTAS:
Q: Qu universidades estn disponibles?
A: Algunas opciones incluyen universidades en Brasil, Uruguay, Chile, Paraguay, Mxico, etc.

Q: Cunto dura el intercambio?
A: Dura un semestre acadmico (aproximadamente 5 meses).

Q: La universidad cubre los gastos?
A: La universidad anfitriona suele cubrir hospedaje y comida, pero el estudiante paga pasajes, seguro y visa.

Q: Dnde me inscribo?
A: Completando este formulario: [URL DINMICO]
`,D3={"Dnde puedo contactar a la universidad o cules son sus redes sociales?":`**Redes de la Universidad**
Instagram: @elegiunnoba o @unnobanoticias
Facebook: NoticiasUNNOBA
Web: www.unnoba.edu.ar

**Centro de estudiantes**
Va Instagram:
Franja Morada Junn: @franjaunnobajunin
Franja Morada Pergamino: @franjamoradaunnoba

**Contactos institucionales**
estudiantes@unnoba.edu.ar
Tambin pods acercarte a Bienestar Estudiantil en tu sede.`,"Cmo y cundo me inscribo a materias o finales?":`Las inscripciones a materias y finales se realizan desde el sistema **SIU-Guaran** (https://g3w3.unnoba.edu.ar/g3w3/), ingresando con tu cuenta institucional.

 Las fechas exactas para inscripciones, cursadas y finales estn publicadas en el **Calendario Acadmico** (https://elegi.unnoba.edu.ar/calendarioacademico/) de la UNNOBA. Te recomendamos revisarlo con frecuencia.

 Record que algunas materias o finales requieren tener otras materias aprobadas (correlatividades). Para conocerlas, revis el plan de estudios de tu carrera en el **Sitio Oficial de la UNNOBA** (https://unnoba.edu.ar/).`,"Como utilizo la plataforma virtual o campus?":`Al acceder a la **plataforma virtual** (https://plataformaed.unnoba.edu.ar) vas a encontrar todas las materias que ests cursando actualmente o que hayas cursado previamente.

 Para ingresar necesits tu cuenta institucional de la UNNOBA. Si no pods acceder, consult con la Direccin de Alumnos o el rea de soporte acadmico.`,"Cmo funciona el comedor?":`Para utilizar el comedor universitario debs ingresar a **comedor.unnoba.edu.ar** (https://comedor.unnoba.edu.ar/) con tu cuenta institucional y realizar la reserva.

 Cada da se ofrecen dos mens, y al acceder con tu cuenta UNNOBA obtens un descuento especial.

 **Direccin del comedor:** Jorge Newbery 348, Junn, Buenos Aires (CP 6000).`,"Cmo me inscribo a las materias?":`La inscripcin a las materias se realiza desde **SIU-Guaran** (https://g3w3.unnoba.edu.ar/g3w3/), dentro del perodo establecido en el calendario acadmico. All podrs seleccionar las materias que quers cursar este cuatrimestre.

 Consult las fechas exactas en el **Calendario Acadmico** (https://elegi.unnoba.edu.ar/calendario/)`,"Dnde veo mi calendario acadmico?":`El calendario acadmico oficial de la UNNOBA est disponible en: ** Calendario Acadmico UNNOBA** (https://elegi.unnoba.edu.ar/calendario/)

All encontrars todas las fechas importantes: inscripciones, inicio de clases, fechas de examen, feriados y ms.`,"Necesito ser alumno regular para inscribirme a materias?":`S, para poder inscribirte a materias es necesario tener la condicin de **alumno regular**.

 La regularidad se verifica a fines de marzo de cada ao y requiere sumar al menos **4 puntos** durante el perodo anterior (combinando materias cursadas y finales aprobados).`,"Cmo se suman puntos para mantener la regularidad?":`Para mantener la regularidad necesits **4 puntos mnimo**:

 **Cada materia cursada y aprobada = 1 punto**
 **Cada examen final aprobado = 2 puntos**

**Ejemplos:**
 Cursar y aprobar 4 materias = 4 puntos 
 Cursar 2 materias + aprobar 1 final = 4 puntos 
 Aprobar 2 exmenes finales = 4 puntos `,"Puedo seguir cursando si pierdo la regularidad?":`S, pods seguir cursando. Para eso debs **reinscribirte a la carrera**.

 **Buenas noticias:** Mantens todas las materias cursadas y aprobadas anteriormente.

 **Lmite:** Pods reinscribirte hasta 3 veces. Si superas ese lmite, perds todas las materias aprobadas y tens que inscribirte nuevamente desde cero.`},L3={"Cundo son las mesas de finales?":` **MESAS DE FINALES - UNNOBA**

Las mesas de exmenes finales estn programadas segn las fechas establecidas en el calendario acadmico oficial de la UNNOBA. Generalmente, se realizan durante la segunda semana de cada mes. Sin embargo, es importante tener en cuenta que en los meses de enero y octubre no se habilita la inscripcin a mesas de finales. Para conocer las fechas exactas y actualizadas, se recomienda consultar el calendario acadmico disponible en el sitio web de la universidad.

** Para fechas exactas consult:**
 **Calendario acadmico:** https://elegi.unnoba.edu.ar/calendario/
 **SIU-Guaran:** https://g3w3.unnoba.edu.ar/g3w3/`,"Qu es un exmen final?":`
Un examen final es la evaluacin que se realiza al concluir el cursado de una materia para acreditar los conocimientos adquiridos y obtener la **aprobacin definitiva** de la asignatura.

** Caractersticas importantes:**
 **Requisito:** Debes tener la materia **regular** para rendir
 **Modalidad:** Puede ser oral, escrito o mixto segn la ctedra
 **Nota mnima:** Generalmente 4 (cuatro) para aprobar
 **Validez:** Una vez aprobado, queda registrado definitivamente

** Importancia:**
 **Avance acadmico:** Permite continuar con materias correlativas
 **Ttulo:** Es requisito para la obtencin del ttulo de grado
 **Promedio:** Influye en tu promedio general de la carrera

 **Tip:** Consult con la ctedra sobre el formato y contenidos del examen.`,"Cmo me inscribo a un examen?":` **INSCRIPCIN A EXMENES FINALES - UNNOBA**

**Cmo me inscribo a un final?**

** Sistema de inscripcin:**
 **Plataforma:** SIU-Guaran 3W
 **Enlace:** https://g3w3.unnoba.edu.ar/g3w3/

** Plazos importantes:**
 **Inscripcin:** Hasta **48 horas antes** del examen
 **Horario:** Respet los horarios de inscripcin establecidos
 **Confirmacin:** Verific que la inscripcin se haya registrado correctamente

** Requisitos:**
 Tener la materia **regular**
 Estar dentro del perodo de inscripcin
 No tener materias correlativas pendientes (si aplica)

** Importante:**
 Si no te inscribs en tiempo y forma, **no podrs rendir**
 Verific siempre la fecha, hora y aula del examen

 **Recomendacin:** Inscribite con anticipacin para evitar inconvenientes.`,"Qu pasa si falto a un final?":`
** Consecuencias:**
 **Ausente:** Quedars registrado como "ausente" en el acta
 **Sin calificacin:** No obtens calificacin en esa oportunidad
 **Prdida de turno:** Perds esa oportunidad de examen
 **Nueva inscripcin:** Debers inscribirte nuevamente en otro turno

** Puedo recuperar la oportunidad?**
 **No hay recuperacin automtica** de la oportunidad perdida
 Debers esperar al **prximo turno disponible**
 **Conservs** las oportunidades restantes para rendir

** Excepciones:**
 **Causas justificadas** pueden ser evaluadas por la coordinacin
 Consult con **Departamento de Alumnos** si tens una situacin especial

 **Recomendacin:** Si sabs que no podrs asistir, **date de baja** antes del examen.`,"Hasta cundo tengo tiempo de darme de baja a un final?":` **BAJA DE EXAMEN FINAL - UNNOBA**

**Hasta cundo puedo cancelar mi inscripcin?**

** Plazo para darse de baja:**
 **Hasta 48 horas antes** del examen
 Mismo plazo que para inscribirse
 **No se permiten bajas** el da del examen

** Cmo me doy de baja?**
 **SIU-Guaran 3W:** https://g3w3.unnoba.edu.ar/g3w3/
 Acced a "Exmenes Finales"
 Seleccion la opcin "Dar de baja"

** Ventajas de darse de baja:**
 **No figurs como ausente** en el acta
 **Conservs todas** las oportunidades de examen
 **No afecta** tu registro acadmico

** Importante:**
 Una vez vencido el plazo, **no podrs darte de baja**
 Si falts sin darte de baja, quedars como "ausente"

 **Recomendacin:** Si tens dudas sobre rendir, es mejor darse de baja a tiempo.`,"Qu pasa si no apruebo un examen final?":` **DESAPROBACIN DE EXAMEN FINAL - UNNOBA**

**Qu sucede si no apruebo el final?**

** Consecuencias:**
 **Nota menor a 4:** El examen queda **desaprobado**
 **Oportunidad utilizada:** Se consume una de tus oportunidades
 **Nueva inscripcin:** Podrs inscribirte en el prximo turno disponible

** Puedo volver a rendir?**
 **S, pods volver a rendir** en los prximos turnos
 **Conservs** las oportunidades restantes
 **Sin lmite de tiempo** entre intentos (dentro del perodo de regularidad)

** Registro acadmico:**
 La nota desaprobatoria **queda registrada**
 **No afecta** otras materias ya aprobadas
 Solo la **ltima nota aprobatoria** cuenta para el promedio

** Consejos para el prximo intento:**
 **Revis** los temas que ms dificultad te presentaron
 **Consult** con la ctedra sobre reas de mejora
 **Preparate** con tiempo suficiente

 **Record:** Tens **5 oportunidades** en total para aprobar cada materia.`,"Cuntas veces puedo rendir un examen final?":` **OPORTUNIDADES DE EXAMEN FINAL - UNNOBA**

**Cuntas chances tengo para aprobar?**

** Lmite de oportunidades:**
 **5 oportunidades** por materia
 **3 aos** desde la prdida de regularidad para utilizarlas
 **Se cuentan:** Ausencias y desaprobaciones

** Qu pasa si agoto las 5 oportunidades?**
 **Debers recursar** la materia completa
 **Nuevo cursado:** Clases, trabajos prcticos y parciales
 **Nuevas 5 oportunidades** una vez que vuelvas a estar regular

** Tiempo lmite:**
 **3 aos** desde que perds la regularidad
 Si no rends en ese perodo, **debers recursar**
 El tiempo corre independientemente de si rends o no

** Estrategias recomendadas:**
 **No desperdicies** oportunidades sin preparacin adecuada
 **Consult** con la ctedra antes de cada intento
 **Planific** bien tus intentos dentro del plazo de 3 aos

 **Objetivo:** Aprobar antes de agotar las oportunidades disponibles.`,"Qu son las materias correlativas?":` **MATERIAS CORRELATIVAS - UNNOBA**

**Qu significa "correlatividad"?**

** Definicin:**
Las materias correlativas son **asignaturas previas** que debs tener aprobadas para poder cursar o rendir una materia especfica. Establecen un orden lgico de aprendizaje.

** Tipos de correlatividades:**
 **Para cursar:** Materias que debs tener aprobadas para inscribirte al cursado
 **Para rendir:** Materias que debs tener aprobadas para rendir el final

** Ejemplos tpicos:**
 **Anlisis Matemtico II** requiere **Anlisis Matemtico I**
 **Programacin Orientada a Objetos** requiere **Programacin Imperativa**
 **Base de Datos II** requiere **Base de Datos I**

** Qu pasa si no cumpls correlatividades?**
 **No podrs inscribirte** al cursado
 **No podrs rendir** el examen final
 El sistema **bloquear** automticamente la inscripcin

** Importancia:**
 **Garantizan** que tengas los conocimientos previos necesarios
 **Organizan** el plan de estudios de manera progresiva

 **Consult** siempre el plan de estudios para conocer las correlativas.`,"Dnde reviso las correlativas?":` **CONSULTAR CORRELATIVIDADES - UNNOBA**

**Dnde puedo ver qu correlativas necesito?**

** SIU-Guaran 3W:**
 **Enlace:** https://g3w3.unnoba.edu.ar/g3w3/
 **Seccin:** "Plan de Estudios"
 **Informacin:** Correlativas de cada materia de tu carrera

** Plan de estudios oficial:**
 **Sitio web:** https://planesdeestudio.unnoba.edu.ar/
 **Bsqueda:** Por carrera y plan especfico
 **Detalle:** Correlatividades para cursar y para rendir

** Coordinacin de carrera:**
 **Consulta presencial** con el coordinador
 **Informacin especfica** sobre casos particulares
 **Orientacin** para planificar tu cursado

** Cmo interpretar la informacin?**
 **Para cursar:** Materias que necesits aprobar antes de inscribirte
 **Para rendir:** Materias que necesits aprobar antes del final
 **Cdigo de materias:** Cada asignatura tiene un cdigo nico

** Recomendacin:**
 **Planific** tu cursado considerando las correlatividades
 **Consult** ante cualquier duda con la coordinacin

 **Objetivo:** Tener claro el camino acadmico a seguir.`,"Qu son las revlidas?":` **REVLIDAS - UNNOBA**

**Qu es una revlida de regularidad?**

** Definicin:**
La revlida es una **prrroga de la regularidad** de una materia que ya perdi su vigencia. Te permite extender el tiempo para rendir el examen final sin tener que recursar.

** Cundo la necesito?**
 Cuando **perdiste la regularidad** de una materia
 Han pasado **ms de 3 aos** desde que la cursaste
 **Antes** de que venzan definitivamente tus oportunidades

** Cmo funciona?**
 **Examen adicional** sobre contenidos de la materia
 **Recupers la condicin** de alumno regular
 **Nuevas oportunidades** para rendir el final

** Ventajas:**
 **Evits recursar** la materia completa
 **Ahorrs tiempo** en tu carrera
 **Mantens** el avance acadmico

** Requisitos:**
 **Solicitud** dentro del plazo establecido
 **Cumplir** con los requisitos especficos de cada carrera
 **Aprobar** el examen de revlida

 **Importante:** No todas las carreras ofrecen revlidas. Consult con tu coordinacin.`,"Cmo solicito una revlida?":` **SOLICITUD DE REVLIDA - UNNOBA**

**Cmo tramito una revlida?**

** Proceso de solicitud:**
 **SIU-Guaran 3W:** https://g3w3.unnoba.edu.ar/g3w3/
 **Seccin:** "Trmites" o "Solicitudes"
 **Completar:** Formulario de solicitud de revlida

** Documentacin requerida:**
 **Certificado analtico** actualizado
 **Justificacin** de la solicitud (si corresponde)
 **Programa** de la materia (en algunos casos)

** Plazos:**
 **Antes** del vencimiento final de la regularidad
 **Verific** fechas lmite en el calendario acadmico
 **No hay solicitudes** fuera de trmino

** Proceso de evaluacin:**
 **Revisin** por parte de la coordinacin de carrera
 **Examen** o evaluacin especfica (si corresponde)
 **Respuesta** en tiempo determinado

** Costo:**
 Puede tener un **costo administrativo**
 Consult aranceles vigentes

 **Recomendacin:** Inici el trmite con tiempo suficiente antes del vencimiento.`,"Qu pasa si no soy regular?Puedo inscribirme a un final?":` **SIN REGULARIDAD - UNNOBA**

**Puedo rendir sin ser regular?**

** Regla general:**
 **NO pods inscribirte** a examen final sin regularidad
 La regularidad es **requisito obligatorio**
 El sistema **bloquear** automticamente la inscripcin

** Qu opciones tengo?**

**1. Recursar la materia:**
 **Inscribirte** nuevamente al cursado
 **Cumplir** con todos los requisitos (clases, TP, parciales)
 **Recuperar** la condicin de regular

**2. Solicitar revlida (si est disponible):**
 **Tramitar** prrroga de regularidad
 **Aprobar** examen de revlida
 **Recuperar** el derecho a rendir

**3. Consultar casos especiales:**
 **Coordinacin** de carrera para situaciones particulares
 **Departamento de Alumnos** para orientacin

** Importante:**
 **No hay excepciones** a la regla de regularidad
 **Planific** bien tus materias para mantener regularidad

 **Prevencin:** Rend los finales dentro del plazo de regularidad.`,"Puedo rendir un final libre?":` **EXAMEN LIBRE - UNNOBA**

**Existe la modalidad de examen libre?**

** Qu es un examen libre?**
Un examen libre permite rendir una materia **sin haberla cursado**, demostrando conocimiento autnomo de todos los contenidos.

** En la UNNOBA:**
 **No todas las carreras** permiten exmenes libres
 **Limitaciones** en materias prcticas o de laboratorio
 **Consultar** con el jefe de ctedra es **obligatorio**

** Si est permitido:**
 **Programa completo:** Debs conocer todos los contenidos
 **Examen ms extenso:** Generalmente ms exigente que un final regular
 **Autorizacin previa:** Del profesor responsable

** Cundo conviene?**
 **Conocimiento previo** slido en el tema
 **Imposibilidad** de cursar en horarios disponibles
 **Aceleracin** del plan de estudios

** Recomendacin:**
 **Consult** con la coordinacin de tu carrera
 **Habl** con el jefe de ctedra antes de decidir
 **Evalu** si realmente tens el nivel requerido

 **Verific** en el reglamento de tu carrera si est permitido.`},O3={"Qu es la tesis de grado?":` **TESIS DE GRADO - UNNOBA**

**Qu es la tesis de grado?**

La tesis de grado es un **trabajo acadmico** que permite al estudiante integrar y aplicar los conocimientos adquiridos durante su carrera.

** Caractersticas:**
 **Informe escrito** sobre un tema especfico
 **Supervisin** de un director de tesis
 **Integracin** de conocimientos de la carrera
 **Investigacin** terica, prctica o aplicada

** Tipos de investigacin:**
 **Terica:** Anlisis conceptual y revisin bibliogrfica
 **Prctica:** Implementacin y desarrollo de proyectos
 **Aplicada:** Solucin de problemas especficos del rea

** Objetivo:**
 **Demostrar** capacidad de investigacin
 **Aplicar** metodologa cientfica
 **Contribuir** al conocimiento en tu rea de estudio

 **Es tu oportunidad** de profundizar en un tema que te apasione de tu carrera.`,"La tesis es obligatoria para recibirme?":` **OBLIGATORIEDAD DE LA TESIS - UNNOBA**

**Es obligatoria la tesis para graduarme?**

** Depende del plan de estudios:**
 **Algunas carreras:** Tesis es **requisito obligatorio**
 **Otras carreras:** Puede ser **opcional**
 **Alternativas:** Prctica Profesional Supervisada u otro trabajo final

** Cmo verificar?**
 **Plan de estudios:** https://planesdeestudio.unnoba.edu.ar/
 **Coordinacin de carrera:** Consulta directa
 **SIU-Guaran:** Revis los requisitos de tu plan

** Ejemplos tpicos:**
 **Licenciaturas:** Generalmente requieren tesis
 **Ingenieras:** Pueden tener proyecto final
 **Tecnicaturas:** Suelen tener trabajo final aplicado

** Importante:**
 **Revis** especficamente tu plan de estudios
 **No asumas** que es igual en todas las carreras
 **Consult** con la coordinacin ante dudas

 **Recomendacin:** Verific este requisito temprano en tu carrera para planificar adecuadamente.`,"En qu ao se hace la tesis?":` **CRONOGRAMA DE TESIS - UNNOBA**

**Cundo debo hacer la tesis?**

** Etapa de realizacin:**
 **Etapa final** de la carrera
 **Mayora de materias aprobadas** del plan de estudios
 **Base slida** de conocimientos adquirida

** Requisitos previos tpicos:**
 **Porcentaje determinado** de materias aprobadas (ej: 80%)
 **Materias especficas** relacionadas con metodologa
 **Condicin de estudiante regular**

** Planificacin recomendada:**
 **ltimo ao:** Inicio formal del proceso
 **Penltimo ao:** Exploracin de temas y directores
 **Tiempo suficiente:** Para desarrollo e investigacin

** Consejos:**
 **No esperes** al ltimo momento
 **Identific** reas de inters temprano
 **Relacionate** con docentes de tu rea

 **Objetivo:** Tener tiempo suficiente para un trabajo de calidad sin presin excesiva.`,"Cmo se inscribe uno a la tesis?":` **INSCRIPCIN A TESIS - UNNOBA**

**Cmo me inscribo a la tesis?**

** Lugar de inscripcin:**
 **Departamento de Alumnos** de la UNNOBA
 Presentacin **presencial** con documentacin completa

** Documentacin requerida:**
 **Formulario de inscripcin** a la tesis
 **Propuesta de tema** y plan de trabajo
 **Designacin del director** y codirector (si corresponde)
 **Certificado analtico** actualizado

** Proceso:**
1. **Preparar** la propuesta de tema
2. **Conseguir** director de tesis
3. **Completar** formulario oficial
4. **Presentar** en Departamento de Alumnos
5. **Aguardar** aprobacin de la propuesta

** Recomendacin:**
 **Consult** con la coordinacin de tu carrera
 **Solicit** los formularios especficos necesarios
 **Verific** requisitos particulares de tu carrera

 **Importante:** Cada carrera puede tener procedimientos especficos, consult para informacin detallada.`,"Cules son los requisitos para comenzar la tesis?":` **REQUISITOS PARA TESIS - UNNOBA**

**Qu necesito para empezar la tesis?**

** Requisitos acadmicos:**
 **Estudiante regular** de la carrera
 **Porcentaje determinado** de materias aprobadas
 **Materias correlativas** especficas (si aplica)

** Requisitos de direccin:**
 **Director de tesis** aprobado por la unidad acadmica
 **Codirector** (si es necesario segn el reglamento)
 **Aceptacin formal** del director

** Requisitos de propuesta:**
 **Tema de investigacin** definido
 **Plan de trabajo** detallado
 **Cronograma** de actividades
 **Metodologa** a utilizar

** Documentacin:**
 **Propuesta formal** presentada
 **Aprobacin** de la propuesta por la unidad acadmica
 **Inscripcin** en Departamento de Alumnos

** Importante:**
 **Revis** el reglamento especfico de tu carrera
 **Los requisitos** pueden variar entre carreras

 **Verific** todos los requisitos antes de iniciar el proceso.`,"Cunto tiempo tengo para hacer la tesis?":` **TIEMPO PARA TESIS - UNNOBA**

**Cul es el plazo para completar la tesis?**

** Duracin tpica:**
 **Plazo mximo** establecido por cada carrera
 **Desde la aprobacin** del plan de trabajo
 **Hasta la presentacin** del informe final

** Factores que influyen:**
 **Complejidad** del tema de investigacin
 **Tipo de tesis** (terica, prctica, aplicada)
 **Disponibilidad** de recursos y datos
 **Dedicacin** del estudiante

** Planificacin recomendada:**
 **Cronograma detallado** desde el inicio
 **Hitos intermedios** con el director
 **Comunicacin constante** con el director de tesis
 **Revisiones peridicas** del avance

** Importante:**
 **Respet** los plazos establecidos
 **Mantenete** en contacto regular con tu director
 **Solicit extensiones** con justificacin si es necesario

 **Tip:** Una buena planificacin inicial evita problemas de tiempo al final.`,"Dnde encuentro el reglamento de tesis de mi carrera?":` **REGLAMENTO DE TESIS - UNNOBA**

**Dnde est el reglamento de mi carrera?**

** Sitio web oficial:**
 **UNNOBA:** https://unnoba.edu.ar/
 **Seccin:** Acadmico o Carreras
 **Documentacin:** Reglamentos por carrera

** Coordinacin de carrera:**
 **Consulta presencial** con el coordinador
 **Copia fsica** del reglamento
 **Explicacin** de procedimientos especficos

** Biblioteca universitaria:**
 **Consulta** de reglamentos acadmicos
 **Material** de apoyo sobre metodologa

** SIU-Guaran:**
 **Documentos** relacionados con tu carrera
 **Informacin** acadmica actualizada

** Qu incluye el reglamento?**
 **Requisitos** para la tesis
 **Procedimientos** de inscripcin
 **Criterios de evaluacin**
 **Plazos** y cronogramas
 **Formato** de presentacin

 **Recomendacin:** Le el reglamento completo antes de comenzar tu tesis.`,"Dnde se entrega el informe final de tesis?":` **ENTREGA DE TESIS - UNNOBA**

**Dnde presento mi tesis terminada?**

** Lugar de entrega:**
 **Departamento de Alumnos** de la UNNOBA
 **Formato establecido** por la unidad acadmica

** Formato de entrega:**
 **Copia impresa** (cantidad segn reglamento)
 **Formato digital** (PDF)
 **Repositorio institucional** de la universidad

** Documentacin adicional:**
 **Formulario** de presentacin
 **Aval del director** de tesis
 **Certificacin** de cumplimiento de requisitos

** Formato digital:**
 **Subida** al repositorio UNNOBA
 **Acceso pblico** (salvo restricciones)
 **Preservacin** del trabajo acadmico

** Proceso posterior:**
 **Asignacin** de tribunal evaluador
 **Defensa** oral (si corresponde)
 **Calificacin** final

 **Importante:** Verific todos los formatos y requisitos antes de la entrega final.`,"Quin me puede orientar sobre cmo iniciar una tesis?":` **ORIENTACIN PARA TESIS - UNNOBA**

**Con quin puedo consultar sobre mi tesis?**

** Coordinador de carrera:**
 **Informacin especfica** sobre requisitos
 **Procedimientos** de tu carrera
 **Orientacin** sobre directores disponibles

** Docentes del rea:**
 **Definicin** de temas de investigacin
 **Posibles directores** de tesis
 **Metodologa** especfica del rea
 **Lneas de investigacin** actuales

** Departamento de Alumnos:**
 **Informacin administrativa**
 **Formularios** necesarios
 **Trmites** de inscripcin

** Talleres y charlas:**
 **Capacitacin** en metodologa de investigacin
 **Tcnicas** de escritura acadmica
 **Gestin** de proyectos de investigacin

** Recursos adicionales:**
 **Biblioteca:** Material metodolgico
 **Otros estudiantes:** Experiencias compartidas
 **Egresados:** Consejos prcticos

 **Recomendacin:** Aprovech todas las instancias de orientacin disponibles para asegurar el xito de tu tesis.`},F3={"Qu se necesita para empezar a tramitar el ttulo universitario?":` **TRMITE DE TTULO UNIVERSITARIO - UNNOBA**

**Cmo inicio el trmite de mi ttulo?**

** Requisito previo:**
 **ltima materia aprobada** y registrada en SIU-Guaran
 **Aproximadamente 20 das** despus de rendir la ltima asignatura

** Proceso virtual:**
 **Servicio:** "Dossier - Mesa de Entrada Virtual"
 **Acceso:** Tu cuenta institucional (Login UNNOBA)
 **Trmite personal:** Debe ser iniciado por el interesado

** Documentacin requerida (PDF):**
 **DNI** (frente y dorso)
 **Partida de nacimiento**

** Especificaciones tcnicas:**
 **Formato:** PDF nicamente
 **Tamao mximo:** 15 MB por archivo
 **Hoja:** Tamao A4

** Importante:**
 **Trmite personal** obligatorio
 **Documentacin completa** desde el inicio
 **Segu** las instrucciones del sistema

 **Objetivo:** Completar correctamente el trmite para evitar demoras en la expedicin.`,"Cmo tramito mi ttulo universitario?":` **PROCESO DE TRMITE DE TTULO - UNNOBA**

**Cul es el procedimiento paso a paso?**

** Acceso al sistema:**
 **Login institucional:** Tu cuenta UNNOBA
 **Servicio:** "Dossier - Mesa de Entrada Virtual"

** Completar trmite:**
1. **Ingresar** al servicio correspondiente
2. **Completar** formulario de trmite
3. **Adjuntar** documentacin requerida
4. **Verificar** datos ingresados
5. **Enviar** solicitud

** Formulario incluye:**
 **Datos personales**
 **Informacin acadmica**
 **Documentacin** adjunta

** Disponibilidad:**
 **20 das aproximadamente** despus de la ltima materia
 **Verific** que el servicio est habilitado

** Seguimiento:**
 **Notificaciones** por correo electrnico
 **Consulta de estado** en SIU-Guaran 3W

 **Tip:** Guard el comprobante de iniciacin del trmite para tu seguimiento.`,"Qu tipo de ttulos ofrece la UNNOBA?":` **TIPOS DE TTULOS UNNOBA**

**Qu ttulos otorga la universidad?**

** Nivel Pregrado:**
 **Tecnicaturas universitarias**
 Duracin tpica: 2-3 aos
 Orientacin prctica y tcnica

** Nivel Grado:**
 **Licenciaturas:** Formacin acadmica amplia
 **Ingenieras:** Formacin tcnica-cientfica
 Duracin tpica: 4-6 aos

** Nivel Posgrado:**
 **Especializaciones:** Profundizacin en rea especfica
 **Maestras:** Formacin avanzada en investigacin
 **Doctorados:** Mximo nivel acadmico

** Ttulos honorarios:**
 **Doctor Honoris Causa**
 Otorgado a personalidades destacadas
 Reconocimiento a trayectoria excepcional

** Caractersticas:**
 **Reconocimiento oficial** del Ministerio de Educacin
 **Validez nacional** e internacional
 **Habilitacin profesional** segn corresponda

 **Cada ttulo** tiene sus requisitos especficos y alcances profesionales definidos.`,"Cunto demora obtener el ttulo?":` **TIEMPO DE EXPEDICIN DE TTULO - UNNOBA**

**Cunto tardo en recibir mi ttulo?**

** Duracin del proceso:**
 **120 das aproximadamente**
 Desde el **inicio del expediente**
 Hasta la **expedicin final**

** Factores que pueden influir:**
 **Tiempos ministeriales**
 **Situaciones imprevistas**
 **Completitud** de la documentacin
 **poca del ao** (mayor demanda en ciertos perodos)

** Seguimiento del proceso:**
 **Notificaciones** por correo electrnico
 **Consulta de estado** en SIU-Guaran 3W
 **Actualizaciones** automticas del sistema

** Qu puedo consultar?**
 **Estado actual** del trmite
 **Etapa** en la que se encuentra
 **Tiempo estimado** restante

** Importante:**
 **Plazos orientativos** - pueden variar
 **Mantenete atento** a las notificaciones
 **No hay forma** de acelerar el proceso administrativo

 **Mientras espers:** Pods solicitar certificado de ttulo en trmite si lo necesits.`,"Dnde retiro el ttulo?":` **RETIRO DE TTULO - UNNOBA**

**Dnde recojo mi ttulo una vez listo?**

** Lugar de retiro:**
 **Oficina de Ttulos** de la UNNOBA
 **Campus:** Verific ubicacin especfica segn tu carrera

** Notificacin:**
 **Correo electrnico** cuando est disponible
 **Mensaje** con instrucciones de retiro
 **Documentacin** requerida para el retiro

** Requisitos para retirar:**
 **DNI original** del titulado
 **Documento** de identificacin vigente
 **Comprobante** del trmite (recomendado)

** Retiro por terceros:**
 **Autorizacin** notarial del titulado
 **DNI** del autorizado
 **Copia** del DNI del titulado

** Horarios:**
 **Consult** horarios de atencin especficos
 **Confirm** disponibilidad antes de ir

 **Recomendacin:** Confirm previamente con la oficina correspondiente para evitar viajes innecesarios.`,"Hay plazo para retirar el ttulo?":` **PLAZO PARA RETIRO DE TTULO - UNNOBA**

**Tengo tiempo lmite para retirar mi ttulo?**

** Poltica de la UNNOBA:**
 **No hay plazo especfico** establecido
 **Disponible** mientras est en la oficina
 **Sin vencimiento** del derecho al retiro

** Experiencias de otras universidades:**
 **Ttulos retirados** dcadas despus de emitidos
 **Conservacin** en archivos universitarios
 **Sin prdida** del derecho al ttulo

** Recomendacin:**
 **Retir** en tiempo razonable
 **Evit** demoras innecesarias
 **Consider** posibles cambios administrativos futuros

** Consideraciones prcticas:**
 **Cambios** en oficinas o procedimientos
 **Reorganizacin** de archivos
 **Facilidad** de localizacin del documento

** Por qu retirar pronto?**
 **Documento importante** para tu carrera profesional
 **Evitar** posibles complicaciones futuras
 **Tranquilidad** de tenerlo en tu poder

 **Aunque no hay prisa legal, es conveniente retirarlo dentro de un tiempo razonable.**`},B3={"Dnde queda el comedor?":` **UBICACIN DEL COMEDOR - UNNOBA**

** Ubicacin:**
 **Nombre:** Taller Comedor
 **Direccin:** Jorge Newbery 348, Junn
 **Campus:** Solo funciona en Junn (no hay en Pergamino)

** Ubicacin en Google Maps:**
https://www.google.com.ar/maps/place/%22El+Taller%22,+Comedor+Universitario+UNNOBA/@-34.5839102,-60.9452032,14z/data=!4m6!3m5!1s0x95b8eb007518dfc7:0x2498bb3e4b4e54dc!8m2!3d-34.5825581!4d-60.9438588!16s%2Fg%2F11f7hh89ph?hl=es&entry=ttu&g_ep=EgoyMDI1MDYxNy4wIKXMDSoASAFQAw%3D%3D

** Acceso:**
 **Transporte pblico:** Consultar lneas de colectivo
 **A pie:** Desde el campus principal de Junn
 **En vehculo:** Estacionamiento disponible en la zona

 **Importante:** El comedor universitario es exclusivo del campus Junn. Los estudiantes de Pergamino no cuentan con este servicio.`,"Cundo abre el comedor universitario?":` **HORARIOS DEL COMEDOR - UNNOBA**
  
** Das de funcionamiento:**
 **Lunes a Viernes:** 8:00 a 21:00 hs
 **Sbados:** 8:00 a 14:00 hs
 **Domingos:** Cerrado

** Horarios de comidas:**
 **Desayuno/Merienda:** Durante todo el horario
 **Almuerzo:** Generalmente de 12:00 a 15:00 hs
 **Consultar horarios especficos** en la plataforma

** Informacin actualizada:**
 **Plataforma:** https://comedor.unnoba.edu.ar/
 **WhatsApp:** https://api.whatsapp.com/send?phone=5492364608019

** Importante:**
 **Solo en Junn** - No disponible en Pergamino
 **Horarios sujetos a cambios** por feriados o eventos especiales
 **Verific** siempre en la plataforma antes de ir

 **Recomendacin:** Consult los horarios especficos de cada comida en la plataforma oficial.`,"Cmo reservar el almuerzo?":` **RESERVAS EN EL COMEDOR - UNNOBA**

** Requisitos:**
 **Cuenta institucional** UNNOBA activa
 **Acceso a internet** para usar la plataforma

** Proceso de reserva:**
1. **Ingres** a: https://comedor.unnoba.edu.ar/
2. **Inici sesin** con tu cuenta institucional (@unnoba.edu.ar)
3. **Seleccion** el da que quers reservar
4. **Eleg** el men disponible
5. **Confirm** tu reserva

** Opciones disponibles:**
 **Mens del da** con diferentes opciones
 **Precios accesibles** para estudiantes
 **Opciones vegetarianas** disponibles

** Cuenta institucional:**
 **Formato:** tu.nombre@unnoba.edu.ar
 **Misma cuenta** que uss para el SIU-Guaran
 **Si no tens cuenta:** Consult con Sistemas

** Ayuda:**
 **WhatsApp:** https://api.whatsapp.com/send?phone=5492364608019

 **Importante:** Solo estudiantes con cuenta institucional pueden reservar.`,"Hasta qu hora puedo reservar el almuerzo?":` **LMITE PARA RESERVAS - UNNOBA**

** Plazo lmite:**
 **Hasta las 8:00 AM** del mismo da
 **No se permiten reservas** despus de esa hora
 **Planific** con anticipacin

** Recomendaciones:**
 **Reserv la noche anterior** para asegurar tu lugar
 **Verific disponibilidad** temprano en la maana
 **No dejes** para ltimo momento

** Qu pasa si no reservo a tiempo?**
 **No podrs** acceder al men del da
 **Debers esperar** al da siguiente
 **Posible disponibilidad** para consumo sin reserva (consultar)

** Proceso rpido:**
1. **Ingres** temprano a: https://comedor.unnoba.edu.ar/
2. **Revis** los mens disponibles
3. **Confirm** antes de las 8:00 AM

** Consejos:**
 **Configur** una alarma para recordar
 **Reserv** apenas sepas que vas a almorzar
 **Consult** el men del da siguiente

 **Objetivo:** Garantizar la organizacin y preparacin adecuada de las comidas.`,"Puedo cancelar una reserva ya hecha?":` **CANCELACIN DE RESERVAS - UNNOBA**

** S, pods cancelar siguiendo estos pasos:**

** Proceso de cancelacin:**
1. **Ingres** a: https://comedor.unnoba.edu.ar/
2. **Inici sesin** con tu cuenta institucional
3. **Hac click** en tu **Usuario**
4. **Seleccion** "Mis reservas"
5. **Busc** la reserva que quers cancelar
6. **Hac click** en "Eliminar"

** Hasta cundo puedo cancelar?**
 **Recomendable** cancelar con anticipacin
 **Verific** si hay lmites de tiempo especficos
 **Consult** en la plataforma o por WhatsApp

** Por qu cancelar?**
 **Libera** el cupo para otros estudiantes
 **Evita** desperdicios de comida
 **Mantiene** el sistema organizado

** Ayuda adicional:**
 **WhatsApp:** https://api.whatsapp.com/send?phone=5492364608019
 **Soporte tcnico:** Si tens problemas con la plataforma

** Importante:**
 **S responsable** con tus reservas
 **Cancel** si sabs que no vas a ir
 **Ayuds** a otros estudiantes que necesitan el servicio

 **Solidaridad universitaria:** Tu cancelacin a tiempo permite que otro estudiante pueda acceder al comedor.`,"Cul es el contacto del comedor?":` **CONTACTO DEL COMEDOR - UNNOBA**

** WhatsApp Oficial:**
 **Nmero:** +54 9 236 460-8019
 **Enlace directo:** https://api.whatsapp.com/send?phone=5492364608019
 **Horarios de atencin:** Consultar en WhatsApp

** Plataforma Online:**
 **Sitio web:** https://comedor.unnoba.edu.ar/
 **Reservas y consultas** disponibles 24/7
 **Informacin actualizada** de mens y precios

** Ubicacin fsica:**
 **Direccin:** Jorge Newbery 348, Junn
 **Nombre:** Taller Comedor
 **Atencin presencial** en horarios de funcionamiento

** Para qu contactar?**
 **Consultas** sobre mens y precios
 **Problemas** con reservas
 **Informacin** sobre horarios especiales
 **Sugerencias** y reclamos
 **Dudas** sobre el funcionamiento

** Importante:**
 **Solo en Junn** - No hay comedor en Pergamino
 **Respuesta ms rpida** por WhatsApp
 **Para emergencias:** Contactar durante horarios de funcionamiento

 **Recomendacin:** Guard el contacto de WhatsApp para consultas rpidas sobre el comedor.`},qC="Hola! soy el asistente virtual de la unnoba, En que puedo ayudarte?",pp={apiKey:"AIzaSyC-Zzy5zEK-8IJzHJrJU7SySQ4UI1C1DG8",model:"gemini-1.5-flash"},j3=50,es=20,U3=2e3,Ns="Toda la informacin sobre fechas la encontrars en el calendario acadmico oficial de la UNNOBA. Pods consultarlo en el siguiente enlace: <a href='https://elegi.unnoba.edu.ar/calendario-academico/' target='_blank' style='color:#005B96; font-weight:bold;'>Calendario Acadmico</a>.",ts="Para poder inscribirte a materias es necesario tener la condicin de <strong>alumno regular</strong>.<br/><br/><strong>Cundo y cmo se verifica?</strong><br/>La regularidad se verifica a fines de marzo de cada ao. Por ejemplo, la regularidad 2025 se evala considerando el perodo entre marzo de 2024 y marzo de 2025. Para mantenerla, necesits sumar al menos <strong>4 puntos</strong> en ese perodo.<br/><br/><strong>Cmo se suman puntos?</strong><br/>Pods sumar puntos de las siguientes maneras:<br/><ul><li>Cada materia cursada y aprobada: <strong>1 punto</strong>.</li><li>Cada examen final aprobado: <strong>2 puntos</strong>.</li></ul>Se pueden combinar cursadas y finales. Por ejemplo: 4 cursadas aprobadas (4 pts), o 2 cursadas (2 pts) y 1 final (2 pts), o 2 finales (4 pts).<br/><br/><strong>Qu pasa si no llego a los 4 puntos?</strong><br/>Perds la condicin de alumno regular. Sin embargo, pods seguir cursando si te <strong>reinscribs</strong> a la carrera, manteniendo todo lo que ya aprobaste.<br/><br/><strong>Cuntas veces puedo reinscribirme?</strong><br/>Pods reinscribirte hasta <strong>3 veces</strong>. Si supers ese lmite, perds todas las materias aprobadas y debs empezar la carrera desde cero.",ns="Las materias correlativas son aquellas que requieren haber aprobado otras materias previamente. No pods cursar una materia si no tens aprobada la cursada de su correlativa, y no pods rendir el final si no tens aprobado el final de su correlativa.",WC="Una revlida es una prrroga que te otorga un ao adicional para rendir el final de una materia cuya regularidad haya vencido. En algunas materias, para obtener la revlida debs rendir una evaluacin interna. Si no la solicits o no aprobs, debers recursar la materia.",XC="El comedor abre de Lunes a Viernes de 8 a 21 hs, y los Sbados de 8 a 14 hs.",KC="Tens tiempo hasta las 8 am del mismo da para reservar tu comida.",Cl="La Prctica Profesional Supervisada (PPS) es una instancia formativa que permite a los estudiantes aplicar sus conocimientos en un entorno real de trabajo, bajo la supervisin de un profesional. Es obligatoria en algunas carreras y se realiza al finalizar la carrera.",YC="Una vez aprobada la ltima materia, pods iniciar el trmite desde tu Login institucional en el servicio 'Dossier - Mesa de Entrada Virtual'. Debers adjuntar en PDF tu DNI y partida de nacimiento. Ms info en <a href='https://www.unnoba.edu.ar/tramite-de-titulo-universitario/' target='_blank' style='color:#005B96; font-weight:bold;'>la web de la UNNOBA</a>.",QC="El proceso dura aproximadamente 120 das desde que inicis el expediente, pero puede variar.",mp="La UNNOBA ofrece diferentes tipos de becas:<br/><ul><li><strong>Beca de Comedor:</strong> Para estudiantes de bajos recursos</li><li><strong>Beca de Transporte:</strong> Para estudiantes que viven lejos</li><li><strong>Beca de Materiales:</strong> Para compra de libros y materiales</li></ul>Pods consultar los requisitos y fechas de inscripcin en Bienestar Estudiantil o en la web oficial.",gp="La UNNOBA cuenta con servicios de salud gratuitos para estudiantes:<br/><ul><li><strong>Consultorio Mdico:</strong> Atencin primaria</li><li><strong>Consultorio Psicolgico:</strong> Apoyo emocional y acadmico</li><li><strong>Consultorio Odontolgico:</strong> Atencin dental bsica</li></ul>Los horarios y ubicaciones varan segn la sede. Consult en Bienestar Estudiantil.",yp="La UNNOBA ofrece diversas actividades:<br/><ul><li><strong>Deportes:</strong> Ftbol, vley, bsquet, natacin</li><li><strong>Arte y Cultura:</strong> Talleres de msica, teatro, danza</li><li><strong>Voluntariado:</strong> Programas sociales y comunitarios</li><li><strong>Clubes:</strong> Cientficos, tecnolgicos, culturales</li></ul>Consult la cartelera o acercate a la Secretara de Extensin.",vp="La UNNOBA te proporciona:<br/><ul><li><strong>WiFi gratuito:</strong> En todos los edificios</li><li><strong>Computadoras:</strong> En laboratorios y biblioteca</li><li><strong>Software acadmico:</strong> Licencias gratuitas para estudiantes</li><li><strong>Impresin:</strong> Servicio de impresin en biblioteca</li><li><strong>Almacenamiento en la nube:</strong> Google Drive institucional</li></ul>",Zy="<strong>Junn:</strong><br/>Lneas de colectivo: 501, 502, 503, 504, 505<br/>Estacin de tren: Lnea Sarmiento<br/><br/><strong>Pergamino:</strong><br/>Lneas de colectivo: 1, 2, 3, 4, 5<br/>Estacin de tren: Lnea Mitre<br/><br/>La universidad cuenta con rampas y ascensores para accesibilidad.",ev="En caso de emergencia:<br/><ul><li><strong>Seguridad:</strong> Personal disponible 24/7</li><li><strong>Emergencias mdicas:</strong> 107 (ambulancia)</li><li><strong>Bomberos:</strong> 100</li><li><strong>Polica:</strong> 101</li></ul>La universidad cuenta con botones de pnico y cmaras de seguridad.",bp="La UNNOBA ofrece servicios de orientacin:<br/><ul><li><strong>Orientacin Vocacional:</strong> Para estudiantes indecisos</li><li><strong>Orientacin Acadmica:</strong> Para mejorar el rendimiento</li><li><strong>Orientacin Laboral:</strong> Para insercin profesional</li></ul>Pods solicitar turnos en Bienestar Estudiantil.",tv="La UNNOBA tiene convenios con universidades extranjeras:<br/><ul><li><strong>PILA:</strong> Intercambio con universidades latinoamericanas</li><li><strong>ESCALA:</strong> Intercambio con universidades argentinas</li><li><strong>JIMA:</strong> Intercambio con universidades japonesas</li><li><strong>MACA:</strong> Intercambio con universidades mexicanas</li></ul>Consult en la Secretara de Relaciones Internacionales.",nv="La UNNOBA fomenta la investigacin:<br/><ul><li><strong>Becas de Investigacin:</strong> Para estudiantes avanzados</li><li><strong>Proyectos de Investigacin:</strong> Participacin en grupos de investigacin</li><li><strong>Publicaciones:</strong> Revistas cientficas estudiantiles</li><li><strong>Congresos:</strong> Participacin en eventos acadmicos</li></ul>Consult en la Secretara de Investigacin.",iv="Como graduado de la UNNOBA tens acceso a:<br/><ul><li><strong>Red de Graduados:</strong> Networking profesional</li><li><strong>Bolsa de Trabajo:</strong> Oportunidades laborales</li><li><strong>Eventos:</strong> Conferencias y encuentros</li><li><strong>Biblioteca:</strong> Acceso continuo a recursos</li><li><strong>Posgrados:</strong> Descuentos en especializaciones</li></ul>",V3={"Dnde puedo contactar a la universidad o cules son sus redes sociales?":"<strong style='color: #007bbf;'>Redes de la Universidad</strong><br />Instagram: @elegiunnoba o @unnobanoticias<br />Facebook: NoticiasUNNOBA<br />Web: www.unnoba.edu.ar<br /><br /><strong style='color:rgb(150, 0, 137);'>Centro de estudiantes</strong><br />Va Instagram:<br />Franja Morada Junn: @franjaunnobajunin<br />Franja Morada Pergamino: @franjamoradaunnoba<br /><br /><strong style='color:gray;'>Contactos institucionales</strong><br /> estudiantes@unnoba.edu.ar<br />Tambin pods acercarte a Bienestar Estudiantil en tu sede.","Cmo y cundo me inscribo a materias o finales?":"Las inscripciones a materias y finales se realizan desde el sistema <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, ingresando con tu cuenta institucional.<br /><br /> Las fechas exactas para inscripciones, cursadas y finales estn publicadas en el <a href='https://elegi.unnoba.edu.ar/calendarioacademico/' target='_blank' style='color:#005B96; font-weight:bold;'>Calendario Acadmico</a> de la UNNOBA. Te recomendamos revisarlo con frecuencia.<br /><br /> Record que algunas materias o finales requieren tener otras materias aprobadas (correlatividades). Para conocerlas, revis el plan de estudios de tu carrera en el<a href='https://unnoba.edu.ar/' target='_blank' style='color:#005B96; font-weight:bold;'> sitio oficial de la UNNOBA</a>.","Cmo funciona el comedor?":"Para utilizar el comedor universitario debs ingresar a <a href='https://comedor.unnoba.edu.ar/' target='_blank' style='color:#005B96; font-weight:bold;'>comedor.unnoba.edu.ar</a> con tu cuenta institucional y realizar la reserva.<br /><br /> Cada da se ofrecen dos mens, y al acceder con tu cuenta UNNOBA obtens un descuento especial.<br /><br /> Direccin del comedor: Jorge Newbery 348, Junn, Buenos Aires (CP 6000).","Como utilizo la plataforma virtual o campus?":"Al acceder a la plataforma virtual <a href='https://plataformaed.unnoba.edu.ar' target='_blank' style='color:#005B96; font-weight:bold;'>plataformaed.unnoba.edu.ar</a> vas a encontrar todas las materias que ests cursando actualmente o que hayas cursado previamente.<br /><br /> Para ingresar necesits tu cuenta institucional de la UNNOBA. Si no pods acceder, consult con la Direccin de Alumnos o el rea de soporte acadmico.","Necesito ser alumno regular para inscribirme a materias?":ts,"Cundo y cmo se verifica la regularidad?":ts,"Cmo se suman puntos para mantener la regularidad?":ts,"Qu pasa si no llego a los 4 puntos?":ts,"Puedo seguir cursando si pierdo la regularidad?":ts,"Cuntas veces puedo reinscribirme?":ts,"qu es la regularidad?":ts,"cmo mantengo la regularidad?":ts,"qu pasa si pierdo la regularidad?":ts,"cmo recupero la regularidad?":ts,"Cundo son las mesas de finales?":"Las mesas de exmenes finales estn programadas segn las fechas establecidas en el calendario acadmico oficial de la UNNOBA. Generalmente, se realizan durante la segunda semana de cada mes. Sin embargo, es importante tener en cuenta que en los meses de enero y octubre no se habilita la inscripcin a mesas de finales. Para conocer las fechas exactas y actualizadas, se recomienda consultar el <a href='https://elegi.unnoba.edu.ar/calendario-academico/' target='_blank' style='color:#005B96; font-weight:bold;'>calendario acadmico</a>.","Qu es un exmen final?":"Un examen final es una instancia de evaluacin que se realiza al finalizar cada materia en la UNNOBA. Aprobar esta evaluacin es un requisito para dar por aprobada la materia. La calificacin obtenida en el examen final se utiliza para calcular el promedio general del estudiante y su porcentaje de avance en la carrera.<br/><br/>Para obtener el ttulo, es necesario tener aprobados los exmenes finales de todas las materias incluidas en el plan de estudios.","Cmo me inscribo a un examen?":"La inscripcin a un examen final se realiza a travs del sistema <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo habilitado segn el calendario acadmico. Pods inscribirte desde la fecha de apertura indicada hasta 48 horas hbiles antes del examen, sin contar sbados, domingos ni feriados.<br/><br/><strong>Por ejemplo:</strong><br/><ul><li>Si tu examen es el viernes a las 8:00 hs, tens tiempo para inscribirte hasta el mircoles a las 8:00 hs.</li><li>Si el examen es el martes a las 14:00 hs, debers inscribirte hasta el viernes anterior a las 14:00 hs.</li></ul><br/>Es muy importante que te inscribas en tiempo y forma. Si no ests inscripto no podrs rendir el examen.","Qu pasa si falto a un final?":"Si te inscribiste a un examen final y no te presentas, el docente registrar tu inasistencia en el sistema. Como consecuencia, no podrs inscribirte a la prxima mesa del mismo examen, ya que el sistema aplica una sancin automtica.<br/><br/>Por eso, si sabs que no vas a poder asistir, es importante que canceles tu inscripcin antes del cierre del perodo habilitado en SIU-Guaran para evitar sanciones.","Hasta cundo tengo tiempo de darme de baja a un final?":"Pods darte de baja de un examen final hasta 48 horas hbiles antes de la fecha del examen. Esto significa que no se cuentan sbados, domingos ni feriados. Record hacerlo desde el sistema SIU-Guaran dentro del perodo habilitado.","Qu pasa si no apruebo un examen final?":"Si no aprobs un final, la nota se registra en el SIU-Guaran. Tens hasta 5 oportunidades y 3 aos para aprobar el final de una materia desde que aprobaste la regularidad.","Cuntas veces puedo rendir un examen final?":"Pods rendir un final hasta 5 veces. Si desaprobs en el quinto intento, debers recursar la materia para recuperar la condicin de regular y volver a rendir.","Puedo rendir un final libre?":"Depende de la materia, pero en general, la mayora no permite rendir en condicin de 'libre'. Deberas consultarlo con el profesor titular (Jefe de Ctedra) de la materia.","qu es un final?":"Un examen final es una instancia de evaluacin que se realiza al finalizar cada materia en la UNNOBA. Aprobar esta evaluacin es un requisito para dar por aprobada la materia. La calificacin obtenida en el examen final se utiliza para calcular el promedio general del estudiante y su porcentaje de avance en la carrera.<br/><br/>Para obtener el ttulo, es necesario tener aprobados los exmenes finales de todas las materias incluidas en el plan de estudios.","cmo es un final?":"Un examen final es una instancia de evaluacin que se realiza al finalizar cada materia en la UNNOBA. Aprobar esta evaluacin es un requisito para dar por aprobada la materia. La calificacin obtenida en el examen final se utiliza para calcular el promedio general del estudiante y su porcentaje de avance en la carrera.<br/><br/>Para obtener el ttulo, es necesario tener aprobados los exmenes finales de todas las materias incluidas en el plan de estudios.","cmo se rinde un final?":"La inscripcin a un examen final se realiza a travs del sistema <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo habilitado segn el calendario acadmico. Pods inscribirte desde la fecha de apertura indicada hasta 48 horas hbiles antes del examen, sin contar sbados, domingos ni feriados.<br/><br/><strong>Por ejemplo:</strong><br/><ul><li>Si tu examen es el viernes a las 8:00 hs, tens tiempo para inscribirte hasta el mircoles a las 8:00 hs.</li><li>Si el examen es el martes a las 14:00 hs, debers inscribirte hasta el viernes anterior a las 14:00 hs.</li></ul><br/>Es muy importante que te inscribas en tiempo y forma. Si no ests inscripto no podrs rendir el examen.","cmo me anoto a un final?":"La inscripcin a un examen final se realiza a travs del sistema <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo habilitado segn el calendario acadmico. Pods inscribirte desde la fecha de apertura indicada hasta 48 horas hbiles antes del examen, sin contar sbados, domingos ni feriados.<br/><br/><strong>Por ejemplo:</strong><br/><ul><li>Si tu examen es el viernes a las 8:00 hs, tens tiempo para inscribirte hasta el mircoles a las 8:00 hs.</li><li>Si el examen es el martes a las 14:00 hs, debers inscribirte hasta el viernes anterior a las 14:00 hs.</li></ul><br/>Es muy importante que te inscribas en tiempo y forma. Si no ests inscripto no podrs rendir el examen.","qu pasa si no apruebo el final?":"Si no aprobs un final, la nota se registra en el SIU-Guaran. Tens hasta 5 oportunidades y 3 aos para aprobar el final de una materia desde que aprobaste la regularidad.","qu pasa si falto al final?":"Si te inscribiste a un examen final y no te presentas, el docente registrar tu inasistencia en el sistema. Como consecuencia, no podrs inscribirte a la prxima mesa del mismo examen, ya que el sistema aplica una sancin automtica.<br/><br/>Por eso, si sabs que no vas a poder asistir, es importante que canceles tu inscripcin antes del cierre del perodo habilitado en SIU-Guaran para evitar sanciones.","cuntas veces puedo rendir un final?":"Pods rendir un final hasta 5 veces. Si desaprobs en el quinto intento, debers recursar la materia para recuperar la condicin de regular y volver a rendir.","puedo rendir libre?":"Depende de la materia, pero en general, la mayora no permite rendir en condicin de 'libre'. Deberas consultarlo con el profesor titular (Jefe de Ctedra) de la materia.","Qu son las materias correlativas?":ns,"Qu es una correlativa?":ns,"Dnde reviso las correlativas?":"Pods consultar las correlativas en el plan de estudios de tu carrera o en <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, entrando a: <strong>Reportes  Plan de Estudios</strong>.","Qu son las revlidas?":WC,"que es una revalida":WC,"Cmo solicito una revlida?":"La inscripcin a una revlida se realiza igual que la de un examen final regular, a travs de <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, durante el perodo habilitado.","para qu sirven las correlativas?":ns,"por qu existen las correlativas?":ns,"cmo funcionan las correlativas?":ns,"qu materias son correlativas?":ns,"qu pasa si no tengo la correlativa?":"No pods cursar ni rendir la materia si no tens aprobada la correlativa correspondiente.","puedo cursar sin tener la correlativa?":"No, debs tener aprobada la correlativa para poder cursar o rendir la materia.","qu materias necesito aprobar antes?":ns,"qu materias tengo que aprobar antes de cursar otra?":ns,"qu materias son previas?":ns,"qu materias me habilitan a cursar otras?":ns,"Cmo me inscribo a las materias?":"La inscripcin a las materias se realiza desde <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo establecido en el calendario acadmico.","cmo me anoto a materias?":"La inscripcin a las materias se realiza desde <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo establecido en el calendario acadmico.","cmo inscribirse a materias?":"La inscripcin a las materias se realiza desde <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo establecido en el calendario acadmico.","cmo inscribirse a finales?":"La inscripcin a un examen final se realiza a travs del sistema <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo habilitado segn el calendario acadmico. Pods inscribirte desde la fecha de apertura indicada hasta 48 horas hbiles antes del examen, sin contar sbados, domingos ni feriados.<br/><br/><strong>Por ejemplo:</strong><br/><ul><li>Si tu examen es el viernes a las 8:00 hs, tens tiempo para inscribirte hasta el mircoles a las 8:00 hs.</li><li>Si el examen es el martes a las 14:00 hs, debers inscribirte hasta el viernes anterior a las 14:00 hs.</li></ul><br/>Es muy importante que te inscribas en tiempo y forma. Si no ests inscripto no podrs rendir el examen.","cmo me anoto a un examen?":"La inscripcin a un examen final se realiza a travs del sistema <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo habilitado segn el calendario acadmico. Pods inscribirte desde la fecha de apertura indicada hasta 48 horas hbiles antes del examen, sin contar sbados, domingos ni feriados.<br/><br/><strong>Por ejemplo:</strong><br/><ul><li>Si tu examen es el viernes a las 8:00 hs, tens tiempo para inscribirte hasta el mircoles a las 8:00 hs.</li><li>Si el examen es el martes a las 14:00 hs, debers inscribirte hasta el viernes anterior a las 14:00 hs.</li></ul><br/>Es muy importante que te inscribas en tiempo y forma. Si no ests inscripto no podrs rendir el examen.","cmo me inscribo a cursadas?":"La inscripcin a las materias se realiza desde <a href='https://g3w3.unnoba.edu.ar/g3w3/' target='_blank' style='color:#005B96; font-weight:bold;'>SIU-Guaran</a>, dentro del perodo establecido en el calendario acadmico.","Cundo abren las inscripciones a cursadas?":Ns,"Hasta qu da tengo para inscribirme a las materias?":Ns,"Dnde veo mi calendario acadmico?":Ns,"Qu feriados hay este ao?":Ns,"Cundo empieza el primer cuatrimestre?":Ns,"Cundo empieza el segundo cuatrimestre?":Ns,"Cundo terminan las clases del primer cuatrimestre?":Ns,"Cundo terminan las clases del segundo cuatrimestre?":Ns,"Cundo son las vacaciones de invierno?":Ns,"Dnde est la biblioteca?":"<strong>Junn:</strong> Jorge Newbery 375.<br/><strong>Pergamino:</strong> Edificio del Rectorado, en Monteagudo 2772.","Qu horario tiene la biblioteca?":"La biblioteca abre de lunes a viernes, de 08:00 a 19:00 horas. Durante recesos, los horarios pueden cambiar.","Cmo accedo a la biblioteca digital?":"Pods ingresar desde el sitio oficial de la UNNOBA. Si necesits ayuda, el personal de la biblioteca puede asistirte.","Cmo hago para pedir un libro prestado?":"Debs acercarte a alguna de las sedes de la biblioteca para que te registren en el sistema. A partir de ah, podrs solicitar libros.","Cunto tiempo puedo tener un libro en prstamo?":"El prstamo habitual es por dos semanas, pero puede variar. Confirmalo con el bibliotecario.","Puedo renovar el prstamo de un libro?":"S, siempre y cuando el libro no tenga una alta demanda o est reservado. La renovacin se gestiona en la biblioteca.","cmo funciona la biblioteca?":"<strong>Junn:</strong> Jorge Newbery 375.<br/><strong>Pergamino:</strong> Edificio del Rectorado, en Monteagudo 2772.","cmo pido un libro?":"Debs acercarte a alguna de las sedes de la biblioteca para que te registren en el sistema. A partir de ah, podrs solicitar libros.","cmo renuevo un libro?":"S, siempre y cuando el libro no tenga una alta demanda o est reservado. La renovacin se gestiona en la biblioteca.","cunto tiempo tengo un libro?":"El prstamo habitual es por dos semanas, pero puede variar. Confirmalo con el bibliotecario.","Dnde se cursa cada materia?":"Para consultar la distribucin de aulas de la UNNOBA, escrib 'Dnde se cursa [nombre de la materia]?' o 'En qu edificio se cursa [materia]?' y te proporcionar la informacin especfica. Tambin pods preguntar por 'edificios' para ver las ubicaciones. Para consultar una fecha especfica, escrib 'Dnde se cursa [materia] el lunes 23?' o 'Dnde se cursa [materia] el 23 de junio?'","Cules son los edificios de la UNNOBA?":"Para ver informacin detallada sobre los edificios y sus ubicaciones, escrib 'edificios' o 'ubicacin de edificios' y te mostrar las direcciones con enlaces a Google Maps.","Dnde estn los edificios de la UNNOBA?":"Para ver informacin detallada sobre los edificios y sus ubicaciones, escrib 'edificios' o 'ubicacin de edificios' y te mostrar las direcciones con enlaces a Google Maps.","Cul es la ubicacin de los edificios?":"Para ver informacin detallada sobre los edificios y sus ubicaciones, escrib 'edificios' o 'ubicacin de edificios' y te mostrar las direcciones con enlaces a Google Maps.","dnde estn los edificios?":"Para ver informacin detallada sobre los edificios y sus ubicaciones, escrib 'edificios' o 'ubicacin de edificios' y te mostrar las direcciones con enlaces a Google Maps.","dnde queda cada edificio?":"Para ver informacin detallada sobre los edificios y sus ubicaciones, escrib 'edificios' o 'ubicacin de edificios' y te mostrar las direcciones con enlaces a Google Maps.","Dnde queda el comedor?":"El comedor universitario est en el Taller Comedor, ubicado en Jorge Newbery 348, Junn.","Cundo abre el comedor universitario?":XC,"que horario tiene el comedor?":XC,"Cmo reservar el almuerzo?":"Pods reservar con tu cuenta institucional en la plataforma online del comedor: <a href='https://comedor.unnoba.edu.ar/' target='_blank' style='color:#005B96; font-weight:bold;'>comedor.unnoba.edu.ar</a>.","Hasta qu hora puedo reservar el almuerzo?":KC,"hasta que hora es la reserva de almuerzo?":KC,"Puedo cancelar una reserva ya hecha?":"S, desde la seccin 'Mis reservas' en la plataforma del comedor, pods eliminarla.","cmo funciona el comedor universitario?":"Para utilizar el comedor universitario debs ingresar a <a href='https://comedor.unnoba.edu.ar/' target='_blank' style='color:#005B96; font-weight:bold;'>comedor.unnoba.edu.ar</a> con tu cuenta institucional y realizar la reserva.<br /><br /> Cada da se ofrecen dos mens, y al acceder con tu cuenta UNNOBA obtens un descuento especial.<br /><br /> Direccin del comedor: Jorge Newbery 348, Junn, Buenos Aires (CP 6000).","cmo reservo el almuerzo?":"Pods reservar con tu cuenta institucional en la plataforma online del comedor: <a href='https://comedor.unnoba.edu.ar/' target='_blank' style='color:#005B96; font-weight:bold;'>comedor.unnoba.edu.ar</a>.","puedo cancelar la reserva del comedor?":"S, desde la seccin 'Mis reservas' en la plataforma del comedor, pods eliminarla.","Cules son las redes sociales oficiales de la UNNOBA?":"<strong>Instagram:</strong> @unnobanoticias<br/><strong>Facebook:</strong> UNNOBA<br/><strong>Instagram Secretara Acadmica:</strong> @academicaunnoba","Cul es el contacto del Departamento de Alumnos?":"<strong>Sede Junn:</strong><br/>Direccin: Newbery e/ Rivadavia y Senz Pea<br/>Telfono: (0236) 4407750 int. 11211<br/>Correo: alumnosjunin@unnoba.edu.ar<br/><br/><strong>Sede Pergamino:</strong><br/>Direccin: Monteagudo 2772<br/>Telfono: (02477) 409500 int. 21211<br/>Correo: alumnospergamino@unnoba.edu.ar","Qu trmites debo hacer al ingresar?":"Al ingresar debs presentar la documentacin requerida (ttulo secundario), completar tus datos en SIU-Guaran y recibir tu usuario institucional. Para ms detalles, consult la Gua de Trmites en la web oficial.","Dnde se piden certificados de alumno regular?":"Pods solicitarlos presencialmente en la Oficina de Alumnos o por correo electrnico desde tu cuenta institucional a alumnosjunin@unnoba.edu.ar o alumnospergamino@unnoba.edu.ar.","cmo pido un certificado de alumno regular?":"Pods solicitarlos presencialmente en la Oficina de Alumnos o por correo electrnico desde tu cuenta institucional a alumnosjunin@unnoba.edu.ar o alumnospergamino@unnoba.edu.ar.","cmo tramito el ttulo?":"Una vez aprobada la ltima materia, pods iniciar el trmite desde tu Login institucional en el servicio 'Dossier - Mesa de Entrada Virtual'. Debers adjuntar en PDF tu DNI y partida de nacimiento. Ms info en <a href='https://www.unnoba.edu.ar/tramite-de-titulo-universitario/' target='_blank' style='color:#005B96; font-weight:bold;'>la web de la UNNOBA</a>.","cunto tarda el ttulo?":"El proceso dura aproximadamente 120 das desde que inicis el expediente, pero puede variar.","Qu es el Centro de Estudiantes?":"Es un organismo formado por estudiantes que representa y defiende los derechos e intereses del alumnado. Organiza actividades y funciona como un espacio de participacin.","Qu es el programa de intercambio estudiantil?":"La UNNOBA ofrece programas para cursar un semestre en universidades extranjeras, garantizando el reconocimiento acadmico. Algunos programas son PILA, ESCALA, JIMA, MACA y PAME-UDUAL.","Qu es la Prctica Profesional Supervisada?":Cl,"Qu significa la PPS dentro de una carrera universitaria?":Cl,"Qu representa la PPS en la formacin acadmica?":Cl,"qu es la pps?":Cl,"qu significa pps?":Cl,"para qu sirve la pps?":Cl,"Qu es la tesis de grado?":"La tesis de grado es un trabajo acadmico que permite al estudiante integrar y aplicar los conocimientos de su carrera, bajo la supervisin de un director. Su obligatoriedad depende de cada plan de estudios.","Cul es el significado de la tesis dentro de una carrera universitaria?":"La tesis de grado es un trabajo acadmico que permite al estudiante integrar y aplicar los conocimientos adquiridos durante la carrera. Es un requisito para obtener el ttulo universitario en algunas carreras, y su elaboracin se realiza bajo la supervisin de un director de tesis.","Qu representa la tesis de grado en la formacin acadmica?":"La tesis de grado representa la instancia final donde el estudiante integra y aplica los conocimientos adquiridos durante la carrera mediante un trabajo acadmico supervisado.","qu es la tesis?":"La tesis de grado es un trabajo acadmico que permite al estudiante integrar y aplicar los conocimientos de su carrera, bajo la supervisin de un director. Su obligatoriedad depende de cada plan de estudios.","para qu sirve la tesis?":"La tesis de grado es un trabajo acadmico que permite al estudiante integrar y aplicar los conocimientos de su carrera, bajo la supervisin de un director. Su obligatoriedad depende de cada plan de estudios.","Qu se necesita para empezar a tramitar el ttulo universitario?":YC,"Cules son los requisitos para iniciar el trmite del ttulo universitario?":YC,"Cunto demora obtener el ttulo?":QC,"Cul es el tiempo promedio para recibir el ttulo universitario?":"El proceso dura aproximadamente 120 das desde que inicis el expediente, pero puede variar.","Cunto tarda el trmite para la entrega del ttulo?":QC,"Qu becas ofrece la UNNOBA?":mp,"Cmo solicito una beca?":mp,"Cundo abren las inscripciones a becas?":mp,"Qu requisitos necesito para una beca?":mp,"Hay servicios de salud en la universidad?":gp,"Puedo atenderme en la UNNOBA?":gp,"Hay psiclogo en la universidad?":gp,"Ofrecen atencin mdica?":gp,"Qu actividades extracurriculares hay?":yp,"Hay deportes en la universidad?":yp,"Puedo hacer voluntariado?":yp,"Hay talleres culturales?":yp,"Hay WiFi en la universidad?":vp,"Puedo usar computadoras?":vp,"Hay impresoras disponibles?":vp,"Qu software puedo usar?":vp,"Cmo llego a la universidad?":Zy,"Qu colectivos van a la UNNOBA?":Zy,"Hay estacionamiento?":"S, hay estacionamiento gratuito en ambas sedes. En Junn est en Newbery 348 y en Pergamino en Monteagudo 2772.","La universidad es accesible?":Zy,"Qu hago en caso de emergencia?":ev,"Hay seguridad en la universidad?":ev,"Dnde llamo si me siento mal?":ev,"Puedo cambiar de carrera?":bp,"Qu hago si no me gusta mi carrera?":bp,"Hay orientacin vocacional?":bp,"Me pueden ayudar a elegir carrera?":bp,"Puedo estudiar en el extranjero?":tv,"Hay intercambios internacionales?":tv,"Qu programas de intercambio hay?":tv,"Puedo hacer investigacin?":nv,"Hay becas de investigacin?":nv,"Puedo publicar trabajos?":nv,"Qu beneficios tengo como graduado?":iv,"Hay red de graduados?":iv,"Puedo seguir usando la biblioteca?":iv},JC=n=>n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[?!.,;]/g,""),z3=(n,e)=>{const t=new Set(JC(n).split(/\s+/)),i=new Set(JC(e).split(/\s+/)),s=new Set([...t].filter(a=>i.has(a))),r=new Set([...t,...i]);return r.size===0?0:s.size/r.size},$3=(n,e)=>{let t=null,i=0;for(const r in e){const a=z3(n,r);a>i&&(i=a,t={question:r,response:e[r]})}return i>=.75?t:null};var xd={};xd.d=(n,e)=>{for(var t in e)xd.o(e,t)&&!xd.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};xd.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var ee=globalThis.pdfjsLib={};xd.d(ee,{AbortException:()=>Ta,AnnotationEditorLayer:()=>Bb,AnnotationEditorParamsType:()=>me,AnnotationEditorType:()=>se,AnnotationEditorUIManager:()=>gl,AnnotationLayer:()=>BU,AnnotationMode:()=>Dr,ColorPicker:()=>ng,DOMSVGFactory:()=>MA,DrawLayer:()=>Vb,FeatureTest:()=>pn,GlobalWorkerOptions:()=>ur,ImageKind:()=>Hp,InvalidPDFException:()=>N0,MissingPDFException:()=>eh,OPS:()=>Ii,OutputScale:()=>k0,PDFDataRangeTransport:()=>qR,PDFDateString:()=>PA,PDFWorker:()=>sc,PasswordResponses:()=>W3,PermissionFlag:()=>q3,PixelsPerInch:()=>_a,RenderingCancelledException:()=>TA,TextLayer:()=>th,TouchManager:()=>eg,UnexpectedResponseException:()=>Qm,Util:()=>K,VerbosityLevel:()=>Zg,XfaLayer:()=>XR,build:()=>vU,createValidAbsoluteUrl:()=>Q3,fetchData:()=>iy,getDocument:()=>cU,getFilenameFromUrl:()=>aj,getPdfFilenameFromUrl:()=>oj,getXfaPageViewport:()=>lj,isDataScheme:()=>sy,isPdfFile:()=>_A,noContextMenu:()=>Ki,normalizeUnicode:()=>ij,setLayerDimensions:()=>ml,shadow:()=>ce,stopEvent:()=>Qn,version:()=>yU});const tn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),GP=[1,0,0,1,0,0],I0=[.001,0,0,.001,0,0],H3=1e7,sv=1.35,Xn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Dr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},G3="pdfjs_internal_editor_",se={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},me={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},q3={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Gt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Hp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},mt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},ju={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Zg={ERRORS:0,WARNINGS:1,INFOS:5},Ii={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},W3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ey=Zg.WARNINGS;function X3(n){Number.isInteger(n)&&(ey=n)}function K3(){return ey}function ty(n){ey>=Zg.INFOS&&console.log(`Info: ${n}`)}function re(n){ey>=Zg.WARNINGS&&console.log(`Warning: ${n}`)}function Ie(n){throw new Error(n)}function ht(n,e){n||Ie(e)}function Y3(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Q3(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=nj(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(Y3(i))return i}catch{}return null}function ce(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const ka=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class ZC extends ka{constructor(e,t){super(e,"PasswordException"),this.code=t}}class rv extends ka{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class N0 extends ka{constructor(e){super(e,"InvalidPDFException")}}class eh extends ka{constructor(e){super(e,"MissingPDFException")}}class Qm extends ka{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class J3 extends ka{constructor(e){super(e,"FormatError")}}class Ta extends ka{constructor(e){super(e,"AbortException")}}function qP(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ie("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),a=n.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function ny(n){typeof n!="string"&&Ie("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function Z3(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function CA(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function ej(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function tj(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return ce(this,"isLittleEndian",ej())}static get isEvalSupported(){return ce(this,"isEvalSupported",tj())}static get isOffscreenCanvasSupported(){return ce(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ce(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ce(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ce(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ce(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const av=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var pr,Gp,M0;class K{static makeHexColor(e,t,i){return`#${av[e]}${av[t]}${av[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,r]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],r[0],a[0]),Math.min(i[1],s[1],r[1],a[1]),Math.max(i[0],s[0],r[0],a[0]),Math.max(i[1],s[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-r*s))/2,u=o+l||1,d=o-l||1;return[Math.sqrt(u),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,s,a]}static bezierBoundingBox(e,t,i,s,r,a,o,l,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],E(this,pr,M0).call(this,e,i,r,o,t,s,a,l,3*(-e+3*(i-r)+o),6*(e-2*i+r),3*(i-e),u),E(this,pr,M0).call(this,e,i,r,o,t,s,a,l,3*(-t+3*(s-a)+l),6*(t-2*s+a),3*(s-t),u),u}}pr=new WeakSet,Gp=function(e,t,i,s,r,a,o,l,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,m=h*(h*(h*e+3*u*t)+3*f*i)+p*s,y=h*(h*(h*r+3*u*a)+3*f*o)+p*l;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],y),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],y)},M0=function(e,t,i,s,r,a,o,l,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&E(this,pr,Gp).call(this,e,t,i,s,r,a,o,l,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const m=Math.sqrt(p),y=2*u;E(this,pr,Gp).call(this,e,t,i,s,r,a,o,l,(-d+m)/y,f),E(this,pr,Gp).call(this,e,t,i,s,r,a,o,l,(-d-m)/y,f)},S(K,pr);function nj(n){return decodeURIComponent(escape(n))}let ov=null,e1=null;function ij(n){return ov||(ov=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,e1=new Map([["","t"]])),n.replaceAll(ov,(e,t,i)=>t?t.normalize("NFKC"):e1.get(i))}function sj(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),qP(n)}const xA="pdfjs_internal_id_";function rj(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(qP(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const Ms="http://www.w3.org/2000/svg",za=class za{};Q(za,"CSS",96),Q(za,"PDF",72),Q(za,"PDF_TO_CSS_UNITS",za.CSS/za.PDF);let _a=za;async function iy(n,e="text"){if(Xu(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Vf{constructor({viewBox:e,userUnit:t,scale:i,rotation:s,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=a,i*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let m,y,A,g;d===0?(m=Math.abs(u-e[1])*i+r,y=Math.abs(l-e[0])*i+a,A=(e[3]-e[1])*i,g=(e[2]-e[0])*i):(m=Math.abs(l-e[0])*i+r,y=Math.abs(u-e[1])*i+a,A=(e[2]-e[0])*i,g=(e[3]-e[1])*i),this.transform=[d*i,h*i,f*i,p*i,m-d*i*l-f*i*u,y-h*i*l-p*i*u],this.width=A,this.height=g}get rawDims(){const{userUnit:e,viewBox:t}=this,i=t.map(s=>s*e);return ce(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Vf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return K.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=K.applyTransform([e[0],e[1]],this.transform),i=K.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return K.applyInverseTransform([e,t],this.transform)}}class TA extends ka{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function sy(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function _A(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function aj(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function oj(n,e="document.pdf"){if(typeof n!="string")return e;if(sy(n))return re('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class t1{constructor(){Q(this,"started",Object.create(null));Q(this,"times",[])}time(e){e in this.started&&re(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||re(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Xu(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Ki(n){n.preventDefault()}function Qn(n){n.preventDefault(),n.stopPropagation()}var ih;class PA{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,ih)||v(this,ih,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,ih).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(a+=d,o+=h):u==="+"&&(a-=d,o-=h),new Date(Date.UTC(i,s,r,a,o,l))}}ih=new WeakMap,S(PA,ih);function lj(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new Vf({viewBox:r,userUnit:1,scale:e,rotation:t})}function RA(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(re(`Not a valid color format: "${n}"`),[0,0,0])}function cj(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,RA(i))}e.remove()}function ze(n){const{a:e,b:t,c:i,d:s,e:r,f:a}=n.getTransform();return[e,t,i,s,r,a]}function is(n){const{a:e,b:t,c:i,d:s,e:r,f:a}=n.getTransform().invertSelf();return[e,t,i,s,r,a]}function ml(n,e,t=!1,i=!0){if(e instanceof Vf){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:a}=n,o=pn.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,d=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=d,a.height=h):(a.width=h,a.height=d)}i&&n.setAttribute("data-main-rotation",e.rotation)}class k0{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Lr,Ya,Ni,Qa,sh,rh,og,WP,mn,XP,KP,qp,YP,L0;const Os=class Os{constructor(e){S(this,mn);S(this,Lr,null);S(this,Ya,null);S(this,Ni);S(this,Qa,null);S(this,sh,null);v(this,Ni,e),c(Os,rh)||v(Os,rh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=v(this,Lr,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Ni)._uiManager._signal;e.addEventListener("contextmenu",Ki,{signal:t}),e.addEventListener("pointerdown",E(Os,og,WP),{signal:t});const i=v(this,Qa,document.createElement("div"));i.className="buttons",e.append(i);const s=c(this,Ni).toolbarPosition;if(s){const{style:r}=e,a=c(this,Ni)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,mn,YP).call(this),e}get div(){return c(this,Lr)}hide(){var e;c(this,Lr).classList.add("hidden"),(e=c(this,Ya))==null||e.hideDropdown()}show(){var e;c(this,Lr).classList.remove("hidden"),(e=c(this,sh))==null||e.shown()}async addAltText(e){const t=await e.render();E(this,mn,qp).call(this,t),c(this,Qa).prepend(t,c(this,mn,L0)),v(this,sh,e)}addColorPicker(e){v(this,Ya,e);const t=e.renderButton();E(this,mn,qp).call(this,t),c(this,Qa).prepend(t,c(this,mn,L0))}remove(){var e;c(this,Lr).remove(),(e=c(this,Ya))==null||e.destroy(),v(this,Ya,null)}};Lr=new WeakMap,Ya=new WeakMap,Ni=new WeakMap,Qa=new WeakMap,sh=new WeakMap,rh=new WeakMap,og=new WeakSet,WP=function(e){e.stopPropagation()},mn=new WeakSet,XP=function(e){c(this,Ni)._focusEventsAllowed=!1,Qn(e)},KP=function(e){c(this,Ni)._focusEventsAllowed=!0,Qn(e)},qp=function(e){const t=c(this,Ni)._uiManager._signal;e.addEventListener("focusin",E(this,mn,XP).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,mn,KP).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ki,{signal:t})},YP=function(){const{editorType:e,_uiManager:t}=c(this,Ni),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",c(Os,rh)[e]),E(this,mn,qp).call(this,i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),c(this,Qa).append(i)},L0=function(){const e=document.createElement("div");return e.className="divider",e},S(Os,og),S(Os,rh,null);let D0=Os;var ah,Ja,Za,Pa,QP,JP,ZP;class uj{constructor(e){S(this,Pa);S(this,ah,null);S(this,Ja,null);S(this,Za);v(this,Za,e)}show(e,t,i){const[s,r]=E(this,Pa,JP).call(this,t,i),{style:a}=c(this,Ja)||v(this,Ja,E(this,Pa,QP).call(this));e.append(c(this,Ja)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Ja).remove()}}ah=new WeakMap,Ja=new WeakMap,Za=new WeakMap,Pa=new WeakSet,QP=function(){const e=v(this,Ja,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ki,{signal:c(this,Za)._signal});const t=v(this,ah,document.createElement("div"));return t.className="buttons",e.append(t),E(this,Pa,ZP).call(this),e},JP=function(e,t){let i=0,s=0;for(const r of e){const a=r.y+r.height;if(a<i)continue;const o=r.x+(t?r.width:0);if(a>i){s=o,i=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,i]},ZP=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=c(this,Za)._signal;e.addEventListener("contextmenu",Ki,{signal:i}),e.addEventListener("click",()=>{c(this,Za).highlightSelection("floating_button")},{signal:i}),c(this,ah).append(e)};function Jm(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}var lg;class dj{constructor(){S(this,lg,0)}get id(){return`${G3}${rn(this,lg)._++}`}}lg=new WeakMap;var rc,oh,Xt,ac,Wp;const DA=class DA{constructor(){S(this,ac);S(this,rc,sj());S(this,oh,0);S(this,Xt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ce(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return E(this,ac,Wp).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return E(this,ac,Wp).call(this,e,e)}async getFromBlob(e,t){const i=await t;return E(this,ac,Wp).call(this,e,i)}async getFromId(e){c(this,Xt)||v(this,Xt,new Map);const t=c(this,Xt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Xt)||v(this,Xt,new Map);let i=c(this,Xt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${c(this,rc)}_${rn(this,oh)._++}`,refCounter:1,isSvg:!1},c(this,Xt).set(e,i),c(this,Xt).set(i.id,i),i}getSvgUrl(e){const t=c(this,Xt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;c(this,Xt)||v(this,Xt,new Map);const t=c(this,Xt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,rc)}_`)}};rc=new WeakMap,oh=new WeakMap,Xt=new WeakMap,ac=new WeakSet,Wp=async function(e,t){c(this,Xt)||v(this,Xt,new Map);let i=c(this,Xt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${c(this,rc)}_${rn(this,oh)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await iy(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=DA._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,d)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const h=i.svgUrl=a.result;o.src=await r?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=d});a.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){re(s),i=null}return c(this,Xt).set(e,i),i&&c(this,Xt).set(i.id,i),i};let O0=DA;var it,Or,lh,qe;class hj{constructor(e=128){S(this,it,[]);S(this,Or,!1);S(this,lh);S(this,qe,-1);v(this,lh,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),c(this,Or))return;const l={cmd:e,undo:t,post:i,type:r};if(c(this,qe)===-1){c(this,it).length>0&&(c(this,it).length=0),v(this,qe,0),c(this,it).push(l);return}if(a&&c(this,it)[c(this,qe)].type===r){o&&(l.undo=c(this,it)[c(this,qe)].undo),c(this,it)[c(this,qe)]=l;return}const u=c(this,qe)+1;u===c(this,lh)?c(this,it).splice(0,1):(v(this,qe,u),u<c(this,it).length&&c(this,it).splice(u)),c(this,it).push(l)}undo(){if(c(this,qe)===-1)return;v(this,Or,!0);const{undo:e,post:t}=c(this,it)[c(this,qe)];e(),t==null||t(),v(this,Or,!1),v(this,qe,c(this,qe)-1)}redo(){if(c(this,qe)<c(this,it).length-1){v(this,qe,c(this,qe)+1),v(this,Or,!0);const{cmd:e,post:t}=c(this,it)[c(this,qe)];e(),t==null||t(),v(this,Or,!1)}}hasSomethingToUndo(){return c(this,qe)!==-1}hasSomethingToRedo(){return c(this,qe)<c(this,it).length-1}cleanType(e){if(c(this,qe)!==-1){for(let t=c(this,qe);t>=0;t--)if(c(this,it)[t].type!==e){c(this,it).splice(t+1,c(this,qe)-t),v(this,qe,t);return}c(this,it).length=0,v(this,qe,-1)}}destroy(){v(this,it,null)}}it=new WeakMap,Or=new WeakMap,lh=new WeakMap,qe=new WeakMap;var cg,eR;class zf{constructor(e){S(this,cg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[i,s,r={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(E(this,cg,eR).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(s.bind(e,...a,t)(),r||Qn(t))}}cg=new WeakSet,eR=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const ug=class ug{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return cj(e),ce(this,"_colors",e)}convert(e){const t=RA(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,a)=>r===t[a]))return ug._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?K.makeHexColor(...t):e}};Q(ug,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let F0=ug;var oc,On,yt,Nt,lc,js,cc,oi,Fr,eo,uc,to,os,Mi,no,ch,uh,dc,dh,ls,Br,hc,jr,cs,dg,Ur,hh,Vr,io,fh,ph,St,Ce,Us,so,mh,gh,zr,us,Vs,yh,li,j,Xp,B0,tR,nR,Kp,iR,sR,rR,j0,aR,U0,V0,oR,an,ks,lR,cR,z0,uR,Ku,$0;const Kl=class Kl{constructor(e,t,i,s,r,a,o,l,u,d,h,f,p){S(this,j);S(this,oc,new AbortController);S(this,On,null);S(this,yt,new Map);S(this,Nt,new Map);S(this,lc,null);S(this,js,null);S(this,cc,null);S(this,oi,new hj);S(this,Fr,null);S(this,eo,null);S(this,uc,0);S(this,to,new Set);S(this,os,null);S(this,Mi,null);S(this,no,new Set);Q(this,"_editorUndoBar",null);S(this,ch,!1);S(this,uh,!1);S(this,dc,!1);S(this,dh,null);S(this,ls,null);S(this,Br,null);S(this,hc,null);S(this,jr,!1);S(this,cs,null);S(this,dg,new dj);S(this,Ur,!1);S(this,hh,!1);S(this,Vr,null);S(this,io,null);S(this,fh,null);S(this,ph,null);S(this,St,se.NONE);S(this,Ce,new Set);S(this,Us,null);S(this,so,null);S(this,mh,null);S(this,gh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,zr,[0,0]);S(this,us,null);S(this,Vs,null);S(this,yh,null);S(this,li,null);const m=this._signal=c(this,oc).signal;v(this,Vs,e),v(this,yh,t),v(this,lc,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:m}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),s._on("setpreference",this.onSetPreference.bind(this),{signal:m}),s._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:m}),E(this,j,iR).call(this),E(this,j,oR).call(this),E(this,j,j0).call(this),v(this,js,r.annotationStorage),v(this,dh,r.filterFactory),v(this,so,a),v(this,hc,o||null),v(this,ch,l),v(this,uh,u),v(this,dc,d),v(this,ph,h||null),this.viewParameters={realScale:_a.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=Kl.prototype,t=a=>c(a,Vs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ce(this,"_keyboardManager",new zf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,Vs).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,Vs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,s,r;(e=c(this,li))==null||e.resolve(),v(this,li,null),(t=c(this,oc))==null||t.abort(),v(this,oc,null),this._signal=null;for(const a of c(this,Nt).values())a.destroy();c(this,Nt).clear(),c(this,yt).clear(),c(this,no).clear(),v(this,On,null),c(this,Ce).clear(),c(this,oi).destroy(),(i=c(this,lc))==null||i.destroy(),(s=c(this,cs))==null||s.hide(),v(this,cs,null),c(this,ls)&&(clearTimeout(c(this,ls)),v(this,ls,null)),c(this,us)&&(clearTimeout(c(this,us)),v(this,us,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,ph)}get useNewAltTextFlow(){return c(this,uh)}get useNewAltTextWhenAddingImage(){return c(this,dc)}get hcmFilter(){return ce(this,"hcmFilter",c(this,so)?c(this,dh).addHCMFilter(c(this,so).foreground,c(this,so).background):"none")}get direction(){return ce(this,"direction",getComputedStyle(c(this,Vs)).direction)}get highlightColors(){return ce(this,"highlightColors",c(this,hc)?new Map(c(this,hc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ce(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),v(this,eo,e)}setMainHighlightColorPicker(e){v(this,fh,e)}editAltText(e,t=!1){var i;(i=c(this,lc))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":v(this,dc,t);break}}onPageChanging({pageNumber:e}){v(this,uc,e-1)}focusMainContainer(){c(this,Vs).focus()}findParent(e,t){for(const i of c(this,Nt).values()){const{x:s,y:r,width:a,height:o}=i.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=r&&t<=r+o)return i}return null}disableUserSelect(e=!1){c(this,yh).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,no).add(e)}removeShouldRescale(e){c(this,no).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*_a.PDF_TO_CSS_UNITS;for(const i of c(this,no))i.onScaleChanging();(t=c(this,eo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a}=t,o=t.toString(),u=E(this,j,Xp).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;t.empty();const h=E(this,j,B0).call(this,u),f=c(this,St)===se.NONE,p=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(se.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,js)&&!c(this,js).has(e.id)&&c(this,js).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,jr)&&(v(this,jr,!1),E(this,j,Kp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Ce))if(t.div.contains(e)){v(this,io,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,io))return;const[e,t]=c(this,io);v(this,io,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,j,j0).call(this),E(this,j,U0).call(this)}removeEditListeners(){E(this,j,aR).call(this),E(this,j,V0).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of c(this,Mi))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of c(this,Mi))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=c(this,On))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of c(this,Ce)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of c(this,Mi))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){re(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of i){const u=await s.deserialize(l);if(!u)return;r.push(u)}const a=()=>{for(const l of r)E(this,j,z0).call(this,l);E(this,j,$0).call(this,r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){re(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,St)!==se.NONE&&!this.isEditorHandlingKeyboard&&Kl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,jr)&&(v(this,jr,!1),E(this,j,Kp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(E(this,j,sR).call(this),E(this,j,U0).call(this),E(this,j,an).call(this,{isEditing:c(this,St)!==se.NONE,isEmpty:E(this,j,Ku).call(this),hasSomethingToUndo:c(this,oi).hasSomethingToUndo(),hasSomethingToRedo:c(this,oi).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,j,rR).call(this),E(this,j,V0).call(this),E(this,j,an).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Mi)){v(this,Mi,e);for(const t of c(this,Mi))E(this,j,ks).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,dg).id}get currentLayer(){return c(this,Nt).get(c(this,uc))}getLayer(e){return c(this,Nt).get(e)}get currentPageIndex(){return c(this,uc)}addLayer(e){c(this,Nt).set(e.pageIndex,e),c(this,Ur)?e.enable():e.disable()}removeLayer(e){c(this,Nt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){var s;if(c(this,St)!==e&&!(c(this,li)&&(await c(this,li).promise,!c(this,li)))){if(v(this,li,Promise.withResolvers()),v(this,St,e),e===se.NONE){this.setEditingState(!1),E(this,j,cR).call(this),(s=this._editorUndoBar)==null||s.hide(),c(this,li).resolve();return}this.setEditingState(!0),await E(this,j,lR).call(this),this.unselectAll();for(const r of c(this,Nt).values())r.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),c(this,li).resolve();return}for(const r of c(this,yt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();c(this,li).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,St)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(c(this,Mi)){switch(e){case me.CREATE:this.currentLayer.addNewEditor();return;case me.HIGHLIGHT_DEFAULT_COLOR:(i=c(this,fh))==null||i.updateColor(t);break;case me.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,mh)||v(this,mh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of c(this,Ce))s.updateParams(e,t);for(const s of c(this,Mi))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const a of c(this,yt).values())a.editorType===e&&a.show(t);(((r=c(this,mh))==null?void 0:r.get(me.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,j,ks).call(this,[[me.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,hh)!==e){v(this,hh,e);for(const t of c(this,Nt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of c(this,yt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return c(this,yt).get(e)}addEditor(e){c(this,yt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,ls)&&clearTimeout(c(this,ls)),v(this,ls,setTimeout(()=>{this.focusMainContainer(),v(this,ls,null)},0))),c(this,yt).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,to).has(e.annotationElementId))&&((t=c(this,js))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,to).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,to).has(e)}removeDeletedAnnotationElement(e){c(this,to).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,On)!==e&&(v(this,On,e),e&&E(this,j,ks).call(this,e.propertiesToUpdate))}updateUI(e){c(this,j,uR)===e&&E(this,j,ks).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){E(this,j,ks).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Ce).has(e)){c(this,Ce).delete(e),e.unselect(),E(this,j,an).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Ce).add(e),e.select(),E(this,j,ks).call(this,e.propertiesToUpdate),E(this,j,an).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=c(this,eo))==null||t.commitOrRemove();for(const i of c(this,Ce))i!==e&&i.unselect();c(this,Ce).clear(),c(this,Ce).add(e),e.select(),E(this,j,ks).call(this,e.propertiesToUpdate),E(this,j,an).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Ce).has(e)}get firstSelectedEditor(){return c(this,Ce).values().next().value}unselect(e){e.unselect(),c(this,Ce).delete(e),E(this,j,an).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Ce).size!==0}get isEnterHandled(){return c(this,Ce).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,oi).undo(),E(this,j,an).call(this,{hasSomethingToUndo:c(this,oi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,j,Ku).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,oi).redo(),E(this,j,an).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,oi).hasSomethingToRedo(),isEmpty:E(this,j,Ku).call(this)})}addCommands(e){c(this,oi).add(e),E(this,j,an).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,j,Ku).call(this)})}cleanUndoStack(e){c(this,oi).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Ce)],i=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const a of t)E(this,j,z0).call(this,a)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=c(this,On))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,On)||this.hasSelection}selectAll(){for(const e of c(this,Ce))e.commit();E(this,j,$0).call(this,c(this,yt).values())}unselectAll(){var e;if(!(c(this,On)&&(c(this,On).commitOrRemove(),c(this,St)!==se.NONE))&&!((e=c(this,eo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Ce))t.unselect();c(this,Ce).clear(),E(this,j,an).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;c(this,zr)[0]+=e,c(this,zr)[1]+=t;const[s,r]=c(this,zr),a=[...c(this,Ce)],o=1e3;c(this,us)&&clearTimeout(c(this,us)),v(this,us,setTimeout(()=>{v(this,us,null),c(this,zr)[0]=c(this,zr)[1]=0,this.addCommands({cmd:()=>{for(const l of a)c(this,yt).has(l.id)&&l.translateInPage(s,r)},undo:()=>{for(const l of a)c(this,yt).has(l.id)&&l.translateInPage(-s,-r)},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,os,new Map);for(const e of c(this,Ce))c(this,os).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,os))return!1;this.disableUserSelect(!1);const e=c(this,os);v(this,os,null);let t=!1;for(const[{x:s,y:r,pageIndex:a},o]of e)o.newX=s,o.newY=r,o.newPageIndex=a,t||(t=s!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const i=(s,r,a,o)=>{if(c(this,yt).has(s.id)){const l=c(this,Nt).get(o);l?s._setParentAndPosition(l,r,a):(s.pageIndex=o,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:o}]of e)i(s,r,a,o)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:o}]of e)i(s,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,os))for(const i of c(this,os).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Ce).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,On)===e}getActive(){return c(this,On)}getMode(){return c(this,St)}get imageManager(){return ce(this,"imageManager",new O0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,d,h,f)=>({x:(d-s)/a,y:1-(u+h-i)/r,width:f/a,height:h/r});break;case"180":o=(u,d,h,f)=>({x:1-(u+h-i)/r,y:1-(d+f-s)/a,width:h/r,height:f/a});break;case"270":o=(u,d,h,f)=>({x:1-(d+f-s)/a,y:(u-i)/r,width:f/a,height:h/r});break;default:o=(u,d,h,f)=>({x:(u-i)/r,y:(d-s)/a,width:h/r,height:f/a});break}const l=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:m,height:y}of h.getClientRects())m===0||y===0||l.push(o(f,p,m,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,cc)||v(this,cc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,cc))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=c(this,cc))==null?void 0:s.get(e.data.id);if(!t)return;const i=c(this,js).getRawValue(t);i&&(c(this,St)===se.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};oc=new WeakMap,On=new WeakMap,yt=new WeakMap,Nt=new WeakMap,lc=new WeakMap,js=new WeakMap,cc=new WeakMap,oi=new WeakMap,Fr=new WeakMap,eo=new WeakMap,uc=new WeakMap,to=new WeakMap,os=new WeakMap,Mi=new WeakMap,no=new WeakMap,ch=new WeakMap,uh=new WeakMap,dc=new WeakMap,dh=new WeakMap,ls=new WeakMap,Br=new WeakMap,hc=new WeakMap,jr=new WeakMap,cs=new WeakMap,dg=new WeakMap,Ur=new WeakMap,hh=new WeakMap,Vr=new WeakMap,io=new WeakMap,fh=new WeakMap,ph=new WeakMap,St=new WeakMap,Ce=new WeakMap,Us=new WeakMap,so=new WeakMap,mh=new WeakMap,gh=new WeakMap,zr=new WeakMap,us=new WeakMap,Vs=new WeakMap,yh=new WeakMap,li=new WeakMap,j=new WeakSet,Xp=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},B0=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of c(this,Nt).values())if(i.hasTextLayer(e))return i;return null},tR=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=E(this,j,Xp).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(c(this,cs)||v(this,cs,new uj(this)),c(this,cs).show(i,s,this.direction==="ltr"))},nR=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Us)&&((r=c(this,cs))==null||r.hide(),v(this,Us,null),E(this,j,an).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Us))return;const s=E(this,j,Xp).call(this,e).closest(".textLayer");if(!s){c(this,Us)&&((a=c(this,cs))==null||a.hide(),v(this,Us,null),E(this,j,an).call(this,{hasSelectedText:!1}));return}if((o=c(this,cs))==null||o.hide(),v(this,Us,t),E(this,j,an).call(this,{hasSelectedText:!0}),!(c(this,St)!==se.HIGHLIGHT&&c(this,St)!==se.NONE)&&(c(this,St)===se.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,jr,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,St)===se.HIGHLIGHT?E(this,j,B0).call(this,s):null;l==null||l.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&E(this,j,Kp).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}},Kp=function(e=""){c(this,St)===se.HIGHLIGHT?this.highlightSelection(e):c(this,ch)&&E(this,j,tR).call(this)},iR=function(){document.addEventListener("selectionchange",E(this,j,nR).bind(this),{signal:this._signal})},sR=function(){if(c(this,Br))return;v(this,Br,new AbortController);const e=this.combinedSignal(c(this,Br));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},rR=function(){var e;(e=c(this,Br))==null||e.abort(),v(this,Br,null)},j0=function(){if(c(this,Vr))return;v(this,Vr,new AbortController);const e=this.combinedSignal(c(this,Vr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},aR=function(){var e;(e=c(this,Vr))==null||e.abort(),v(this,Vr,null)},U0=function(){if(c(this,Fr))return;v(this,Fr,new AbortController);const e=this.combinedSignal(c(this,Fr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},V0=function(){var e;(e=c(this,Fr))==null||e.abort(),v(this,Fr,null)},oR=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},an=function(e){Object.entries(e).some(([i,s])=>c(this,gh)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,gh),e)}),c(this,St)===se.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,j,ks).call(this,[[me.HIGHLIGHT_FREE,!0]]))},ks=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},lR=async function(){if(!c(this,Ur)){v(this,Ur,!0);const e=[];for(const t of c(this,Nt).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,yt).values())t.enable()}},cR=function(){if(this.unselectAll(),c(this,Ur)){v(this,Ur,!1);for(const e of c(this,Nt).values())e.disable();for(const e of c(this,yt).values())e.disable()}},z0=function(e){const t=c(this,Nt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},uR=function(){let e=null;for(e of c(this,Ce));return e},Ku=function(){if(c(this,yt).size===0)return!0;if(c(this,yt).size===1)for(const e of c(this,yt).values())return e.isEmpty();return!1},$0=function(e){for(const t of c(this,Ce))t.unselect();c(this,Ce).clear();for(const t of e)t.isEmpty()||(c(this,Ce).add(t),t.select());E(this,j,an).call(this,{hasSelectedEditor:this.hasSelection})},Q(Kl,"TRANSLATE_SMALL",1),Q(Kl,"TRANSLATE_BIG",10);let gl=Kl;var Et,ds,ki,fc,hs,Fn,pc,fs,Sn,zs,ro,ps,$r,Gi,Yu,Yp;const on=class on{constructor(e){S(this,Gi);S(this,Et,null);S(this,ds,!1);S(this,ki,null);S(this,fc,null);S(this,hs,null);S(this,Fn,null);S(this,pc,!1);S(this,fs,null);S(this,Sn,null);S(this,zs,null);S(this,ro,null);S(this,ps,!1);v(this,Sn,e),v(this,ps,e._uiManager.useNewAltTextFlow),c(on,$r)||v(on,$r,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){on._l10n??(on._l10n=e)}async render(){const e=v(this,ki,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=v(this,fc,document.createElement("span"));e.append(t),c(this,ps)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(on,$r).missing),t.setAttribute("data-l10n-id",c(on,$r)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=c(this,Sn)._uiManager._signal;e.addEventListener("contextmenu",Ki,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),c(this,Sn)._uiManager.editAltText(c(this,Sn)),c(this,ps)&&c(this,Sn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Gi,Yu)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(v(this,pc,!0),s(r))},{signal:i}),await E(this,Gi,Yp).call(this),e}finish(){c(this,ki)&&(c(this,ki).focus({focusVisible:c(this,pc)}),v(this,pc,!1))}isEmpty(){return c(this,ps)?c(this,Et)===null:!c(this,Et)&&!c(this,ds)}hasData(){return c(this,ps)?c(this,Et)!==null||!!c(this,zs):this.isEmpty()}get guessedText(){return c(this,zs)}async setGuessedText(e){c(this,Et)===null&&(v(this,zs,e),v(this,ro,await on._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,Gi,Yp).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,ps)||c(this,Et)){(t=c(this,fs))==null||t.remove(),v(this,fs,null);return}if(!c(this,fs)){const i=v(this,fs,document.createElement("div"));i.className="noAltTextBadge",c(this,Sn).div.append(i)}c(this,fs).classList.toggle("hidden",!e)}serialize(e){let t=c(this,Et);return!e&&c(this,zs)===t&&(t=c(this,ro)),{altText:t,decorative:c(this,ds),guessedText:c(this,zs),textWithDisclaimer:c(this,ro)}}get data(){return{altText:c(this,Et),decorative:c(this,ds)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(v(this,zs,i),v(this,ro,s)),!(c(this,Et)===e&&c(this,ds)===t)&&(r||(v(this,Et,e),v(this,ds,t)),E(this,Gi,Yp).call(this))}toggle(e=!1){c(this,ki)&&(!e&&c(this,Fn)&&(clearTimeout(c(this,Fn)),v(this,Fn,null)),c(this,ki).disabled=!e)}shown(){c(this,Sn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Gi,Yu)}})}destroy(){var e,t;(e=c(this,ki))==null||e.remove(),v(this,ki,null),v(this,fc,null),v(this,hs,null),(t=c(this,fs))==null||t.remove(),v(this,fs,null)}};Et=new WeakMap,ds=new WeakMap,ki=new WeakMap,fc=new WeakMap,hs=new WeakMap,Fn=new WeakMap,pc=new WeakMap,fs=new WeakMap,Sn=new WeakMap,zs=new WeakMap,ro=new WeakMap,ps=new WeakMap,$r=new WeakMap,Gi=new WeakSet,Yu=function(){return c(this,Et)&&"added"||c(this,Et)===null&&this.guessedText&&"review"||"missing"},Yp=async function(){var s,r,a;const e=c(this,ki);if(!e)return;if(c(this,ps)){if(e.classList.toggle("done",!!c(this,Et)),e.setAttribute("data-l10n-id",c(on,$r)[c(this,Gi,Yu)]),(s=c(this,fc))==null||s.setAttribute("data-l10n-id",c(on,$r)[`${c(this,Gi,Yu)}-label`]),!c(this,Et)){(r=c(this,hs))==null||r.remove();return}}else{if(!c(this,Et)&&!c(this,ds)){e.classList.remove("done"),(a=c(this,hs))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,hs);if(!t){v(this,hs,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Sn).id}`;const o=100,l=c(this,Sn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Fn)),v(this,Fn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{v(this,Fn,setTimeout(()=>{v(this,Fn,null),c(this,hs).classList.add("show"),c(this,Sn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;c(this,Fn)&&(clearTimeout(c(this,Fn)),v(this,Fn,null)),(u=c(this,hs))==null||u.classList.remove("show")},{signal:l})}c(this,ds)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,Et)),t.parentNode||e.append(t);const i=c(this,Sn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},S(on,$r,null),Q(on,"_l10n",null);let Zm=on;var vh,ao,bh,wh,Ah,Sh,Eh,mc,$s,oo,Hr,Sr,dR,hR,H0;const LA=class LA{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:a=null,signal:o}){S(this,Sr);S(this,vh);S(this,ao,!1);S(this,bh,null);S(this,wh);S(this,Ah);S(this,Sh);S(this,Eh);S(this,mc);S(this,$s,null);S(this,oo);S(this,Hr,null);v(this,vh,e),v(this,bh,i),v(this,wh,t),v(this,Ah,s),v(this,Sh,r),v(this,Eh,a),v(this,oo,new AbortController),v(this,mc,AbortSignal.any([o,c(this,oo).signal])),e.addEventListener("touchstart",E(this,Sr,dR).bind(this),{passive:!1,signal:c(this,mc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ce(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=c(this,oo))==null||e.abort(),v(this,oo,null)}};vh=new WeakMap,ao=new WeakMap,bh=new WeakMap,wh=new WeakMap,Ah=new WeakMap,Sh=new WeakMap,Eh=new WeakMap,mc=new WeakMap,$s=new WeakMap,oo=new WeakMap,Hr=new WeakMap,Sr=new WeakSet,dR=function(e){var s,r,a;if((s=c(this,wh))!=null&&s.call(this)||e.touches.length<2)return;if(!c(this,Hr)){v(this,Hr,new AbortController);const o=AbortSignal.any([c(this,mc),c(this,Hr).signal]),l=c(this,vh),u={signal:o,passive:!1};l.addEventListener("touchmove",E(this,Sr,hR).bind(this),u),l.addEventListener("touchend",E(this,Sr,H0).bind(this),u),l.addEventListener("touchcancel",E(this,Sr,H0).bind(this),u),(r=c(this,Ah))==null||r.call(this)}if(Qn(e),e.touches.length!==2||(a=c(this,bh))!=null&&a.call(this)){v(this,$s,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),v(this,$s,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},hR=function(e){var C;if(!c(this,$s)||e.touches.length!==2)return;let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:s,screenY:r}=t,{screenX:a,screenY:o}=i,l=c(this,$s),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=l,p=h-u,m=f-d,y=a-s,A=o-r,g=Math.hypot(y,A)||1,b=Math.hypot(p,m)||1;if(!c(this,ao)&&Math.abs(b-g)<=LA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=a,l.touch1Y=o,e.preventDefault(),!c(this,ao)){v(this,ao,!0);return}const w=[(s+a)/2,(r+o)/2];(C=c(this,Sh))==null||C.call(this,w,b,g)},H0=function(e){var t;c(this,Hr).abort(),v(this,Hr,null),(t=c(this,Eh))==null||t.call(this),c(this,$s)&&(e.preventDefault(),v(this,$s,null),v(this,ao,!1))};let eg=LA;var lo,Di,Oe,gc,Gr,Ch,co,Mt,uo,Hs,qr,xh,ho,Bn,Th,fo,Gs,ms,yc,vc,ci,po,_h,hg,J,G0,Ph,q0,Qp,fR,pR,W0,Jp,X0,mR,gR,yR,K0,vR,Y0,bR,wR,AR,Q0,Qu;const oe=class oe{constructor(e){S(this,J);S(this,lo,null);S(this,Di,null);S(this,Oe,null);S(this,gc,!1);S(this,Gr,null);S(this,Ch,"");S(this,co,!1);S(this,Mt,null);S(this,uo,null);S(this,Hs,null);S(this,qr,null);S(this,xh,"");S(this,ho,!1);S(this,Bn,null);S(this,Th,!1);S(this,fo,!1);S(this,Gs,!1);S(this,ms,null);S(this,yc,0);S(this,vc,0);S(this,ci,null);S(this,po,null);Q(this,"_editToolbar",null);Q(this,"_initialOptions",Object.create(null));Q(this,"_initialData",null);Q(this,"_isVisible",!0);Q(this,"_uiManager",null);Q(this,"_focusEventsAllowed",!0);S(this,_h,!1);S(this,hg,oe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=oe.prototype._resizeWithKeyboard,t=gl.TRANSLATE_SMALL,i=gl.TRANSLATE_BIG;return ce(this,"_resizerKeyboardManager",new zf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],oe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ce(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new fj({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(oe._l10n??(oe._l10n=e),oe._l10nResizer||(oe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),oe._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);oe._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ie("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,_h)}set _isDraggable(e){var t;v(this,_h,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,hg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):E(this,J,Qu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,ho)?v(this,ho,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){E(this,J,G0).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Bn)||v(this,Bn,[this.x,this.y,this.width,this.height]),E(this,J,G0).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,Bn)||v(this,Bn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:d}=i;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,Bn)&&(c(this,Bn)[0]!==this.x||c(this,Bn)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Bn)&&(c(this,Bn)[2]!==this.width||c(this,Bn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=oe,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,s]}=this;let{x:r,y:a,width:o,height:l}=this;if(o*=i,l*=s,r*=i,a*=s,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(i-o,r)),a=Math.max(0,Math.min(s-l,a));break;case 90:r=Math.max(0,Math.min(i-l,r)),a=Math.min(s,Math.max(o,a));break;case 180:r=Math.min(i,Math.max(o,r)),a=Math.min(s,Math.max(l,a));break;case 270:r=Math.min(i,Math.max(l,r)),a=Math.max(0,Math.min(s-o,a));break}this.x=r/=i,this.y=a/=s;const[u,d]=this.getBaseTranslation();r+=u,a+=d,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return E(i=oe,Ph,q0).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return E(i=oe,Ph,q0).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/i).toFixed(2)}%`,c(this,co)||(r.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!c(this,co)&&t.endsWith("%");if(s&&r)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!c(this,co)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Oe))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,fo)?this._editToolbar:(this._editToolbar=new D0(this),this.div.append(this._editToolbar.render()),c(this,Oe)&&await this._editToolbar.addAltText(c(this,Oe)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,Oe))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Oe)||(Zm.initialize(oe._l10n),v(this,Oe,new Zm(this)),c(this,lo)&&(c(this,Oe).data=c(this,lo),v(this,lo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,Oe))==null?void 0:e.data}set altTextData(e){c(this,Oe)&&(c(this,Oe).data=e)}get guessedAltText(){var e;return(e=c(this,Oe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Oe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Oe))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Oe)&&!c(this,Oe).isEmpty()}hasAltTextData(){var e;return((e=c(this,Oe))==null?void 0:e.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,gc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,J,Y0).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Jm(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,po)||v(this,po,new eg({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,J,mR).bind(this),onPinching:E(this,J,gR).bind(this),onPinchEnd:E(this,J,yR).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(v(this,ho,!0),this._isDraggable){E(this,J,vR).call(this,e);return}E(this,J,K0).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,ms)&&clearTimeout(c(this,ms)),v(this,ms,setTimeout(()=>{var e;v(this,ms,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/s,d=t/s,h=this.x*r,f=this.y*a,p=this.width*r,m=this.height*a;switch(i){case 0:return[h+u+o,a-f-d-m+l,h+u+p+o,a-f-d+l];case 90:return[h+d+o,a-f+u+l,h+d+m+o,a-f+u+p+l];case 180:return[h-u-p+o,a-f+d+l,h-u+o,a-f+d+m+l];case 270:return[h-d-m+o,a-f-u-p+l,h-d+o,a-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,a]=e,o=r-i,l=a-s;switch(this.rotation){case 0:return[i,t-a,o,l];case 90:return[i,t-s,l,o];case 180:return[r,t-s,o,l];case 270:return[r,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){v(this,fo,!0)}disableEditMode(){v(this,fo,!1)}isInEditMode(){return c(this,fo)}shouldGetKeyboardEvents(){return c(this,Gs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&s>0&&e<r&&i>0}rebuild(){E(this,J,Y0).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ie("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,v(s,lo,e.accessibilityData);const[r,a]=s.pageDimensions,[o,l,u,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/r,s.y=l/a,s.width=u/r,s.height=d/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,qr))==null||e.abort(),v(this,qr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,ms)&&(clearTimeout(c(this,ms)),v(this,ms,null)),E(this,J,Qu).call(this),this.removeEditToolbar(),c(this,ci)){for(const i of c(this,ci).values())clearTimeout(i);v(this,ci,null)}this.parent=null,(t=c(this,po))==null||t.destroy(),v(this,po,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,J,fR).call(this),c(this,Mt).classList.remove("hidden"),Jm(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),v(this,Hs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Mt).children;if(!c(this,Di)){v(this,Di,Array.from(t));const a=E(this,J,bR).bind(this),o=E(this,J,wR).bind(this),l=this._uiManager._signal;for(const u of c(this,Di)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",E(this,J,AR).bind(this,d),{signal:l}),u.setAttribute("data-l10n-id",oe._l10nResizer[d])}}const i=c(this,Di)[0];let s=0;for(const a of t){if(a===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,Di).length/4);if(r!==s){if(r<s)for(let o=0;o<s-r;o++)c(this,Mt).append(c(this,Mt).firstChild);else if(r>s)for(let o=0;o<r-s;o++)c(this,Mt).firstChild.before(c(this,Mt).lastChild);let a=0;for(const o of t){const u=c(this,Di)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",oe._l10nResizer[u])}}E(this,J,Q0).call(this,0),v(this,Gs,!0),c(this,Mt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Gs)&&E(this,J,X0).call(this,c(this,xh),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,J,Qu).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(i=c(this,Oe))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,s,r;(e=c(this,Mt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=c(this,Oe))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,Th)}set isEditing(e){v(this,Th,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){v(this,co,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,ci)||v(this,ci,new Map);const{action:i}=e;let s=c(this,ci).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),c(this,ci).delete(i),c(this,ci).size===0&&v(this,ci,null)},oe._telemetryTimeout),c(this,ci).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),v(this,gc,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,gc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};lo=new WeakMap,Di=new WeakMap,Oe=new WeakMap,gc=new WeakMap,Gr=new WeakMap,Ch=new WeakMap,co=new WeakMap,Mt=new WeakMap,uo=new WeakMap,Hs=new WeakMap,qr=new WeakMap,xh=new WeakMap,ho=new WeakMap,Bn=new WeakMap,Th=new WeakMap,fo=new WeakMap,Gs=new WeakMap,ms=new WeakMap,yc=new WeakMap,vc=new WeakMap,ci=new WeakMap,po=new WeakMap,_h=new WeakMap,hg=new WeakMap,J=new WeakSet,G0=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ph=new WeakSet,q0=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Qp=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},fR=function(){if(c(this,Mt))return;v(this,Mt,document.createElement("div")),c(this,Mt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");c(this,Mt).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",E(this,J,pR).bind(this,i),{signal:t}),s.addEventListener("contextmenu",Ki,{signal:t}),s.tabIndex=-1}this.div.prepend(c(this,Mt))},pR=function(e,t){var d;t.preventDefault();const{isMac:i}=pn.platform;if(t.button!==0||t.ctrlKey&&i)return;(d=c(this,Oe))==null||d.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,v(this,uo,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,J,X0).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Qn,{passive:!1,signal:a}),window.addEventListener("contextmenu",Ki,{signal:a}),v(this,Hs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;r.abort(),this.parent.togglePointerEvents(!0),(h=c(this,Oe))==null||h.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,E(this,J,Jp).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},W0=function(e,t,i,s){this.width=i,this.height=s,this.x=e,this.y=t;const[r,a]=this.parentDimensions;this.setDims(r*i,a*s),this.fixAndSetPosition(),this._onResized()},Jp=function(){if(!c(this,Hs))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=c(this,Hs);v(this,Hs,null);const r=this.x,a=this.y,o=this.width,l=this.height;r===e&&a===t&&o===i&&l===s||this.addCommands({cmd:E(this,J,W0).bind(this,r,a,o,l),undo:E(this,J,W0).bind(this,e,t,i,s),mustExec:!0})},X0=function(e,t){const[i,s]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,u=oe.MIN_SIZE/i,d=oe.MIN_SIZE/s,h=E(this,J,Qp).call(this,this.rotation),f=(F,B)=>[h[0]*F+h[2]*B,h[1]*F+h[3]*B],p=E(this,J,Qp).call(this,360-this.rotation),m=(F,B)=>[p[0]*F+p[2]*B,p[1]*F+p[3]*B];let y,A,g=!1,b=!1;switch(e){case"topLeft":g=!0,y=(F,B)=>[0,0],A=(F,B)=>[F,B];break;case"topMiddle":y=(F,B)=>[F/2,0],A=(F,B)=>[F/2,B];break;case"topRight":g=!0,y=(F,B)=>[F,0],A=(F,B)=>[0,B];break;case"middleRight":b=!0,y=(F,B)=>[F,B/2],A=(F,B)=>[0,B/2];break;case"bottomRight":g=!0,y=(F,B)=>[F,B],A=(F,B)=>[0,0];break;case"bottomMiddle":y=(F,B)=>[F/2,B],A=(F,B)=>[F/2,0];break;case"bottomLeft":g=!0,y=(F,B)=>[0,B],A=(F,B)=>[F,0];break;case"middleLeft":b=!0,y=(F,B)=>[0,B/2],A=(F,B)=>[F,B/2];break}const w=y(o,l),C=A(o,l);let x=f(...C);const _=oe._round(r+x[0]),P=oe._round(a+x[1]);let R=1,N=1,D,U;if(t.fromKeyboard)({deltaX:D,deltaY:U}=t);else{const{screenX:F,screenY:B}=t,[M,T]=c(this,uo);[D,U]=this.screenToPageTranslation(F-M,B-T),c(this,uo)[0]=F,c(this,uo)[1]=B}if([D,U]=m(D/i,U/s),g){const F=Math.hypot(o,l);R=N=Math.max(Math.min(Math.hypot(C[0]-w[0]-D,C[1]-w[1]-U)/F,1/o,1/l),u/o,d/l)}else b?R=Math.max(u,Math.min(1,Math.abs(C[0]-w[0]-D)))/o:N=Math.max(d,Math.min(1,Math.abs(C[1]-w[1]-U)))/l;const fe=oe._round(o*R),Ae=oe._round(l*N);x=f(...A(fe,Ae));const ae=_-x[0],te=P-x[1];c(this,Bn)||v(this,Bn,[this.x,this.y,this.width,this.height]),this.width=fe,this.height=Ae,this.x=ae,this.y=te,this.setDims(i*fe,s*Ae),this.fixAndSetPosition(),this._onResizing()},mR=function(){var e;v(this,Hs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Oe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},gR=function(e,t,i){let r=.7*(i/t)+1-.7;if(r===1)return;const a=E(this,J,Qp).call(this,this.rotation),o=(_,P)=>[a[0]*_+a[2]*P,a[1]*_+a[3]*P],[l,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,m=oe.MIN_SIZE/l,y=oe.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),m/f,y/p);const A=oe._round(f*r),g=oe._round(p*r);if(A===f&&g===p)return;c(this,Bn)||v(this,Bn,[d,h,f,p]);const b=o(f/2,p/2),w=oe._round(d+b[0]),C=oe._round(h+b[1]),x=o(A/2,g/2);this.x=w-x[0],this.y=C-x[1],this.width=A,this.height=g,this.setDims(l*A,u*g),this.fixAndSetPosition(),this._onResizing()},yR=function(){var e;(e=c(this,Oe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),E(this,J,Jp).call(this)},K0=function(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},vR=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:r},o=u=>{s.abort(),v(this,Gr,null),v(this,ho,!1),this._uiManager.endDragSession()||E(this,J,K0).call(this,u),i&&this._onStopDragging()};t&&(v(this,yc,e.clientX),v(this,vc,e.clientY),v(this,Gr,e.pointerId),v(this,Ch,e.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==c(this,Gr)){Qn(u);return}const[p,m]=this.screenToPageTranslation(d-c(this,yc),h-c(this,vc));v(this,yc,d),v(this,vc,h),this._uiManager.dragSelectedEditors(p,m)},a),window.addEventListener("touchmove",Qn,a),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,Ch)&&(c(this,po)||u.isPrimary)&&o(u),Qn(u)},a));const l=u=>{if(!c(this,Gr)||c(this,Gr)===u.pointerId){o(u);return}Qn(u)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},Y0=function(){if(c(this,qr)||!this.div)return;v(this,qr,new AbortController);const e=this._uiManager.combinedSignal(c(this,qr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},bR=function(e){oe._resizerKeyboardManager.exec(this,e)},wR=function(e){var t;c(this,Gs)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Mt)&&E(this,J,Qu).call(this)},AR=function(e){v(this,xh,c(this,Gs)?e:"")},Q0=function(e){if(c(this,Di))for(const t of c(this,Di))t.tabIndex=e},Qu=function(){v(this,Gs,!1),E(this,J,Q0).call(this,-1),E(this,J,Jp).call(this)},S(oe,Ph),Q(oe,"_l10n",null),Q(oe,"_l10nResizer",null),Q(oe,"_borderLineWidth",-1),Q(oe,"_colorManager",new F0),Q(oe,"_zIndex",1),Q(oe,"_telemetryTimeout",1e3);let Ye=oe;class fj extends Ye{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const n1=3285377520,ri=4294901760,ss=65535;class SR{constructor(e){this.h1=e?e&4294967295:n1,this.h2=e?e&4294967295:n1}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let y=0,A=e.length;y<A;y++){const g=e.charCodeAt(y);g<=255?t[i++]=g:(t[i++]=g>>>8,t[i++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,l=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&ss,m=f&ss;for(let y=0;y<s;y++)y&1?(o=a[y],o=o*h&ri|o*p&ss,o=o<<15|o>>>17,o=o*f&ri|o*m&ss,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[y],l=l*h&ri|l*p&ss,l=l<<15|l>>>17,l=l*f&ri|l*m&ss,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,r){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*h&ri|o*p&ss,o=o<<15|o>>>17,o=o*f&ri|o*m&ss,s&1?u^=o:d^=o}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ri|e*36045&ss,t=t*4283543511&ri|((t<<16|e>>>16)*2950163797&ri)>>>16,e^=t>>>1,e=e*444984403&ri|e*60499&ss,t=t*3301882366&ri|((t<<16|e>>>16)*3120437893&ri)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const J0=Object.freeze({map:null,hash:"",transfer:void 0});var mo,go,Ct,fg,ER;class IA{constructor(){S(this,fg);S(this,mo,!1);S(this,go,null);S(this,Ct,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=c(this,Ct).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return c(this,Ct).get(e)}remove(e){if(c(this,Ct).delete(e),c(this,Ct).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,Ct).values())if(t instanceof Ye)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=c(this,Ct).get(e);let s=!1;if(i!==void 0)for(const[r,a]of Object.entries(t))i[r]!==a&&(s=!0,i[r]=a);else s=!0,c(this,Ct).set(e,t);s&&E(this,fg,ER).call(this),t instanceof Ye&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,Ct).has(e)}getAll(){return c(this,Ct).size>0?CA(c(this,Ct)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return c(this,Ct).size}resetModified(){c(this,mo)&&(v(this,mo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new CR(this)}get serializable(){if(c(this,Ct).size===0)return J0;const e=new Map,t=new SR,i=[],s=Object.create(null);let r=!1;for(const[a,o]of c(this,Ct)){const l=o instanceof Ye?o.serialize(!1,s):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:J0}get editorStats(){let e=null;const t=new Map;for(const i of c(this,Ct).values()){if(!(i instanceof Ye))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,l]of Object.entries(s)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const d=u.get(l)??0;u.set(l,d+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){v(this,go,null)}get modifiedIds(){if(c(this,go))return c(this,go);const e=[];for(const t of c(this,Ct).values())!(t instanceof Ye)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return v(this,go,{ids:new Set(e),hash:e.join(",")})}}mo=new WeakMap,go=new WeakMap,Ct=new WeakMap,fg=new WeakSet,ER=function(){c(this,mo)||(v(this,mo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Rh;class CR extends IA{constructor(t){super();S(this,Rh);const{map:i,hash:s,transfer:r}=t.serializable,a=structuredClone(i,r?{transfer:r}:null);v(this,Rh,{map:a,hash:s,transfer:r})}get print(){Ie("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Rh)}get modifiedIds(){return ce(this,"modifiedIds",{ids:new Set,hash:""})}}Rh=new WeakMap;var bc;class pj{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,bc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,bc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,bc).has(e.loadedName))){if(ht(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=e,a=new FontFace(i,s,r);this.addNativeFontFace(a);try{await a.load(),c(this,bc).add(i),t==null||t(e)}catch{re(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ie("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw re(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ce(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(tn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ce(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(ht(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ce(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(C,x){return C.charCodeAt(x)<<24|C.charCodeAt(x+1)<<16|C.charCodeAt(x+2)<<8|C.charCodeAt(x+3)&255}function s(C,x,_,P){const R=C.substring(0,x),N=C.substring(x+_);return R+P+N}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function d(C,x){if(++u>30){re("Load test font never loaded."),x();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(d.bind(null,C,x))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,h.length,h);const m=16,y=1482184792;let A=i(f,m);for(r=0,a=h.length-3;r<a;r+=4)A=A-y+i(h,r)|0;r<h.length&&(A=A-y+i(h+"XXX",r)|0),f=s(f,m,4,Z3(A));const g=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${h}";src:${g}}`;this.insertRule(b);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const C of[e.loadedName,h]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=C,w.append(x)}this._document.body.append(w),d(h,()=>{w.remove(),t.complete()})}}bc=new WeakMap;class mj{constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this.fontExtraProperties=i===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${rj(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let s;try{s=e.get(i)}catch(a){re(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=r}}const wp={DATA:1,ERROR:2},ct={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function i1(){}function wn(n){if(n instanceof Ta||n instanceof N0||n instanceof eh||n instanceof ZC||n instanceof Qm||n instanceof rv)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ie('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ta(n.message);case"InvalidPDFException":return new N0(n.message);case"MissingPDFException":return new eh(n.message);case"PasswordException":return new ZC(n.message,n.code);case"UnexpectedResponseException":return new Qm(n.message,n.status);case"UnknownErrorException":return new rv(n.message,n.details)}return new rv(n.message,n.toString())}var wc,Ai,xR,TR,_R,Zp;class Ju{constructor(e,t,i){S(this,Ai);S(this,wc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,Ai,xR).bind(this),{signal:c(this,wc).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,l.postMessage({sourceName:a,targetName:o,stream:ct.PULL,streamId:r,desiredSize:u.desiredSize}),d.promise},cancel:u=>{ht(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:ct.CANCEL,streamId:r,reason:wn(u)}),d.promise}},i)}destroy(){var e;(e=c(this,wc))==null||e.abort(),v(this,wc,null)}}wc=new WeakMap,Ai=new WeakSet,xR=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,Ai,_R).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===wp.DATA)s.resolve(e.data);else if(e.callback===wp.ERROR)s.reject(wn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:i,targetName:s,callback:wp.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:i,targetName:s,callback:wp.ERROR,callbackId:e.callbackId,reason:wn(a)})});return}if(e.streamId){E(this,Ai,TR).call(this,e);return}t(e.data)},TR=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:ct.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:ct.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){ht(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:ct.ERROR,streamId:t,reason:wn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ct.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:ct.START_COMPLETE,streamId:t,reason:wn(u)})})},_R=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case ct.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(wn(e.reason));break;case ct.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(wn(e.reason));break;case ct.PULL:if(!o){r.postMessage({sourceName:i,targetName:s,stream:ct.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||i1).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ct.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:ct.PULL_COMPLETE,streamId:t,reason:wn(u)})});break;case ct.ENQUEUE:if(ht(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case ct.CLOSE:if(ht(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),E(this,Ai,Zp).call(this,a,t);break;case ct.ERROR:ht(a,"error should have stream controller"),a.controller.error(wn(e.reason)),E(this,Ai,Zp).call(this,a,t);break;case ct.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(wn(e.reason)),E(this,Ai,Zp).call(this,a,t);break;case ct.CANCEL:if(!o)break;const l=wn(e.reason);Promise.try(o.onCancel||i1,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ct.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:ct.CANCEL_COMPLETE,streamId:t,reason:wn(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Zp=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Ih;class PR{constructor({enableHWA:e=!1}){S(this,Ih,!1);v(this,Ih,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!c(this,Ih)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ie("Abstract method `_createCanvas` called.")}}Ih=new WeakMap;class gj extends PR{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class RR{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ie("Abstract method `_fetch` called.")}}class IR extends RR{async _fetch(e){const t=await iy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ny(t)}}class NR{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var yo,Ac,qs,Ws,Kt,vo,bo,z,qt,Zu,xl,em,Tl,MR,Z0,_l,ed,td,eb,nd;class yj extends NR{constructor({docId:t,ownerDocument:i=globalThis.document}){super();S(this,z);S(this,yo);S(this,Ac);S(this,qs);S(this,Ws);S(this,Kt);S(this,vo);S(this,bo,0);v(this,Ws,t),v(this,Kt,i)}addFilter(t){if(!t)return"none";let i=c(this,z,qt).get(t);if(i)return i;const[s,r,a]=E(this,z,em).call(this,t),o=t.length===1?s:`${s}${r}${a}`;if(i=c(this,z,qt).get(o),i)return c(this,z,qt).set(t,i),i;const l=`g_${c(this,Ws)}_transfer_map_${rn(this,bo)._++}`,u=E(this,z,Tl).call(this,l);c(this,z,qt).set(t,u),c(this,z,qt).set(o,u);const d=E(this,z,_l).call(this,l);return E(this,z,td).call(this,s,r,a,d),u}addHCMFilter(t,i){var m;const s=`${t}-${i}`,r="base";let a=c(this,z,Zu).get(r);if((a==null?void 0:a.key)===s||(a?((m=a.filter)==null||m.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},c(this,z,Zu).set(r,a)),!t||!i))return a.url;const o=E(this,z,nd).call(this,t);t=K.makeHexColor(...o);const l=E(this,z,nd).call(this,i);if(i=K.makeHexColor(...l),c(this,z,xl).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const u=new Array(256);for(let y=0;y<=255;y++){const A=y/255;u[y]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=u.join(","),h=`g_${c(this,Ws)}_hcm_filter`,f=a.filter=E(this,z,_l).call(this,h);E(this,z,td).call(this,d,d,d,f),E(this,z,Z0).call(this,f);const p=(y,A)=>{const g=o[y]/255,b=l[y]/255,w=new Array(A+1);for(let C=0;C<=A;C++)w[C]=g+C/A*(b-g);return w.join(",")};return E(this,z,td).call(this,p(0,5),p(1,5),p(2,5),f),a.url=E(this,z,Tl).call(this,h),a.url}addAlphaFilter(t){let i=c(this,z,qt).get(t);if(i)return i;const[s]=E(this,z,em).call(this,[t]),r=`alpha_${s}`;if(i=c(this,z,qt).get(r),i)return c(this,z,qt).set(t,i),i;const a=`g_${c(this,Ws)}_alpha_map_${rn(this,bo)._++}`,o=E(this,z,Tl).call(this,a);c(this,z,qt).set(t,o),c(this,z,qt).set(r,o);const l=E(this,z,_l).call(this,a);return E(this,z,eb).call(this,s,l),o}addLuminosityFilter(t){let i=c(this,z,qt).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=E(this,z,em).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=c(this,z,qt).get(r),i)return c(this,z,qt).set(t,i),i;const a=`g_${c(this,Ws)}_luminosity_map_${rn(this,bo)._++}`,o=E(this,z,Tl).call(this,a);c(this,z,qt).set(t,o),c(this,z,qt).set(r,o);const l=E(this,z,_l).call(this,a);return E(this,z,MR).call(this,l),t&&E(this,z,eb).call(this,s,l),o}addHighlightHCMFilter(t,i,s,r,a){var b;const o=`${i}-${s}-${r}-${a}`;let l=c(this,z,Zu).get(t);if((l==null?void 0:l.key)===o||(l?((b=l.filter)==null||b.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},c(this,z,Zu).set(t,l)),!i||!s))return l.url;const[u,d]=[i,s].map(E(this,z,nd).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,m]=[r,a].map(E(this,z,nd).bind(this));f<h&&([h,f,p,m]=[f,h,m,p]),c(this,z,xl).style.color="";const y=(w,C,x)=>{const _=new Array(256),P=(f-h)/x,R=w/255,N=(C-w)/(255*x);let D=0;for(let U=0;U<=x;U++){const fe=Math.round(h+U*P),Ae=R+U*N;for(let ae=D;ae<=fe;ae++)_[ae]=Ae;D=fe+1}for(let U=D;U<256;U++)_[U]=_[D-1];return _.join(",")},A=`g_${c(this,Ws)}_hcm_${t}_filter`,g=l.filter=E(this,z,_l).call(this,A);return E(this,z,Z0).call(this,g),E(this,z,td).call(this,y(p[0],m[0],5),y(p[1],m[1],5),y(p[2],m[2],5),g),l.url=E(this,z,Tl).call(this,A),l.url}destroy(t=!1){var i,s,r,a;t&&((i=c(this,vo))!=null&&i.size)||((s=c(this,qs))==null||s.parentNode.parentNode.remove(),v(this,qs,null),(r=c(this,Ac))==null||r.clear(),v(this,Ac,null),(a=c(this,vo))==null||a.clear(),v(this,vo,null),v(this,bo,0))}}yo=new WeakMap,Ac=new WeakMap,qs=new WeakMap,Ws=new WeakMap,Kt=new WeakMap,vo=new WeakMap,bo=new WeakMap,z=new WeakSet,qt=function(){return c(this,Ac)||v(this,Ac,new Map)},Zu=function(){return c(this,vo)||v(this,vo,new Map)},xl=function(){if(!c(this,qs)){const t=c(this,Kt).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=c(this,Kt).createElementNS(Ms,"svg");s.setAttribute("width",0),s.setAttribute("height",0),v(this,qs,c(this,Kt).createElementNS(Ms,"defs")),t.append(s),s.append(c(this,qs)),c(this,Kt).body.append(t)}return c(this,qs)},em=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[i,s,r]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=i[u]/255,o[u]=s[u]/255,l[u]=r[u]/255;return[a.join(","),o.join(","),l.join(",")]},Tl=function(t){if(c(this,yo)===void 0){v(this,yo,"");const i=c(this,Kt).URL;i!==c(this,Kt).baseURI&&(sy(i)?re('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,yo,i.split("#",1)[0]))}return`url(${c(this,yo)}#${t})`},MR=function(t){const i=c(this,Kt).createElementNS(Ms,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Z0=function(t){const i=c(this,Kt).createElementNS(Ms,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},_l=function(t){const i=c(this,Kt).createElementNS(Ms,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),c(this,z,xl).append(i),i},ed=function(t,i,s){const r=c(this,Kt).createElementNS(Ms,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},td=function(t,i,s,r){const a=c(this,Kt).createElementNS(Ms,"feComponentTransfer");r.append(a),E(this,z,ed).call(this,a,"feFuncR",t),E(this,z,ed).call(this,a,"feFuncG",i),E(this,z,ed).call(this,a,"feFuncB",s)},eb=function(t,i){const s=c(this,Kt).createElementNS(Ms,"feComponentTransfer");i.append(s),E(this,z,ed).call(this,s,"feFuncA",t)},nd=function(t){return c(this,z,xl).style.color=t,RA(getComputedStyle(c(this,z,xl)).getPropertyValue("color"))};class kR{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ie("Abstract method `_fetch` called.")}}class DR extends kR{async _fetch(e){const t=await iy(e,"arraybuffer");return new Uint8Array(t)}}tn&&re("Please use the `legacy` build in Node.js environments.");async function LR(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class vj extends NR{}class bj extends PR{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class wj extends RR{async _fetch(e){return LR(e)}}class Aj extends kR{async _fetch(e){return LR(e)}}const Jt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function tb(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class NA{getPattern(){Ie("Abstract method `getPattern` called.")}}class Sj extends NA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Jt.STROKE||s===Jt.FILL){const a=t.current.getClippedPathBoundingBox(s,ze(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),i=K.transform(i,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),tb(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(i);r.setTransform(h)}else tb(e,this._bbox),r=this._createGradient(e);return r}}function lv(n,e,t,i,s,r,a,o){const l=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;l[t+1]>l[i+1]&&(f=t,t=i,i=f,f=r,r=a,a=f),l[i+1]>l[s+1]&&(f=i,i=s,s=f,f=a,a=o,o=f),l[t+1]>l[i+1]&&(f=t,t=i,i=f,f=r,r=a,a=f);const p=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,A=(l[i+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,b=(l[s+1]+e.offsetY)*e.scaleY;if(m>=b)return;const w=u[r],C=u[r+1],x=u[r+2],_=u[a],P=u[a+1],R=u[a+2],N=u[o],D=u[o+1],U=u[o+2],fe=Math.round(m),Ae=Math.round(b);let ae,te,F,B,M,T,Y,pe;for(let he=fe;he<=Ae;he++){if(he<A){const Ee=he<m?0:(m-he)/(m-A);ae=p-(p-y)*Ee,te=w-(w-_)*Ee,F=C-(C-P)*Ee,B=x-(x-R)*Ee}else{let Ee;he>b?Ee=1:A===b?Ee=0:Ee=(A-he)/(A-b),ae=y-(y-g)*Ee,te=_-(_-N)*Ee,F=P-(P-D)*Ee,B=R-(R-U)*Ee}let De;he<m?De=0:he>b?De=1:De=(m-he)/(m-b),M=p-(p-g)*De,T=w-(w-N)*De,Y=C-(C-D)*De,pe=x-(x-U)*De;const Vt=Math.round(Math.min(ae,M)),Ci=Math.round(Math.max(ae,M));let je=h*he+Vt*4;for(let Ee=Vt;Ee<=Ci;Ee++)De=(ae-Ee)/(ae-M),De<0?De=0:De>1&&(De=1),d[je++]=te-(te-T)*De|0,d[je++]=F-(F-Y)*De|0,d[je++]=B-(B-pe)*De|0,d[je++]=255}}function Ej(n,e,t){const i=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,u=o-1;for(r=0;r<l;r++){let d=r*o;for(let h=0;h<u;h++,d++)lv(n,t,i[d],i[d+1],i[d+o],s[d],s[d+1],s[d+o]),lv(n,t,i[d+o+1],i[d+1],i[d+o],s[d+o+1],s[d+1],s[d+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)lv(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class Cj extends NA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=u/h,m=d/f,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/m},A=h+2*2,g=f+2*2,b=i.getCanvas("mesh",A,g),w=b.context,C=w.createImageData(h,f);if(t){const _=C.data;for(let P=0,R=_.length;P<R;P+=4)_[P]=t[0],_[P+1]=t[1],_[P+2]=t[2],_[P+3]=255}for(const _ of this._figures)Ej(C,_,y);return w.putImageData(C,2,2),{canvas:b.canvas,offsetX:o-2*p,offsetY:l-2*m,scaleX:p,scaleY:m}}getPattern(e,t,i,s){tb(e,this._bbox);let r;if(s===Jt.SHADING)r=K.singularValueDecompose2dScale(ze(e));else if(r=K.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=K.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,s===Jt.SHADING?null:this._background,t.cachedCanvases);return s!==Jt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class xj extends NA{getPattern(){return"hotpink"}}function Tj(n){switch(n[0]){case"RadialAxial":return new Sj(n);case"Mesh":return new Cj(n);case"Dummy":return new xj}throw new Error(`Unknown IR type: ${n[0]}`)}const s1={COLORED:1,UNCOLORED:2},pg=class pg{constructor(e,t,i,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),ty("TilingType: "+r);const d=t[0],h=t[1],f=t[2],p=t[3],m=f-d,y=p-h,A=K.singularValueDecompose2dScale(this.matrix),g=K.singularValueDecompose2dScale(this.baseTransform),b=A[0]*g[0],w=A[1]*g[1];let C=m,x=y,_=!1,P=!1;const R=Math.ceil(l*b),N=Math.ceil(u*w),D=Math.ceil(m*b),U=Math.ceil(y*w);R>=D?C=l:_=!0,N>=U?x=u:P=!0;const fe=this.getSizeAndScale(C,this.ctx.canvas.width,b),Ae=this.getSizeAndScale(x,this.ctx.canvas.height,w),ae=e.cachedCanvases.getCanvas("pattern",fe.size,Ae.size),te=ae.context,F=o.createCanvasGraphics(te);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,s,a),te.translate(-fe.scale*d,-Ae.scale*h),F.transform(fe.scale,0,0,Ae.scale,0,0),te.save(),this.clipBbox(F,d,h,f,p),F.baseTransform=ze(F.ctx),F.executeOperatorList(i),F.endDrawing(),te.restore(),_||P){const B=ae.canvas;_&&(C=l),P&&(x=u);const M=this.getSizeAndScale(C,this.ctx.canvas.width,b),T=this.getSizeAndScale(x,this.ctx.canvas.height,w),Y=M.size,pe=T.size,he=e.cachedCanvases.getCanvas("pattern-workaround",Y,pe),De=he.context,Vt=_?Math.floor(m/l):0,Ci=P?Math.floor(y/u):0;for(let je=0;je<=Vt;je++)for(let Ee=0;Ee<=Ci;Ee++)De.drawImage(B,Y*je,pe*Ee,Y,pe,0,0,Y,pe);return{canvas:he.canvas,scaleX:M.scale,scaleY:T.scale,offsetX:d,offsetY:h}}return{canvas:ae.canvas,scaleX:fe.scale,scaleY:Ae.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,t,i){const s=Math.max(pg.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const a=s-t,o=r-i;e.ctx.rect(t,i,a,o),e.current.updateRectMinMax(ze(e.ctx),[t,i,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case s1.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case s1.UNCOLORED:const o=K.makeHexColor(i[0],i[1],i[2]);s.fillStyle=o,s.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new J3(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let r=i;s!==Jt.SHADING&&(r=K.transform(r,t.baseTransform),this.matrix&&(r=K.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};Q(pg,"MAX_PATTERN_SIZE",3e3);let nb=pg;function _j({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=pn.isLittleEndian?4278190080:255,[l,u]=a?[r,o]:[o,r],d=i>>3,h=i&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<s;m++){for(const A=e+d;e<A;e++){const g=e<f?n[e]:255;t[p++]=g&128?u:l,t[p++]=g&64?u:l,t[p++]=g&32?u:l,t[p++]=g&16?u:l,t[p++]=g&8?u:l,t[p++]=g&4?u:l,t[p++]=g&2?u:l,t[p++]=g&1?u:l}if(h===0)continue;const y=e<f?n[e++]:255;for(let A=0;A<h;A++)t[p++]=y&1<<7-A?u:l}return{srcPos:e,destPos:p}}const r1=16,a1=100,Pj=15,o1=10,l1=1e3,xn=16;function Rj(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,a,o,l){e.transform(i,s,r,a,o,l),this.__originalTransform(i,s,r,a,o,l)},n.setTransform=function(i,s,r,a,o,l){e.setTransform(i,s,r,a,o,l),this.__originalSetTransform(i,s,r,a,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,a,o){e.bezierCurveTo(t,i,s,r,a,o),this.__originalBezierCurveTo(t,i,s,r,a,o)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Ij{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ap(n,e,t,i,s,r,a,o,l,u){const[d,h,f,p,m,y]=ze(n);if(h===0&&f===0){const b=a*d+m,w=Math.round(b),C=o*p+y,x=Math.round(C),_=(a+l)*d+m,P=Math.abs(Math.round(_)-w)||1,R=(o+u)*p+y,N=Math.abs(Math.round(R)-x)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),w,x),n.drawImage(e,t,i,s,r,0,0,P,N),n.setTransform(d,h,f,p,m,y),[P,N]}if(d===0&&p===0){const b=o*f+m,w=Math.round(b),C=a*h+y,x=Math.round(C),_=(o+u)*f+m,P=Math.abs(Math.round(_)-w)||1,R=(a+l)*h+y,N=Math.abs(Math.round(R)-x)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,w,x),n.drawImage(e,t,i,s,r,0,0,N,P),n.setTransform(d,h,f,p,m,y),[N,P]}n.drawImage(e,t,i,s,r,a,o,l,u);const A=Math.hypot(d,h),g=Math.hypot(f,p);return[A*l,g*u]}function Nj(n){const{width:e,height:t}=n;if(e>l1||t>l1)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,l,u;const d=e+7&-8;let h=new Uint8Array(d*t),f=0;for(const g of n.data){let b=128;for(;b>0;)h[f++]=g&b?0:255,b>>=1}let p=0;for(f=0,h[f]!==0&&(a[0]=1,++p),l=1;l<e;l++)h[f]!==h[f+1]&&(a[l]=h[f]?2:1,++p),f++;for(h[f]!==0&&(a[l]=2,++p),o=1;o<t;o++){f=o*d,u=o*r,h[f-d]!==h[f]&&(a[u]=h[f]?1:8,++p);let g=(h[f]?4:0)+(h[f-d]?8:0);for(l=1;l<e;l++)g=(g>>2)+(h[f+1]?4:0)+(h[f-d+1]?8:0),s[g]&&(a[u+l]=s[g],++p),f++;if(h[f-d]!==h[f]&&(a[u+l]=h[f]?2:4,++p),p>i)return null}for(f=d*(t-1),u=o*r,h[f]!==0&&(a[u]=8,++p),l=1;l<e;l++)h[f]!==h[f+1]&&(a[u+l]=h[f]?4:8,++p),f++;if(h[f]!==0&&(a[u+l]=4,++p),p>i)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),y=new Path2D;for(o=0;p&&o<=t;o++){let g=o*r;const b=g+e;for(;g<b&&!a[g];)g++;if(g===b)continue;y.moveTo(g%r,o);const w=g;let C=a[g];do{const x=m[C];do g+=x;while(!a[g]);const _=a[g];_!==5&&_!==10?(C=_,a[g]=0):(C=_&51*C>>4,a[g]&=C>>2|C<<2),y.lineTo(g%r,g/r|0),a[g]||--p}while(w!==g);--o}return h=null,a=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(y),g.beginPath(),g.restore()}}class c1{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=GP,this.textMatrixScale=1,this.fontMatrix=I0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Gt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=K.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=K.applyTransform(t,e),s=K.applyTransform(t.slice(2),e),r=K.applyTransform([t[0],t[3]],e),a=K.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],a[1])}updateScalingPathMinMax(e,t){K.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,r,a,o,l,u,d){const h=K.bezierBoundingBox(t,i,s,r,a,o,l,u,d);d||this.updateRectMinMax(e,h)}getPathBoundingBox(e=Jt.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Jt.STROKE){t||Ie("Stroke bounding box must include transform.");const s=K.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const e=K.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Jt.FILL,t=null){return K.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function u1(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%xn,r=(t-s)/xn,a=s===0?r:r+1,o=n.createImageData(i,xn);let l=0,u;const d=e.data,h=o.data;let f,p,m,y;if(e.kind===Hp.GRAYSCALE_1BPP){const A=d.byteLength,g=new Uint32Array(h.buffer,0,h.byteLength>>2),b=g.length,w=i+7>>3,C=4294967295,x=pn.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<r?xn:s,u=0,p=0;p<m;p++){const _=A-l;let P=0;const R=_>w?i:_*8-7,N=R&-8;let D=0,U=0;for(;P<N;P+=8)U=d[l++],g[u++]=U&128?C:x,g[u++]=U&64?C:x,g[u++]=U&32?C:x,g[u++]=U&16?C:x,g[u++]=U&8?C:x,g[u++]=U&4?C:x,g[u++]=U&2?C:x,g[u++]=U&1?C:x;for(;P<R;P++)D===0&&(U=d[l++],D=128),g[u++]=U&D?C:x,D>>=1}for(;u<b;)g[u++]=0;n.putImageData(o,0,f*xn)}}else if(e.kind===Hp.RGBA_32BPP){for(p=0,y=i*xn*4,f=0;f<r;f++)h.set(d.subarray(l,l+y)),l+=y,n.putImageData(o,0,p),p+=xn;f<a&&(y=i*s*4,h.set(d.subarray(l,l+y)),n.putImageData(o,0,p))}else if(e.kind===Hp.RGB_24BPP)for(m=xn,y=i*m,f=0;f<a;f++){for(f>=r&&(m=s,y=i*m),u=0,p=y;p--;)h[u++]=d[l++],h[u++]=d[l++],h[u++]=d[l++],h[u++]=255;n.putImageData(o,0,f*xn)}else throw new Error(`bad image kind: ${e.kind}`)}function d1(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%xn,r=(t-s)/xn,a=s===0?r:r+1,o=n.createImageData(i,xn);let l=0;const u=e.data,d=o.data;for(let h=0;h<a;h++){const f=h<r?xn:s;({srcPos:l}=_j({src:u,srcPos:l,dest:d,width:i,height:f,nonBlackColor:0})),n.putImageData(o,0,h*xn)}}function Uu(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Sp(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!tn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function h1(n,e){if(e)return!0;const t=K.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*_a.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const Mj=["butt","round","square"],kj=["miter","round","bevel"],Dj={},f1={};var Yi,ib,sb,rb;const OA=class OA{constructor(e,t,i,s,r,{optionalContentConfig:a,markedContentStack:o=null},l,u){S(this,Yi);this.ctx=e,this.current=new c1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Ij(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...ze(this.compositeCtx))}this.ctx.save(),Sp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ze(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,a=e.fnArray;let o=t||0;const l=r.length;if(l===o)return o;const u=l-o>o1&&typeof i=="function",d=u?Date.now()+Pj:0;let h=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,i),o;if(m=a[o],m!==Ii.dependency)this[m].apply(this,r[o]);else for(const y of r[o]){const A=y.startsWith("g_")?f:p;if(!A.has(y))return A.get(y,i),o}if(o++,o===l)return o;if(u&&++h>o1){if(Date.now()>d)return i(),o;h=0}}}endDrawing(){E(this,Yi,ib).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,Yi,sb).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,l=s,u="prescale1",d,h;for(;r>2&&o>1||a>2&&l>1;){let f=o,p=l;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,o,l,0,0,f,p),e=d.canvas,o=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,a=this.current.patternFill,o=ze(t);let l,u,d,h;if((e.bitmap||e.data)&&e.count>1){const R=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(R),l||(l=new Map,this._cachedBitmapsMap.set(R,l));const N=l.get(u);if(N&&!a){const D=Math.round(Math.min(o[0],o[2])+o[4]),U=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:N,offsetX:D,offsetY:U}}d=N}d||(h=this.cachedCanvases.getCanvas("maskCanvas",i,s),d1(h.context,e));let f=K.transform(o,[1/i,0,0,-1/s,0,0]);f=K.transform(f,[1,0,0,1,0,-s]);const[p,m,y,A]=K.getAxialAlignedBoundingBox([0,0,i,s],f),g=Math.round(y-p)||1,b=Math.round(A-m)||1,w=this.cachedCanvases.getCanvas("fillCanvas",g,b),C=w.context,x=p,_=m;C.translate(-x,-_),C.transform(...f),d||(d=this._scaleImage(h.canvas,is(C)),d=d.img,l&&a&&l.set(u,d)),C.imageSmoothingEnabled=h1(ze(C),e.interpolate),Ap(C,d,0,0,d.width,d.height,0,0,i,s),C.globalCompositeOperation="source-in";const P=K.transform(is(C),[1,0,0,1,-x,-_]);return C.fillStyle=a?r.getPattern(t,this,P,Jt.FILL):r,C.fillRect(0,0,i,s),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,w.canvas)),{canvas:w.canvas,offsetX:Math.round(x),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Mj[e]}setLineJoin(e){this.ctx.lineJoin=kj[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...ze(this.suspendedCtx)),Uu(this.suspendedCtx,r),Rj(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Uu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],a=s[1],o=s[2]-r,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,i,o,l,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,a,o,l,u,d,h){let f=e.canvas,p=l-d,m=u-h;if(a){const A=K.makeHexColor(...a);if(p<0||m<0||p+i>f.width||m+s>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",i,s),b=g.context;b.drawImage(f,-p,-m),b.globalCompositeOperation="destination-atop",b.fillStyle=A,b.fillRect(0,0,i,s),b.globalCompositeOperation="source-over",f=g.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,m,i,s),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=A,e.fillRect(p,m,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const y=new Path2D;y.rect(l,u,i,s),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,i,s,l,u,i,s),t.restore()}save(){this.inSMaskMode?(Uu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Uu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,r,a){this.ctx.transform(e,t,i,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,r=this.current;let a=r.x,o=r.y,l,u;const d=ze(s),h=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,f=h?i.slice(0):null;for(let p=0,m=0,y=e.length;p<y;p++)switch(e[p]|0){case Ii.rectangle:a=t[m++],o=t[m++];const A=t[m++],g=t[m++],b=a+A,w=o+g;s.moveTo(a,o),A===0||g===0?s.lineTo(b,w):(s.lineTo(b,o),s.lineTo(b,w),s.lineTo(a,w)),h||r.updateRectMinMax(d,[a,o,b,w]),s.closePath();break;case Ii.moveTo:a=t[m++],o=t[m++],s.moveTo(a,o),h||r.updatePathMinMax(d,a,o);break;case Ii.lineTo:a=t[m++],o=t[m++],s.lineTo(a,o),h||r.updatePathMinMax(d,a,o);break;case Ii.curveTo:l=a,u=o,a=t[m+4],o=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),r.updateCurvePathMinMax(d,l,u,t[m],t[m+1],t[m+2],t[m+3],a,o,f),m+=6;break;case Ii.curveTo2:l=a,u=o,s.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(d,l,u,a,o,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],o=t[m+3],m+=4;break;case Ii.curveTo3:l=a,u=o,a=t[m+2],o=t[m+3],s.bezierCurveTo(t[m],t[m+1],a,o,a,o),r.updateCurvePathMinMax(d,l,u,t[m],t[m+1],a,o,a,o,f),m+=4;break;case Ii.closePath:s.closePath();break}h&&r.updateScalingPathMinMax(d,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,is(t),Jt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,is(t),Jt.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Dj}eoClip(){this.pendingClip=f1}beginText(){this.current.textMatrix=GP,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const i=new Path2D,s=t.getTransform().invertSelf();for(const{transform:r,x:a,y:o,fontSize:l,path:u}of e)i.addPath(u,new DOMMatrix(r).preMultiplySelf(s).translate(a,o).scale(l,-l));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||I0,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&re("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=((d=i.systemFontInfo)==null?void 0:d.css)||`"${r}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let u=t;t<r1?u=r1:t>a1&&(u=a1),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,r,a){this.current.textMatrix=[e,t,i,s,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s,r){const a=this.ctx,o=this.current,l=o.font,u=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,h=u&Gt.FILL_STROKE_MASK,f=!!(u&Gt.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile,m=o.patternStroke&&!l.missingFile;let y;if((l.disableFontFace||f||p||m)&&(y=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p||m){if(a.save(),a.translate(t,i),a.scale(d,-d),h===Gt.FILL||h===Gt.FILL_STROKE)if(s){const A=a.getTransform();a.setTransform(...s),a.fill(E(this,Yi,rb).call(this,y,A,s))}else a.fill(y);if(h===Gt.STROKE||h===Gt.FILL_STROKE)if(r){const A=a.getTransform();a.setTransform(...r),a.stroke(E(this,Yi,rb).call(this,y,A,r))}else a.lineWidth/=d,a.stroke(y);a.restore()}else(h===Gt.FILL||h===Gt.FILL_STROKE)&&a.fillText(e,t,i),(h===Gt.STROKE||h===Gt.FILL_STROKE)&&a.strokeText(e,t,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ze(a),x:t,y:i,fontSize:d,path:y})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return ce(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,d=t.textHScale*u,h=e.length,f=i.vertical,p=f?1:-1,m=i.defaultVMetrics,y=s*t.fontMatrix[0],A=t.textRenderingMode===Gt.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(d,-1):r.scale(d,1);let g,b;if(t.patternFill){r.save();const P=t.fillColor.getPattern(r,this,is(r),Jt.FILL);g=ze(r),r.restore(),r.fillStyle=P}if(t.patternStroke){r.save();const P=t.strokeColor.getPattern(r,this,is(r),Jt.STROKE);b=ze(r),r.restore(),r.strokeStyle=P}let w=t.lineWidth;const C=t.textMatrixScale;if(C===0||w===0){const P=t.textRenderingMode&Gt.FILL_STROKE_MASK;(P===Gt.STROKE||P===Gt.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=C;if(a!==1&&(r.scale(a,a),w/=a),r.lineWidth=w,i.isInvalidPDFjsFont){const P=[];let R=0;for(const N of e)P.push(N.unicode),R+=N.width;r.fillText(P.join(""),0,0),t.x+=R*y*d,r.restore(),this.compose();return}let x=0,_;for(_=0;_<h;++_){const P=e[_];if(typeof P=="number"){x+=p*P*s/1e3;continue}let R=!1;const N=(P.isSpace?l:0)+o,D=P.fontChar,U=P.accent;let fe,Ae,ae=P.width;if(f){const F=P.vmetric||m,B=-(P.vmetric?F[1]:ae*.5)*y,M=F[2]*y;ae=F?-F[0]:ae,fe=B/a,Ae=(x+M)/a}else fe=x/a,Ae=0;if(i.remeasure&&ae>0){const F=r.measureText(D).width*1e3/s*a;if(ae<F&&this.isFontSubpixelAAEnabled){const B=ae/F;R=!0,r.save(),r.scale(B,1),fe/=B}else ae!==F&&(fe+=(ae-F)/2e3*s/a)}if(this.contentVisible&&(P.isInFont||i.missingFile)){if(A&&!U)r.fillText(D,fe,Ae);else if(this.paintChar(D,fe,Ae,g,b),U){const F=fe+s*U.offset.x/a,B=Ae-s*U.offset.y/a;this.paintChar(U.fontChar,F,B,g,b)}}const te=f?ae*y-N*u:ae*y+N*u;x+=te,R&&r.restore()}f?t.y-=x:t.x+=x*d,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,a=i.fontDirection,o=s.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||I0,f=e.length,p=i.textRenderingMode===Gt.INVISIBLE;let m,y,A,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,a),m=0;m<f;++m){if(y=e[m],typeof y=="number"){g=o*y*r/1e3,this.ctx.translate(g,0),i.x+=g*d;continue}const b=(y.isSpace?u:0)+l,w=s.charProcOperatorList[y.operatorListId];if(!w){re(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(r,r),t.transform(...h),this.executeOperatorList(w),this.restore()),A=K.applyTransform([y.width,0],h)[0]*r+b,t.translate(A,0),i.x+=A*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,a){this.ctx.rect(i,s,r-i,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||ze(this.ctx),r={createCanvasGraphics:a=>new OA(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new nb(e,i,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=K.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=K.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=Tj(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,is(t),Jt.SHADING);const s=is(t);if(s){const{width:r,height:a}=t.canvas,[o,l,u,d]=K.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(o,l,u-o,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ie("Should not call beginInlineImage")}beginImageData(){Ie("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ze(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(ze(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||ty("TODO: Support non-isolated groups."),e.knockout&&re("Knockout groups not supported.");const i=ze(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=K.getAxialAlignedBoundingBox(e.bbox,ze(t));const r=[0,0,t.canvas.width,t.canvas.height];s=K.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,l,u),f=h.context;f.translate(-a,-o),f.transform(...i),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Uu(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=ze(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=K.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(E(this,Yi,ib).call(this),Sp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,u]=K.singularValueDecompose2dScale(ze(this.ctx)),{viewportScale:d}=this,h=Math.ceil(a*this.outputScaleX*d),f=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,o*u),Sp(this.ctx)}else Sp(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new c1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,Yi,sb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=Nj(e)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=ze(o);o.transform(t,i,s,r,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let d=0,h=a.length;d<h;d+=2){const f=K.transform(l,[t,i,s,r,a[d],a[d+1]]),[p,m]=K.applyTransform([0,0],f);o.drawImage(u.canvas,p,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:a,width:o,height:l,transform:u}=r,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=d.context;h.save();const f=this.getObject(a,r);d1(h,f),h.globalCompositeOperation="source-in",h.fillStyle=s?i.getPattern(h,this,is(t),Jt.FILL):i,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...u),t.scale(1,-1),Ap(t,d.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){re("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){re("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let u=0,d=s.length;u<d;u+=2)l.push({transform:[t,0,0,i,s[u],s[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!tn){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;u1(l,e),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,is(s));s.imageSmoothingEnabled=h1(ze(s),e.interpolate),Ap(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;u1(l,e),s=this.applyTransferMapsToCanvas(l)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),Ap(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===f1?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ze(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let a,o;if(i===0&&s===0){const l=Math.abs(t),u=Math.abs(r);if(l===u)if(e===0)a=o=1/l;else{const d=l*e;a=o=d<1?1/d:1}else if(e===0)a=1/l,o=1/u;else{const d=l*e,h=u*e;a=d<1?1/d:1,o=h<1?1/h:1}}else{const l=Math.abs(t*r-i*s),u=Math.hypot(t,i),d=Math.hypot(s,r);if(e===0)a=d/l,o=u/l;else{const h=e*l;a=d>h?d/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,r),a.length>0){const o=Math.max(s,r);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Yi=new WeakSet,ib=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},sb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},rb=function(e,t,i){const s=new Path2D;return s.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),s};let ic=OA;for(const n in Ii)ic.prototype[n]!==void 0&&(ic.prototype[Ii[n]]=ic.prototype[n]);var Nh,Mh;class ur{static get workerPort(){return c(this,Nh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");v(this,Nh,e)}static get workerSrc(){return c(this,Mh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");v(this,Mh,e)}}Nh=new WeakMap,Mh=new WeakMap,S(ur,Nh,null),S(ur,Mh,"");var wo,kh;class Lj{constructor({parsedData:e,rawData:t}){S(this,wo);S(this,kh);v(this,wo,e),v(this,kh,t)}getRaw(){return c(this,kh)}get(e){return c(this,wo).get(e)??null}getAll(){return CA(c(this,wo))}has(e){return c(this,wo).has(e)}}wo=new WeakMap,kh=new WeakMap;const Pl=Symbol("INTERNAL");var Dh,Lh,Oh,Sc;class Oj{constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){S(this,Dh,!1);S(this,Lh,!1);S(this,Oh,!1);S(this,Sc,!0);v(this,Dh,!!(e&Xn.DISPLAY)),v(this,Lh,!!(e&Xn.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(c(this,Oh))return c(this,Sc);if(!c(this,Sc))return!1;const{print:e,view:t}=this.usage;return c(this,Dh)?(t==null?void 0:t.viewState)!=="OFF":c(this,Lh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Pl&&Ie("Internal method `_setVisible` called."),v(this,Oh,i),v(this,Sc,t)}}Dh=new WeakMap,Lh=new WeakMap,Oh=new WeakMap,Sc=new WeakMap;var Wr,xe,Ec,Cc,Fh,ab;class Fj{constructor(e,t=Xn.DISPLAY){S(this,Fh);S(this,Wr,null);S(this,xe,new Map);S(this,Ec,null);S(this,Cc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,v(this,Cc,e.order);for(const i of e.groups)c(this,xe).set(i.id,new Oj(t,i));if(e.baseState==="OFF")for(const i of c(this,xe).values())i._setVisible(Pl,!1);for(const i of e.on)c(this,xe).get(i)._setVisible(Pl,!0);for(const i of e.off)c(this,xe).get(i)._setVisible(Pl,!1);v(this,Ec,this.getHash())}}isVisible(e){if(c(this,xe).size===0)return!0;if(!e)return ty("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,xe).has(e.id)?c(this,xe).get(e.id).visible:(re(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,Fh,ab).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,xe).has(t))return re(`Optional content group not found: ${t}`),!0;if(c(this,xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,xe).has(t))return re(`Optional content group not found: ${t}`),!0;if(!c(this,xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,xe).has(t))return re(`Optional content group not found: ${t}`),!0;if(!c(this,xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,xe).has(t))return re(`Optional content group not found: ${t}`),!0;if(c(this,xe).get(t).visible)return!1}return!0}return re(`Unknown optional content policy ${e.policy}.`),!0}return re(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var r;const s=c(this,xe).get(e);if(!s){re(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((r=c(this,xe).get(o))==null||r._setVisible(Pl,!1,!0));s._setVisible(Pl,!!t,!0),v(this,Wr,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=c(this,xe).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}v(this,Wr,null)}get hasInitialVisibility(){return c(this,Ec)===null||this.getHash()===c(this,Ec)}getOrder(){return c(this,xe).size?c(this,Cc)?c(this,Cc).slice():[...c(this,xe).keys()]:null}getGroups(){return c(this,xe).size>0?CA(c(this,xe)):null}getGroup(e){return c(this,xe).get(e)||null}getHash(){if(c(this,Wr)!==null)return c(this,Wr);const e=new SR;for(const[t,i]of c(this,xe))e.update(`${t}:${i.visible}`);return v(this,Wr,e.hexdigest())}}Wr=new WeakMap,xe=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Fh=new WeakSet,ab=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let a;if(Array.isArray(r))a=E(this,Fh,ab).call(this,r);else if(c(this,xe).has(r))a=c(this,xe).get(r).visible;else return re(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class Bj{constructor(e,{disableRange:t=!1,disableStream:i=!1}){ht(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});ht(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ht(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new jj(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Uj(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class jj{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=_A(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Uj{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Vj(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let d=o(t);return d=unescape(d),d=l(d),d=u(d),r(d)}if(t=a(n),t){const d=u(t);return r(d)}if(t=i("filename","i").exec(n),t){t=t[1];let d=o(t);return d=u(d),r(d)}function i(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=ny(h);h=f.decode(p),e=!1}catch{}}return h}function r(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function a(d){const h=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,y,A,g]=f;if(y=parseInt(y,10),y in h){if(y===0)break;continue}h[y]=[A,g]}const m=[];for(let y=0;y<h.length&&y in h;++y){let[A,g]=h[y];g=o(g),A&&(g=unescape(g),y===0&&(g=l(g))),m.push(g)}return m.join("")}function o(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),m=d.slice(h+1).replace(/^[^']*'/,"");return s(f,m)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,A){return String.fromCharCode(parseInt(A,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function OR(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function ry(n){try{return new URL(n).origin}catch{}return null}function FR({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function BR(n){const e=n.get("Content-Disposition");if(e){let t=Vj(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(_A(t))return t}return null}function ay(n,e){return n===404||n===0&&e.startsWith("file:")?new eh('Missing PDF "'+e+'".'):new Qm(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function jR(n){return n===200||n===206}function UR(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function VR(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(re(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class p1{constructor(e){Q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=OR(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ht(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new zj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new $j(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class zj{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,UR(i,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=ry(r.url),!jR(r.status))throw ay(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:l}=FR({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=BR(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ta("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:VR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class $j{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const a=s.url;fetch(a,UR(r,this._withCredentials,this._abortController)).then(o=>{const l=ry(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!jR(o.status))throw ay(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:VR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const cv=200,uv=206;function Hj(n){const e=n.response;return typeof e!="string"?e:ny(e).buffer}class Gj{constructor({url:e,httpHeaders:t,withCredentials:i}){Q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=OR(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=uv):s.expectedStatus=cv,t.responseType="arraybuffer",ht(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||cv;if(!(r===cv&&i.expectedStatus===uv)&&r!==i.expectedStatus){i.onError(s.status);return}const o=Hj(s);if(r===uv){const l=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?i.onDone({begin:parseInt(u[1],10),chunk:o}):(re('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class qj{constructor(e){this._source=e,this._manager=new Gj(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ht(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Wj(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new Xj(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Wj{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ry(t.responseURL);const i=t.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=FR({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=BR(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ay(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Xj{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=ry((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=ay(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Kj=/^[a-z][a-z0-9\-+.]+:/i;function Yj(n){if(Kj.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class Qj{constructor(e){this.source=e,this.url=Yj(e.url),ht(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ht(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Jj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Zj(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Jj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new eh(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ta("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Zj{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const eU=1e5,bn=30,tU=.8;var E1,Xr,En,Bh,jh,Ao,Xs,Uh,Vh,So,xc,Tc,Kr,_c,zh,Pc,Eo,$h,Hh,Co,xo,Gh,Yr,Rc,Er,zR,$R,ob,ei,tm,lb,HR,GR;const gt=class gt{constructor({textContentSource:e,container:t,viewport:i}){S(this,Er);S(this,Xr,Promise.withResolvers());S(this,En,null);S(this,Bh,!1);S(this,jh,!!((E1=globalThis.FontInspector)!=null&&E1.enabled));S(this,Ao,null);S(this,Xs,null);S(this,Uh,0);S(this,Vh,0);S(this,So,null);S(this,xc,null);S(this,Tc,0);S(this,Kr,0);S(this,_c,Object.create(null));S(this,zh,[]);S(this,Pc,null);S(this,Eo,[]);S(this,$h,new WeakMap);S(this,Hh,null);var l;if(e instanceof ReadableStream)v(this,Pc,e);else if(typeof e=="object")v(this,Pc,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,En,v(this,xc,t)),v(this,Kr,i.scale*(globalThis.devicePixelRatio||1)),v(this,Tc,i.rotation),v(this,Xs,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=i.rawDims;v(this,Hh,[1,0,0,-1,-a,o+r]),v(this,Vh,s),v(this,Uh,r),E(l=gt,ei,HR).call(l),ml(t,i),c(this,Xr).promise.finally(()=>{c(gt,Rc).delete(this),v(this,Xs,null),v(this,_c,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return ce(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,So).read().then(({value:t,done:i})=>{if(i){c(this,Xr).resolve();return}c(this,Ao)??v(this,Ao,t.lang),Object.assign(c(this,_c),t.styles),E(this,Er,zR).call(this,t.items),e()},c(this,Xr).reject)};return v(this,So,c(this,Pc).getReader()),c(gt,Rc).add(this),e(),c(this,Xr).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==c(this,Tc)&&(t==null||t(),v(this,Tc,s),ml(c(this,xc),{rotation:s})),i!==c(this,Kr)){t==null||t(),v(this,Kr,i);const a={div:null,properties:null,ctx:E(r=gt,ei,tm).call(r,c(this,Ao))};for(const o of c(this,Eo))a.properties=c(this,$h).get(o),a.div=o,E(this,Er,ob).call(this,a)}}cancel(){var t;const e=new Ta("TextLayer task cancelled.");(t=c(this,So))==null||t.cancel(e).catch(()=>{}),v(this,So,null),c(this,Xr).reject(e)}get textDivs(){return c(this,Eo)}get textContentItemsStr(){return c(this,zh)}static cleanup(){if(!(c(this,Rc).size>0)){c(this,Co).clear();for(const{canvas:e}of c(this,xo).values())e.remove();c(this,xo).clear()}}};Xr=new WeakMap,En=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Ao=new WeakMap,Xs=new WeakMap,Uh=new WeakMap,Vh=new WeakMap,So=new WeakMap,xc=new WeakMap,Tc=new WeakMap,Kr=new WeakMap,_c=new WeakMap,zh=new WeakMap,Pc=new WeakMap,Eo=new WeakMap,$h=new WeakMap,Hh=new WeakMap,Co=new WeakMap,xo=new WeakMap,Gh=new WeakMap,Yr=new WeakMap,Rc=new WeakMap,Er=new WeakSet,zR=function(e){var s,r;if(c(this,Bh))return;(r=c(this,Xs)).ctx??(r.ctx=E(s=gt,ei,tm).call(s,c(this,Ao)));const t=c(this,Eo),i=c(this,zh);for(const a of e){if(t.length>eU){re("Ignoring additional textDivs for performance reasons."),v(this,Bh,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=c(this,En);v(this,En,document.createElement("span")),c(this,En).classList.add("markedContent"),a.id!==null&&c(this,En).setAttribute("id",`${a.id}`),o.append(c(this,En))}else a.type==="endMarkedContent"&&v(this,En,c(this,En).parentNode);continue}i.push(a.str),E(this,Er,$R).call(this,a)}},$R=function(e){var y;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Eo).push(t);const s=K.transform(c(this,Hh),e.transform);let r=Math.atan2(s[1],s[0]);const a=c(this,_c)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=c(this,jh)&&a.fontSubstitution||a.fontFamily;o=gt.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),u=l*E(y=gt,ei,GR).call(y,o,c(this,Ao));let d,h;r===0?(d=s[4],h=s[5]-u):(d=s[4]+u*Math.sin(r),h=s[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;c(this,En)===c(this,xc)?(p.left=`${(100*d/c(this,Vh)).toFixed(2)}%`,p.top=`${(100*h/c(this,Uh)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(c(gt,Yr)*l).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,jh)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);A!==g&&Math.max(A,g)/Math.min(A,g)>1.5&&(m=!0)}if(m&&(i.canvasWidth=a.vertical?e.height:e.width),c(this,$h).set(t,i),c(this,Xs).div=t,c(this,Xs).properties=i,E(this,Er,ob).call(this,c(this,Xs)),i.hasText&&c(this,En).append(t),i.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),c(this,En).append(A)}},ob=function(e){var o;const{div:t,properties:i,ctx:s}=e,{style:r}=t;let a="";if(c(gt,Yr)>1&&(a=`scale(${1/c(gt,Yr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=r,{canvasWidth:u,fontSize:d}=i;E(o=gt,ei,lb).call(o,s,d*c(this,Kr),l);const{width:h}=s.measureText(t.textContent);h>0&&(a=`scaleX(${u*c(this,Kr)/h}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(r.transform=a)},ei=new WeakSet,tm=function(e=null){let t=c(this,xo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,xo).set(e,t),c(this,Gh).set(t,{size:0,family:""})}return t},lb=function(e,t,i){const s=c(this,Gh).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},HR=function(){if(c(this,Yr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),v(this,Yr,e.getBoundingClientRect().height),e.remove()},GR=function(e,t){const i=c(this,Co).get(e);if(i)return i;const s=E(this,ei,tm).call(this,t);s.canvas.width=s.canvas.height=bn,E(this,ei,lb).call(this,s,bn,e);const r=s.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const d=a/(a+o);return c(this,Co).set(e,d),s.canvas.width=s.canvas.height=0,d}s.strokeStyle="red",s.clearRect(0,0,bn,bn),s.strokeText("g",0,0);let l=s.getImageData(0,0,bn,bn).data;o=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){o=Math.ceil(d/4/bn);break}s.clearRect(0,0,bn,bn),s.strokeText("A",0,bn),l=s.getImageData(0,0,bn,bn).data,a=0;for(let d=0,h=l.length;d<h;d+=4)if(l[d]>0){a=bn-Math.floor(d/4/bn);break}s.canvas.width=s.canvas.height=0;const u=a?a/(a+o):tU;return c(this,Co).set(e,u),u},S(gt,ei),S(gt,Co,new Map),S(gt,xo,new Map),S(gt,Gh,new WeakMap),S(gt,Yr,null),S(gt,Rc,new Set);let th=gt;class nh{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var l;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(nh.shouldBuildText(o))(l=r==null?void 0:r.attributes)!=null&&l.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const u of r.children)s(u)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const nU=65536,iU=100,sU=5e3,rU=tn?bj:gj,aU=tn?wj:IR,oU=tn?vj:yj,lU=tn?Aj:DR;function cU(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new cb,{docId:t}=e,i=n.url?uU(n.url):null,s=n.data?dU(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof qR?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:nU;let d=n.worker instanceof sc?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!sy(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,y=n.CMapReaderFactory||aU,A=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||lU,b=n.stopAtErrors!==!0,w=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,C=n.isEvalSupported!==!1,x=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!tn,_=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!tn&&(pn.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R=typeof n.disableFontFace=="boolean"?n.disableFontFace:tn,N=n.fontExtraProperties===!0,D=n.enableXfa===!0,U=n.ownerDocument||globalThis.document,fe=n.disableRange===!0,Ae=n.disableStream===!0,ae=n.disableAutoFetch===!0,te=n.pdfBug===!0,F=n.CanvasFactory||rU,B=n.FilterFactory||oU,M=n.enableHWA===!0,T=l?l.length:n.length??NaN,Y=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!tn&&!R,pe=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:y===IR&&g===DR&&p&&A&&Xu(p,document.baseURI)&&Xu(A,document.baseURI),he=null;X3(h);const De={canvasFactory:new F({ownerDocument:U,enableHWA:M}),filterFactory:new B({docId:t,ownerDocument:U}),cMapReaderFactory:pe?null:new y({baseUrl:p,isCompressed:m}),standardFontDataFactory:pe?null:new g({baseUrl:A})};if(!d){const je={verbosity:h,port:ur.workerPort};d=je.port?sc.fromPort(je):new sc(je),e._worker=d}const Vt={docId:t,apiVersion:"4.10.38",data:s,password:o,disableAutoFetch:ae,rangeChunkSize:u,length:T,docBaseUrl:f,enableXfa:D,evaluatorOptions:{maxImageSize:w,disableFontFace:R,ignoreErrors:b,isEvalSupported:C,isOffscreenCanvasSupported:x,isImageDecoderSupported:_,canvasMaxAreaInBytes:P,fontExtraProperties:N,useSystemFonts:Y,cMapUrl:pe?p:null,standardFontDataUrl:pe?A:null}},Ci={disableFontFace:R,fontExtraProperties:N,ownerDocument:U,pdfBug:te,styleElement:he,loadingParams:{disableAutoFetch:ae,enableXfa:D}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const je=d.messageHandler.sendWithPromise("GetDocRequest",Vt,s?[s.buffer]:null);let Ee;if(l)Ee=new Bj(l,{disableRange:fe,disableStream:Ae});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Da;if(tn)if(Xu(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Da=p1}else Da=Qj;else Da=Xu(i)?p1:qj;Ee=new Da({url:i,length:T,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:fe,disableStream:Ae})}return je.then(Da=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ly=new Ju(t,Da,d.port),UA=new mU(ly,e,Ee,Ci,De);e._transport=UA,ly.send("Ready",null)})}).catch(e._capability.reject),e}function uU(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(tn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function dU(n){if(tn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return ny(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function m1(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var mg;const gg=class gg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${rn(gg,mg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}};mg=new WeakMap,S(gg,mg,0);let cb=gg;class qR{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ie("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class hU{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ce(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Qr,Ks,gi,Rl,nm;class fU{constructor(e,t,i,s=!1){S(this,gi);S(this,Qr,null);S(this,Ks,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new t1:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new WR,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new Vf({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ce(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=Dr.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:h=!1}){var C,x;(C=this._stats)==null||C.time("Overall");const f=this._transport.getRenderingIntent(i,s,d,h),{renderingIntent:p,cacheKey:m}=f;v(this,Ks,!1),E(this,gi,nm).call(this),o||(o=this._transport.getOptionalContentConfig(p));let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const A=!!(p&Xn.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(x=this._stats)==null||x.time("Page Request"),this._pumpOperatorList(f));const g=_=>{var P;y.renderTasks.delete(b),(this._maybeCleanupAfterRender||A)&&v(this,Ks,!0),E(this,gi,Rl).call(this,!A),_?(b.capability.reject(_),this._abortOperatorList({intentState:y,reason:_ instanceof Error?_:new Error(_)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new db({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:u});(y.renderTasks||(y.renderTasks=new Set)).add(b);const w=b.task;return Promise.all([y.displayReadyCapability.promise,o]).then(([_,P])=>{var R;if(this.destroyed){g();return}if((R=this._stats)==null||R.time("Rendering"),!(P.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:_,optionalContentConfig:P}),b.operatorListChanged()}).catch(g),w}getOperatorList({intent:e="display",annotationMode:t=Dr.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,i,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>nh.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){a.read().then(function({value:l,done:u}){if(u){i(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),v(this,Ks,!1),E(this,gi,nm).call(this),Promise.all(e)}cleanup(e=!1){v(this,Ks,!0);const t=E(this,gi,Rl).call(this,!1);return e&&t&&this._stats&&(this._stats=new t1),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&E(this,gi,Rl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const d=()=>{l.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();E(this,gi,Rl).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof TA){let s=iU;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Ta(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Qr=new WeakMap,Ks=new WeakMap,gi=new WeakSet,Rl=function(e=!1){if(E(this,gi,nm).call(this),!c(this,Ks)||this.destroyed)return!1;if(e)return v(this,Qr,setTimeout(()=>{v(this,Qr,null),E(this,gi,Rl).call(this,!1)},sU)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,Ks,!1),!0},nm=function(){c(this,Qr)&&(clearTimeout(c(this,Qr)),v(this,Qr,null))};var Ys,yg;class pU{constructor(){S(this,Ys,new Map);S(this,yg,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};c(this,yg).then(()=>{for(const[s]of c(this,Ys))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){re("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}c(this,Ys).set(t,s)}removeEventListener(e,t){const i=c(this,Ys).get(t);i==null||i(),c(this,Ys).delete(t)}terminate(){for(const[,e]of c(this,Ys))e==null||e();c(this,Ys).clear()}}Ys=new WeakMap,yg=new WeakMap;var vg,To,_o,Ic,im,Nc,sm;const Ve=class Ve{constructor({name:e=null,port:t=null,verbosity:i=K3()}={}){S(this,Ic);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=c(Ve,_o))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(Ve,_o)||v(Ve,_o,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ju("main","worker",e),this._messageHandler.on("ready",function(){}),E(this,Ic,im).call(this)}_initialize(){if(c(Ve,To)||c(Ve,Nc,sm)){this._setupFakeWorker();return}let{workerSrc:e}=Ve;try{Ve._isSameOrigin(window.location.href,e)||(e=Ve._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Ju("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",o=>{if(r.abort(),this.destroyed||!o){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,E(this,Ic,im).call(this)}),i.on("ready",o=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{ty("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Ve,To)||(re("Setting up fake worker."),v(Ve,To,!0)),Ve._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new pU;this._port=t;const i=`fake${rn(Ve,vg)._++}`,s=new Ju(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new Ju(i,i+"_worker",t),E(this,Ic,im).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,i;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=c(Ve,_o))==null||t.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=c(this,_o))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ve(e)}static get workerSrc(){if(ur.workerSrc)return ur.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ce(this,"_setupFakeWorkerGlobal",(async()=>c(this,Nc,sm)?c(this,Nc,sm):(await import(this.workerSrc)).WorkerMessageHandler)())}};vg=new WeakMap,To=new WeakMap,_o=new WeakMap,Ic=new WeakSet,im=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Nc=new WeakSet,sm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(Ve,Nc),S(Ve,vg,0),S(Ve,To,!1),S(Ve,_o),tn&&(v(Ve,To,!0),ur.workerSrc||(ur.workerSrc="./pdf.worker.mjs")),Ve._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},Ve._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let sc=Ve;var Qs,gs,Mc,kc,Js,Po,id;class mU{constructor(e,t,i,s,r){S(this,Po);S(this,Qs,new Map);S(this,gs,new Map);S(this,Mc,new Map);S(this,kc,new Map);S(this,Js,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new WR,this.fontLoader=new pj({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ce(this,"annotationStorage",new IA)}getRenderingIntent(e,t=Dr.ENABLE,i=null,s=!1,r=!1){let a=Xn.DISPLAY,o=J0;switch(e){case"any":a=Xn.ANY;break;case"display":break;case"print":a=Xn.PRINT;break;default:re(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Xn.PRINT&&i instanceof CR?i:this.annotationStorage;switch(t){case Dr.DISABLE:a+=Xn.ANNOTATIONS_DISABLE;break;case Dr.ENABLE:break;case Dr.ENABLE_FORMS:a+=Xn.ANNOTATIONS_FORMS;break;case Dr.ENABLE_STORAGE:a+=Xn.ANNOTATIONS_STORAGE,o=l.serializable;break;default:re(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Xn.IS_EDITING),r&&(a+=Xn.OPLIST);const{ids:u,hash:d}=l.modifiedIds,h=[a,o.hash,d];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=c(this,Js))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of c(this,gs).values())e.push(s._destroy());c(this,gs).clear(),c(this,Mc).clear(),c(this,kc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Qs).clear(),this.filterFactory.destroy(),th.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ta("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{ht(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}ht(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(i,s)=>{ht(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){s.close();return}ht(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new hU(i,this))}),e.on("DocException",i=>{t._capability.reject(wn(i))}),e.on("PasswordRequest",i=>{v(this,Js,Promise.withResolvers());try{if(!t.onPassword)throw wn(i);const s=r=>{r instanceof Error?c(this,Js).reject(r):c(this,Js).resolve({password:r})};t.onPassword(s,i.code)}catch(s){c(this,Js).reject(s)}return c(this,Js).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;c(this,gs).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in r){const p=r.error;re(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const d=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,h=new mj(r,{disableFontFace:o,fontExtraProperties:l,inspectFont:d});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:f}=r;ht(f,"The imageRef must be defined.");for(const p of c(this,gs).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,a])=>{var l;if(this.destroyed)return;const o=c(this,gs).get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":o.objs.resolve(i,a),(a==null?void 0:a.dataLen)>H3&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&re("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=c(this,Mc).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,kc).set(r.refStr,e);const a=new fU(t,r,this,this._params.pdfBug);return c(this,gs).set(t,a),a});return c(this,Mc).set(t,s),s}getPageIndex(e){return m1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,Po,id).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Po,id).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,Po,id).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,Po,id).call(this,"GetOptionalContentConfig").then(t=>new Fj(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Qs).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new Lj(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return c(this,Qs).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,gs).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Qs).clear(),this.filterFactory.destroy(!0),th.cleanup()}}cachedPageNumber(e){if(!m1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,kc).get(t)??null}}Qs=new WeakMap,gs=new WeakMap,Mc=new WeakMap,kc=new WeakMap,Js=new WeakMap,Po=new WeakSet,id=function(e,t=null){const i=c(this,Qs).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return c(this,Qs).set(e,s),s};const Vu=Symbol("INITIAL_DATA");var jn,qh,ub;class WR{constructor(){S(this,qh);S(this,jn,Object.create(null))}get(e,t=null){if(t){const s=E(this,qh,ub).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=c(this,jn)[e];if(!i||i.data===Vu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=c(this,jn)[e];return!!t&&t.data!==Vu}delete(e){const t=c(this,jn)[e];return!t||t.data===Vu?!1:(delete c(this,jn)[e],!0)}resolve(e,t=null){const i=E(this,qh,ub).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in c(this,jn)){const{data:i}=c(this,jn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}v(this,jn,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,jn)){const{data:t}=c(this,jn)[e];t!==Vu&&(yield[e,t])}}}jn=new WeakMap,qh=new WeakSet,ub=function(e){var t;return(t=c(this,jn))[e]||(t[e]={...Promise.withResolvers(),data:Vu})};var Jr;class gU{constructor(e){S(this,Jr,null);v(this,Jr,e),this.onContinue=null}get promise(){return c(this,Jr).capability.promise}cancel(e=0){c(this,Jr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,Jr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,Jr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Jr=new WeakMap;var Zr,Ro;const $a=class $a{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null}){S(this,Zr,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gU(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(c($a,Ro).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c($a,Ro).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:a}=this.params;this.gfx=new ic(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),c(this,Zr)&&(window.cancelAnimationFrame(c(this,Zr)),v(this,Zr,null)),c($a,Ro).delete(this._canvas),this.callback(e||new TA(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,Zr,window.requestAnimationFrame(()=>{v(this,Zr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c($a,Ro).delete(this._canvas),this.callback())))}};Zr=new WeakMap,Ro=new WeakMap,S($a,Ro,new WeakSet);let db=$a;const yU="4.10.38",vU="f9bea397f";function g1(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function zu(n){return Math.max(0,Math.min(255,255*n))}class y1{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=zu(e),[e,e,e]}static G_HTML([e]){const t=g1(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(zu)}static RGB_HTML(e){return`#${e.map(g1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[zu(1-Math.min(1,e+s)),zu(1-Math.min(1,i+s)),zu(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,a=1-i,o=Math.min(s,r,a);return["CMYK",s,r,a,o]}}class bU{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ie("Abstract method `_createSVG` called.")}}class MA extends bU{_createSVG(e){return document.createElementNS(Ms,e)}}class XR{static setupStorage(e,t,i,s,r){const a=s.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&r.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){var h,f;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:i});const o=r!=="richText",l=e.div;if(l.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),o&&nh.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const d=[[s,-1,a]];for(;d.length>0;){const[p,m,y]=d.at(-1);if(m+1===p.children.length){d.pop();continue}const A=p.children[++d.at(-1)[1]];if(A===null)continue;const{name:g}=A;if(g==="#text"){const w=document.createTextNode(A.value);u.push(w),y.append(w);continue}const b=(h=A==null?void 0:A.attributes)!=null&&h.xmlns?document.createElementNS(A.attributes.xmlns,g):document.createElement(g);if(y.append(b),A.attributes&&this.setAttributes({html:b,element:A,storage:t,intent:r,linkService:i}),((f=A.children)==null?void 0:f.length)>0)d.push([A,-1,b]);else if(A.value){const w=document.createTextNode(A.value);o&&nh.shouldBuildText(g)&&u.push(w),b.append(w)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const $f=1e3,wU=9,yl=new WeakSet;function Aa(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class AU{static create(e){switch(e.data.annotationType){case mt.LINK:return new KR(e);case mt.TEXT:return new SU(e);case mt.WIDGET:switch(e.data.fieldType){case"Tx":return new EU(e);case"Btn":return e.data.radioButton?new JR(e):e.data.checkBox?new xU(e):new TU(e);case"Ch":return new _U(e);case"Sig":return new CU(e)}return new Al(e);case mt.POPUP:return new fb(e);case mt.FREETEXT:return new iI(e);case mt.LINE:return new RU(e);case mt.SQUARE:return new IU(e);case mt.CIRCLE:return new NU(e);case mt.POLYLINE:return new sI(e);case mt.CARET:return new kU(e);case mt.INK:return new kA(e);case mt.POLYGON:return new MU(e);case mt.HIGHLIGHT:return new rI(e);case mt.UNDERLINE:return new DU(e);case mt.SQUIGGLY:return new LU(e);case mt.STRIKEOUT:return new OU(e);case mt.STAMP:return new aI(e);case mt.FILEATTACHMENT:return new FU(e);default:return new ot(e)}}}var Io,Dc,Lc,Wh,hb;const FA=class FA{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){S(this,Wh);S(this,Io,null);S(this,Dc,!1);S(this,Lc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return FA._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;c(this,Io)||v(this,Io,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&E(this,Wh,hb).call(this,t),(i=c(this,Lc))==null||i.popup.updateEdited(e)}resetEdited(){var e;c(this,Io)&&(E(this,Wh,hb).call(this,c(this,Io).rect),(e=c(this,Lc))==null||e.popup.resetEdited(),v(this,Io,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Al||(r.tabIndex=$f);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof fb){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,r),r}const{width:o,height:l}=Aa(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(y>0||A>0){const b=`calc(${y}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;a.borderRadius=b}else if(this instanceof JR){const b=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=b}switch(t.borderStyle.style){case ju.SOLID:a.borderStyle="solid";break;case ju.DASHED:a.borderStyle="dashed";break;case ju.BEVELED:re("Unimplemented border style: beveled");break;case ju.INSET:re("Unimplemented border style: inset");break;case ju.UNDERLINE:a.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(v(this,Dc,!0),a.borderColor=K.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const u=K.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=s.rawDims;a.left=`${100*(u[0]-f)/d}%`,a.top=`${100*(u[1]-p)/h}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/d}%`,a.height=`${100*l/h}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=Aa(this.data.rect);let o,l;e%180===0?(o=100*r/i,l=100*a/s):(o=100*a/i,l=100*r/s),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],a=r[0],o=r.slice(1);s.target.style[i]=y1[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:y1[`${a}_rgb`](o)})};return ce(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const a=i[s];if(a){const o={detail:{[s]:r},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,A,g,b]=e.subarray(2,6);if(s===y&&r===A&&t===g&&i===b)return}const{style:a}=this.container;let o;if(c(this,Dc)){const{borderColor:y,borderWidth:A}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const l=s-t,u=r-i,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,A=e.length;y<A;y+=8){const g=e[y],b=e[y+1],w=e[y+2],C=e[y+3],x=d.createElement("rect"),_=(w-t)/l,P=(r-b)/u,R=(g-w)/l,N=(b-C)/u;x.setAttribute("x",_),x.setAttribute("y",P),x.setAttribute("width",R),x.setAttribute("height",N),p.append(x),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${P}" width="${R}" height="${N}"/>`)}c(this,Dc)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=v(this,Lc,new fb({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Ie("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:a,exportValues:o}of s){if(r===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!yl.has(u)){re(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:u})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==t&&yl.has(s)&&i.push({id:a,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Io=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,Wh=new WeakSet,hb=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:d}=Aa(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+l)/a}%`,s===0?(t.width=`${100*u/r}%`,t.height=`${100*d/a}%`):this.setRotation(s)};let ot=FA;var Yn,ja,YR,QR;class KR extends ot{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});S(this,Yn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(E(this,Yn,YR).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(E(this,Yn,QR).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,Yn,ja).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),E(this,Yn,ja).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const a=s.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),E(this,Yn,ja).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),E(this,Yn,ja).call(this),!this._fieldObjects){re('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var h;s==null||s();const{fields:r,refs:a,include:o}=i,l=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:y}of m)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===o&&l.push(m)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,d=[];for(const f of l){const{id:p}=f;switch(d.push(p),f.type){case"text":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!yl.has(m)){re(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Yn=new WeakSet,ja=function(){this.container.setAttribute("data-internal-link","")},YR=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},E(this,Yn,ja).call(this)},QR=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),E(this,Yn,ja).call(this)};class SU extends ot{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Al extends ot{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{var o;if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(e,t,i,s){var r,a,o;for(const[l,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,s),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":K.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||wU,r=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(u/(sv*s))||1,h=u/d;a=Math.min(s,l(h/sv))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(u/sv))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=K.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class EU extends Al{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),yl.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=$f,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=d.userValue=p,d.formattedValue=null});let h=f=>{const{formattedValue:p}=d;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var y;if(d.focused)return;const{target:m}=p;d.userValue&&(m.value=d.userValue),d.lastCommittedValue=m.value,d.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(y){d.userValue=y.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),y.target.value=d.userValue},formattedValue(y){const{formattedValue:A}=y.detail;d.formattedValue=A,A!=null&&y.target!==document.activeElement&&(y.target.value=A),e.setValue(t,{formattedValue:A})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var w;const{charLimit:A}=y.detail,{target:g}=y;if(A===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",A);let b=d.userValue;!b||b.length<=A||(b=b.slice(0,A),g.value=d.userValue=b,e.setValue(t,{value:b}),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),i.addEventListener("keydown",p=>{var A;d.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(d.commitKey=3),m===-1)return;const{value:y}=p.target;d.lastCommittedValue!==y&&(d.lastCommittedValue=y,d.userValue=y,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=h;h=null,i.addEventListener("blur",p=>{var y,A;if(!d.focused||!p.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(d.focused=!1);const{value:m}=p.target;d.userValue=m,d.lastCommittedValue!==m&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:d.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",p=>{var x;d.lastCommittedValue=null;const{data:m,target:y}=p,{value:A,selectionStart:g,selectionEnd:b}=y;let w=g,C=b;switch(p.inputType){case"deleteWordBackward":{const _=A.substring(0,g).match(/\w*[^\w]*$/);_&&(w-=_[0].length);break}case"deleteWordForward":{const _=A.substring(g).match(/^[^\w]*\w*/);_&&(C+=_[0].length);break}case"deleteContentBackward":g===b&&(w-=1);break;case"deleteContentForward":g===b&&(C+=1);break}p.preventDefault(),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:m||"",willCommit:!1,selStart:w,selEnd:C}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(h&&i.addEventListener("blur",h),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class CU extends Al{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class xU extends Al{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return yl.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=$f,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,i)){const d=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class JR extends Al{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(yl.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=$f,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const d=a===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===i;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class TU extends KR{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class _U extends Al{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");yl.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=$f;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,i.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),r=!1),s.append(h)}let a=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),a=()=>{d.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=o(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const h={value(f){a==null||a();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const y of s.options)y.selected=m.has(y.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,A=>A.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:m,exportValue:y}=f.detail.insert,A=s.children[p],g=document.createElement("option");g.textContent=m,g.value=y,A?A.before(g):s.append(g),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:y,exportValue:A}=m,g=document.createElement("option");g.textContent=y,g.value=A,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),s.addEventListener("input",d=>{var p;const h=o(!0),f=o(!1);e.setValue(t,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class fb extends ot{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:ot._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new PU({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${xA}${i}`).join(",")),this.container}}var Oc,bg,wg,Fc,No,Ze,Zs,Bc,Xh,Kh,jc,er,Li,tr,Yh,nr,Qh,Mo,ko,Pe,rm,pb,ZR,eI,tI,nI,am,om,mb;class PU{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:u,parentRect:d,open:h}){S(this,Pe);S(this,Oc,E(this,Pe,tI).bind(this));S(this,bg,E(this,Pe,mb).bind(this));S(this,wg,E(this,Pe,om).bind(this));S(this,Fc,E(this,Pe,am).bind(this));S(this,No,null);S(this,Ze,null);S(this,Zs,null);S(this,Bc,null);S(this,Xh,null);S(this,Kh,null);S(this,jc,null);S(this,er,!1);S(this,Li,null);S(this,tr,null);S(this,Yh,null);S(this,nr,null);S(this,Qh,null);S(this,Mo,null);S(this,ko,!1);var f;v(this,Ze,e),v(this,Qh,s),v(this,Zs,a),v(this,nr,o),v(this,Kh,l),v(this,No,t),v(this,Yh,u),v(this,jc,d),v(this,Xh,i),v(this,Bc,PA.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,Fc)),p.addEventListener("mouseenter",c(this,wg)),p.addEventListener("mouseleave",c(this,bg)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",c(this,Oc));c(this,Ze).hidden=!0,h&&E(this,Pe,am).call(this)}render(){if(c(this,Li))return;const e=v(this,Li,document.createElement("div"));if(e.className="popup",c(this,No)){const r=e.style.outlineColor=K.makeHexColor(...c(this,No));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=K.makeHexColor(...c(this,No).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=c(this,Qh),e.append(t),c(this,Bc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Bc).valueOf()})),t.append(r)}const s=c(this,Pe,rm);if(s)XR.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,Zs));e.append(r)}c(this,Ze).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const o=s[r];i.append(document.createTextNode(o)),r<a-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;c(this,Mo)||v(this,Mo,{contentsObj:c(this,Zs),richText:c(this,nr)}),e&&v(this,tr,null),t&&(v(this,nr,E(this,Pe,eI).call(this,t)),v(this,Zs,null)),(i=c(this,Li))==null||i.remove(),v(this,Li,null)}resetEdited(){var e;c(this,Mo)&&({contentsObj:rn(this,Zs)._,richText:rn(this,nr)._}=c(this,Mo),v(this,Mo,null),(e=c(this,Li))==null||e.remove(),v(this,Li,null),v(this,tr,null))}forceHide(){v(this,ko,this.isVisible),c(this,ko)&&(c(this,Ze).hidden=!0)}maybeShow(){c(this,ko)&&(c(this,Li)||E(this,Pe,om).call(this),v(this,ko,!1),c(this,Ze).hidden=!1)}get isVisible(){return c(this,Ze).hidden===!1}}Oc=new WeakMap,bg=new WeakMap,wg=new WeakMap,Fc=new WeakMap,No=new WeakMap,Ze=new WeakMap,Zs=new WeakMap,Bc=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,jc=new WeakMap,er=new WeakMap,Li=new WeakMap,tr=new WeakMap,Yh=new WeakMap,nr=new WeakMap,Qh=new WeakMap,Mo=new WeakMap,ko=new WeakMap,Pe=new WeakSet,rm=function(){const e=c(this,nr),t=c(this,Zs);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,nr).html||null},pb=function(){var e,t,i;return((i=(t=(e=c(this,Pe,rm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},ZR=function(){var e,t,i;return((i=(t=(e=c(this,Pe,rm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},eI=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:c(this,Pe,ZR),fontSize:c(this,Pe,pb)?`calc(${c(this,Pe,pb)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},tI=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,er))&&E(this,Pe,am).call(this)},nI=function(){if(c(this,tr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=c(this,Kh);let a=!!c(this,jc),o=a?c(this,jc):c(this,Yh);for(const m of c(this,Xh))if(!o||K.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const l=K.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,h=l[0]+d,f=l[1];v(this,tr,[100*(h-s)/t,100*(f-r)/i]);const{style:p}=c(this,Ze);p.left=`${c(this,tr)[0]}%`,p.top=`${c(this,tr)[1]}%`},am=function(){v(this,er,!c(this,er)),c(this,er)?(E(this,Pe,om).call(this),c(this,Ze).addEventListener("click",c(this,Fc)),c(this,Ze).addEventListener("keydown",c(this,Oc))):(E(this,Pe,mb).call(this),c(this,Ze).removeEventListener("click",c(this,Fc)),c(this,Ze).removeEventListener("keydown",c(this,Oc)))},om=function(){c(this,Li)||this.render(),this.isVisible?c(this,er)&&c(this,Ze).classList.add("focused"):(E(this,Pe,nI).call(this),c(this,Ze).hidden=!1,c(this,Ze).style.zIndex=parseInt(c(this,Ze).style.zIndex)+1e3)},mb=function(){c(this,Ze).classList.remove("focused"),!(c(this,er)||!this.isVisible)&&(c(this,Ze).hidden=!0,c(this,Ze).style.zIndex=parseInt(c(this,Ze).style.zIndex)-1e3)};class iI extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=se.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Jh;class RU extends ot{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Jh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=Aa(t.rect),r=this.svgFactory.create(i,s,!0),a=v(this,Jh,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Jh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jh=new WeakMap;var Zh;class IU extends ot{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Zh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=Aa(t.rect),r=this.svgFactory.create(i,s,!0),a=t.borderStyle.width,o=v(this,Zh,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Zh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zh=new WeakMap;var ef;class NU extends ot{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,ef,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=Aa(t.rect),r=this.svgFactory.create(i,s,!0),a=t.borderStyle.width,o=v(this,ef,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",s/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ef)}addHighlightArea(){this.container.classList.add("highlightArea")}}ef=new WeakMap;var tf;class sI extends ot{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,tf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:a,height:o}=Aa(t),l=this.svgFactory.create(a,o,!0);let u=[];for(let h=0,f=i.length;h<f;h+=2){const p=i[h]-t[0],m=t[3]-i[h+1];u.push(`${p},${m}`)}u=u.join(" ");const d=v(this,tf,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,tf)}addHighlightArea(){this.container.classList.add("highlightArea")}}tf=new WeakMap;class MU extends sI{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kU extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var nf,Do,sf,gb;class kA extends ot{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,sf);S(this,nf,null);S(this,Do,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?se.HIGHLIGHT:se.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:a}}=this,{transform:o,width:l,height:u}=E(this,sf,gb).call(this,i,t),d=this.svgFactory.create(l,u,!0),h=v(this,nf,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let f=0,p=s.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);c(this,Do).push(m),m.setAttribute("points",s[f].join(",")),h.append(m)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,a=c(this,nf);if(i>=0&&a.setAttribute("stroke-width",i||1),s)for(let o=0,l=c(this,Do).length;o<l;o++)c(this,Do)[o].setAttribute("points",s[o].join(","));if(r){const{transform:o,width:l,height:u}=E(this,sf,gb).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return c(this,Do)}addHighlightArea(){this.container.classList.add("highlightArea")}}nf=new WeakMap,Do=new WeakMap,sf=new WeakSet,gb=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class rI extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=se.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class DU extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class LU extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class OU extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class aI extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=se.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var rf,af,yb;class FU extends ot{constructor(t){var s;super(t,{isRenderable:!0});S(this,af);S(this,rf,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",E(this,af,yb).bind(this)),v(this,rf,s);const{isMac:r}=pn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&E(this,af,yb).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return c(this,rf)}addHighlightArea(){this.container.classList.add("highlightArea")}}rf=new WeakMap,af=new WeakSet,yb=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var of,Lo,Oo,lf,vl,oI,vb;class BU{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:o}){S(this,vl);S(this,of,null);S(this,Lo,null);S(this,Oo,new Map);S(this,lf,null);this.div=e,v(this,of,t),v(this,Lo,i),v(this,lf,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(this,Oo).size>0}async render(e){var a;const{annotations:t}=e,i=this.div;ml(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new MA,annotationStorage:e.annotationStorage||new IA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===mt.POPUP;if(l){const h=s.get(o.id);if(!h)continue;r.elements=h}else{const{width:h,height:f}=Aa(o.rect);if(h<=0||f<=0)continue}r.data=o;const u=AU.create(r);if(!u.isRenderable)continue;if(!l&&o.popupRef){const h=s.get(o.popupRef);h?h.push(u):s.set(o.popupRef,[u])}const d=u.render();o.hidden&&(d.style.visibility="hidden"),await E(this,vl,oI).call(this,d,o.id),u._isEditable&&(c(this,Oo).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}E(this,vl,vb).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ml(t,{rotation:e.rotation}),E(this,vl,vb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Oo).values())}getEditableAnnotation(e){return c(this,Oo).get(e)}}of=new WeakMap,Lo=new WeakMap,Oo=new WeakMap,lf=new WeakMap,vl=new WeakSet,oI=async function(e,t){var a,o;const i=e.firstChild||e,s=i.id=`${xA}${t}`,r=await((a=c(this,lf))==null?void 0:a.getAriaAttributes(s));if(r)for(const[l,u]of r)i.setAttribute(l,u);this.div.append(e),(o=c(this,of))==null||o.moveElementInDOM(this.div,e,i,!1)},vb=function(){if(!c(this,Lo))return;const e=this.div;for(const[t,i]of c(this,Lo)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}c(this,Lo).clear()};const Ep=/\r\n?|\n/g;var Oi,Un,cf,Fo,Vn,ft,lI,cI,uI,lm,mr,cm,um,dI,wb,hI;const Me=class Me extends Ye{constructor(t){super({...t,name:"freeTextEditor"});S(this,ft);S(this,Oi);S(this,Un,"");S(this,cf,`${this.id}-editor`);S(this,Fo,null);S(this,Vn);v(this,Oi,t.color||Me._defaultColor||Ye._defaultLineColor),v(this,Vn,t.fontSize||Me._defaultFontSize)}static get _keyboardManager(){const t=Me.prototype,i=a=>a.isEmpty(),s=gl.TRANSLATE_SMALL,r=gl.TRANSLATE_BIG;return ce(this,"_keyboardManager",new zf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){Ye.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case me.FREETEXT_SIZE:Me._defaultFontSize=i;break;case me.FREETEXT_COLOR:Me._defaultColor=i;break}}updateParams(t,i){switch(t){case me.FREETEXT_SIZE:E(this,ft,lI).call(this,i);break;case me.FREETEXT_COLOR:E(this,ft,cI).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[me.FREETEXT_SIZE,Me._defaultFontSize],[me.FREETEXT_COLOR,Me._defaultColor||Ye._defaultLineColor]]}get propertiesToUpdate(){return[[me.FREETEXT_SIZE,c(this,Vn)],[me.FREETEXT_COLOR,c(this,Oi)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Me._internalPadding*t,-(Me._internalPadding+c(this,Vn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(se.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,Fo,new AbortController);const t=this._uiManager.combinedSignal(c(this,Fo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,cf)),this._isDraggable=!0,(t=c(this,Fo))==null||t.abort(),v(this,Fo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Un),i=v(this,Un,E(this,ft,uI).call(this).trimEnd());if(t===i)return;const s=r=>{if(v(this,Un,r),!r){this.remove();return}E(this,ft,um).call(this),this._uiManager.rebuild(this),E(this,ft,lm).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),E(this,ft,lm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Me._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,cf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${c(this,Vn)}px * var(--scale-factor))`,s.color=c(this,Oi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Jm(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let m,y;switch(this.rotation){case 0:m=t+(o[0]-f)/d,y=i+this.height-(o[1]-p)/h;break;case 90:m=t+(o[0]-f)/d,y=i-(o[1]-p)/h,[l,u]=[u,-l];break;case 180:m=t-this.width+(o[0]-f)/d,y=i-(o[1]-p)/h,[l,u]=[-l,-u];break;case 270:m=t+(o[0]-f-this.height*h)/d,y=i+(o[1]-p-this.width*d)/h,[l,u]=[-u,l];break}this.setAt(m*r,y*a,l,u)}else this.setAt(t*r,i*a,this.width*r,this.height*a);E(this,ft,um).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,y,A;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=E(m=Me,mr,wb).call(m,i.getData("text")||"").replaceAll(Ep,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(Ep,"")),g!==this.editorDiv){let b=d;for(const w of this.editorDiv.childNodes){if(w===g){b=h;continue}b.push(E(y=Me,mr,cm).call(y,w))}}d.push(l.nodeValue.slice(0,u).replaceAll(Ep,""))}else if(l===this.editorDiv){let g=d,b=0;for(const w of this.editorDiv.childNodes)b++===u&&(g=h),g.push(E(A=Me,mr,cm).call(A,w))}v(this,Un,`${d.join(`
`)}${r}${h.join(`
`)}`),E(this,ft,um).call(this);const f=new Range;let p=d.reduce((g,b)=>g+b.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const b=g.nodeValue.length;if(p<=b){f.setStart(g,p),f.setEnd(g,p);break}p-=b}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){var o;let r=null;if(t instanceof iI){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:h,id:f,popupRef:p},textContent:m,textPosition:y,parent:{page:{pageNumber:A}}}=t;if(!m||m.length===0)return null;r=t={annotationType:se.FREETEXT,color:Array.from(u),fontSize:l,value:m.join(`
`),position:y,pageIndex:A-1,rect:d.slice(0),rotation:h,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(t,i,s);return v(a,Vn,t.fontSize),v(a,Oi,K.makeHexColor(...t.color)),v(a,Un,E(o=Me,mr,wb).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Me._internalPadding*this.parentScale,s=this.getRect(i,i),r=Ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Oi)),a={annotationType:se.FREETEXT,color:r,fontSize:c(this,Vn),value:E(this,ft,dI).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!E(this,ft,hI).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${c(this,Vn)}px * var(--scale-factor))`,s.color=c(this,Oi),i.replaceChildren();for(const a of c(this,Un).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}const r=Me._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:c(this,Un)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Oi=new WeakMap,Un=new WeakMap,cf=new WeakMap,Fo=new WeakMap,Vn=new WeakMap,ft=new WeakSet,lI=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-c(this,Vn))*this.parentScale),v(this,Vn,r),E(this,ft,lm).call(this)},s=c(this,Vn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},cI=function(t){const i=r=>{v(this,Oi,this.editorDiv.style.color=r)},s=c(this,Oi);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},uI=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(E(s=Me,mr,cm).call(s,r)),i=r);return t.join(`
`)},lm=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},mr=new WeakSet,cm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ep,"")},um=function(){if(this.editorDiv.replaceChildren(),!!c(this,Un))for(const t of c(this,Un).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},dI=function(){return c(this,Un).replaceAll(""," ")},wb=function(t){return t.replaceAll(" ","")},hI=function(t){const{value:i,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((o,l)=>o!==r[l])||t.pageIndex!==a},S(Me,mr),Q(Me,"_freeTextDefaultContent",""),Q(Me,"_internalPadding",0),Q(Me,"_defaultColor",null),Q(Me,"_defaultFontSize",10),Q(Me,"_type","freetext"),Q(Me,"_editorType",se.FREETEXT);let bb=Me;class H{toSVGPath(){Ie("Abstract method `toSVGPath` must be implemented.")}get box(){Ie("Abstract getter `box` must be implemented.")}serialize(e,t){Ie("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,s,r,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*s,a[o+1]=i+e[o+1]*r;return a}static _rescaleAndSwap(e,t,i,s,r,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*s,a[o+1]=i+e[o]*r;return a}static _translate(e,t,i,s){s||(s=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)s[r]=t+e[r],s[r+1]=i+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,s,r){switch(r){case 90:return[1-t/i,e/s];case 180:return[1-e/i,1-t/s];case 270:return[t/i,1-e/s];default:return[e/i,t/s]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,s,r,a){return[(e+5*i)/6,(t+5*s)/6,(5*i+r)/6,(5*s+a)/6,(i+r)/2,(s+a)/2]}}Q(H,"PRECISION",1e-4);var zn,Fi,Uc,Vc,ys,le,Bo,jo,uf,df,zc,$c,ea,hf,Ag,Sg,At,sd,fI,pI,mI,gI,yI,vI;const Fs=class Fs{constructor({x:e,y:t},i,s,r,a,o=0){S(this,At);S(this,zn);S(this,Fi,[]);S(this,Uc);S(this,Vc);S(this,ys,[]);S(this,le,new Float32Array(18));S(this,Bo);S(this,jo);S(this,uf);S(this,df);S(this,zc);S(this,$c);S(this,ea,[]);v(this,zn,i),v(this,$c,r*s),v(this,Vc,a),c(this,le).set([NaN,NaN,NaN,NaN,e,t],6),v(this,Uc,o),v(this,df,c(Fs,hf)*s),v(this,uf,c(Fs,Sg)*s),v(this,zc,s),c(this,ea).push(e,t)}isEmpty(){return isNaN(c(this,le)[8])}add({x:e,y:t}){var N;v(this,Bo,e),v(this,jo,t);const[i,s,r,a]=c(this,zn);let[o,l,u,d]=c(this,le).subarray(8,12);const h=e-u,f=t-d,p=Math.hypot(h,f);if(p<c(this,uf))return!1;const m=p-c(this,df),y=m/p,A=y*h,g=y*f;let b=o,w=l;o=u,l=d,u+=A,d+=g,(N=c(this,ea))==null||N.push(e,t);const C=-g/m,x=A/m,_=C*c(this,$c),P=x*c(this,$c);return c(this,le).set(c(this,le).subarray(2,8),0),c(this,le).set([u+_,d+P],4),c(this,le).set(c(this,le).subarray(14,18),12),c(this,le).set([u-_,d-P],16),isNaN(c(this,le)[6])?(c(this,ys).length===0&&(c(this,le).set([o+_,l+P],2),c(this,ys).push(NaN,NaN,NaN,NaN,(o+_-i)/r,(l+P-s)/a),c(this,le).set([o-_,l-P],14),c(this,Fi).push(NaN,NaN,NaN,NaN,(o-_-i)/r,(l-P-s)/a)),c(this,le).set([b,w,o,l,u,d],6),!this.isEmpty()):(c(this,le).set([b,w,o,l,u,d],6),Math.abs(Math.atan2(w-l,b-o)-Math.atan2(g,A))<Math.PI/2?([o,l,u,d]=c(this,le).subarray(2,6),c(this,ys).push(NaN,NaN,NaN,NaN,((o+u)/2-i)/r,((l+d)/2-s)/a),[o,l,b,w]=c(this,le).subarray(14,18),c(this,Fi).push(NaN,NaN,NaN,NaN,((b+o)/2-i)/r,((w+l)/2-s)/a),!0):([b,w,o,l,u,d]=c(this,le).subarray(0,6),c(this,ys).push(((b+5*o)/6-i)/r,((w+5*l)/6-s)/a,((5*o+u)/6-i)/r,((5*l+d)/6-s)/a,((o+u)/2-i)/r,((l+d)/2-s)/a),[u,d,o,l,b,w]=c(this,le).subarray(12,18),c(this,Fi).push(((b+5*o)/6-i)/r,((w+5*l)/6-s)/a,((5*o+u)/6-i)/r,((5*l+d)/6-s)/a,((o+u)/2-i)/r,((l+d)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,ys),t=c(this,Fi);if(isNaN(c(this,le)[6])&&!this.isEmpty())return E(this,At,fI).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);E(this,At,mI).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return E(this,At,pI).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,r,a){return new bI(e,t,i,s,r,a)}getOutlines(){var h;const e=c(this,ys),t=c(this,Fi),i=c(this,le),[s,r,a,o]=c(this,zn),l=new Float32Array((((h=c(this,ea))==null?void 0:h.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(c(this,ea)[f]-s)/a,l[f+1]=(c(this,ea)[f+1]-r)/o;if(l[l.length-2]=(c(this,Bo)-s)/a,l[l.length-1]=(c(this,jo)-r)/o,isNaN(i[6])&&!this.isEmpty())return E(this,At,gI).call(this,l);const u=new Float32Array(c(this,ys).length+24+c(this,Fi).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=E(this,At,vI).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+p],u[d+1]=t[f+p+1],d+=2}return E(this,At,yI).call(this,u,d),this.newFreeDrawOutline(u,l,c(this,zn),c(this,zc),c(this,Uc),c(this,Vc))}};zn=new WeakMap,Fi=new WeakMap,Uc=new WeakMap,Vc=new WeakMap,ys=new WeakMap,le=new WeakMap,Bo=new WeakMap,jo=new WeakMap,uf=new WeakMap,df=new WeakMap,zc=new WeakMap,$c=new WeakMap,ea=new WeakMap,hf=new WeakMap,Ag=new WeakMap,Sg=new WeakMap,At=new WeakSet,sd=function(){const e=c(this,le).subarray(4,6),t=c(this,le).subarray(16,18),[i,s,r,a]=c(this,zn);return[(c(this,Bo)+(e[0]-t[0])/2-i)/r,(c(this,jo)+(e[1]-t[1])/2-s)/a,(c(this,Bo)+(t[0]-e[0])/2-i)/r,(c(this,jo)+(t[1]-e[1])/2-s)/a]},fI=function(){const[e,t,i,s]=c(this,zn),[r,a,o,l]=E(this,At,sd).call(this);return`M${(c(this,le)[2]-e)/i} ${(c(this,le)[3]-t)/s} L${(c(this,le)[4]-e)/i} ${(c(this,le)[5]-t)/s} L${r} ${a} L${o} ${l} L${(c(this,le)[16]-e)/i} ${(c(this,le)[17]-t)/s} L${(c(this,le)[14]-e)/i} ${(c(this,le)[15]-t)/s} Z`},pI=function(e){const t=c(this,Fi);e.push(`L${t[4]} ${t[5]} Z`)},mI=function(e){const[t,i,s,r]=c(this,zn),a=c(this,le).subarray(4,6),o=c(this,le).subarray(16,18),[l,u,d,h]=E(this,At,sd).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-i)/r} L${l} ${u} L${d} ${h} L${(o[0]-t)/s} ${(o[1]-i)/r}`)},gI=function(e){const t=c(this,le),[i,s,r,a]=c(this,zn),[o,l,u,d]=E(this,At,sd).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/a],0),this.newFreeDrawOutline(h,e,c(this,zn),c(this,zc),c(this,Uc),c(this,Vc))},yI=function(e,t){const i=c(this,Fi);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},vI=function(e,t){const i=c(this,le).subarray(4,6),s=c(this,le).subarray(16,18),[r,a,o,l]=c(this,zn),[u,d,h,f]=E(this,At,sd).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/l],t),t+=24},S(Fs,hf,8),S(Fs,Ag,2),S(Fs,Sg,c(Fs,hf)+c(Fs,Ag));let tg=Fs;var Hc,Uo,ir,ff,$n,pf,st,Eg,wI;class bI extends H{constructor(t,i,s,r,a,o){super();S(this,Eg);S(this,Hc);S(this,Uo,new Float32Array(4));S(this,ir);S(this,ff);S(this,$n);S(this,pf);S(this,st);v(this,st,t),v(this,$n,i),v(this,Hc,s),v(this,pf,r),v(this,ir,a),v(this,ff,o),this.lastPoint=[NaN,NaN],E(this,Eg,wI).call(this,o);const[l,u,d,h]=c(this,Uo);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-l)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-l)/d,i[f+1]=(i[f+1]-u)/h}toSVGPath(){const t=[`M${c(this,st)[4]} ${c(this,st)[5]}`];for(let i=6,s=c(this,st).length;i<s;i+=6){if(isNaN(c(this,st)[i])){t.push(`L${c(this,st)[i+4]} ${c(this,st)[i+5]}`);continue}t.push(`C${c(this,st)[i]} ${c(this,st)[i+1]} ${c(this,st)[i+2]} ${c(this,st)[i+3]} ${c(this,st)[i+4]} ${c(this,st)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],a){const o=s-t,l=r-i;let u,d;switch(a){case 0:u=H._rescale(c(this,st),t,r,o,-l),d=H._rescale(c(this,$n),t,r,o,-l);break;case 90:u=H._rescaleAndSwap(c(this,st),t,i,o,l),d=H._rescaleAndSwap(c(this,$n),t,i,o,l);break;case 180:u=H._rescale(c(this,st),s,i,-o,l),d=H._rescale(c(this,$n),s,i,-o,l);break;case 270:u=H._rescaleAndSwap(c(this,st),s,r,-o,-l),d=H._rescaleAndSwap(c(this,$n),s,r,-o,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return c(this,Uo)}newOutliner(t,i,s,r,a,o=0){return new tg(t,i,s,r,a,o)}getNewOutline(t,i){const[s,r,a,o]=c(this,Uo),[l,u,d,h]=c(this,Hc),f=a*d,p=o*h,m=s*d+l,y=r*h+u,A=this.newOutliner({x:c(this,$n)[0]*f+m,y:c(this,$n)[1]*p+y},c(this,Hc),c(this,pf),t,c(this,ff),i??c(this,ir));for(let g=2;g<c(this,$n).length;g+=2)A.add({x:c(this,$n)[g]*f+m,y:c(this,$n)[g+1]*p+y});return A.getOutlines()}}Hc=new WeakMap,Uo=new WeakMap,ir=new WeakMap,ff=new WeakMap,$n=new WeakMap,pf=new WeakMap,st=new WeakMap,Eg=new WeakSet,wI=function(t){const i=c(this,st);let s=i[4],r=i[5],a=s,o=r,l=s,u=r,d=s,h=r;const f=t?Math.max:Math.min;for(let m=6,y=i.length;m<y;m+=6){if(isNaN(i[m]))a=Math.min(a,i[m+4]),o=Math.min(o,i[m+5]),l=Math.max(l,i[m+4]),u=Math.max(u,i[m+5]),h<i[m+5]?(d=i[m+4],h=i[m+5]):h===i[m+5]&&(d=f(d,i[m+4]));else{const A=K.bezierBoundingBox(s,r,...i.slice(m,m+6));a=Math.min(a,A[0]),o=Math.min(o,A[1]),l=Math.max(l,A[2]),u=Math.max(u,A[3]),h<A[3]?(d=A[2],h=A[3]):h===A[3]&&(d=f(d,A[2]))}s=i[m+4],r=i[m+5]}const p=c(this,Uo);p[0]=a-c(this,ir),p[1]=o-c(this,ir),p[2]=l-a+2*c(this,ir),p[3]=u-o+2*c(this,ir),this.lastPoint=[d,h]};var mf,gf,ta,Bi,gn,AI,dm,SI,EI,Sb;class Ab{constructor(e,t=0,i=0,s=!0){S(this,gn);S(this,mf);S(this,gf);S(this,ta,[]);S(this,Bi,[]);let r=1/0,a=-1/0,o=1/0,l=-1/0;const u=10**-4;for(const{x:A,y:g,width:b,height:w}of e){const C=Math.floor((A-t)/u)*u,x=Math.ceil((A+b+t)/u)*u,_=Math.floor((g-t)/u)*u,P=Math.ceil((g+w+t)/u)*u,R=[C,_,P,!0],N=[x,_,P,!1];c(this,ta).push(R,N),r=Math.min(r,C),a=Math.max(a,x),o=Math.min(o,_),l=Math.max(l,P)}const d=a-r+2*i,h=l-o+2*i,f=r-i,p=o-i,m=c(this,ta).at(s?-1:-2),y=[m[0],m[2]];for(const A of c(this,ta)){const[g,b,w]=A;A[0]=(g-f)/d,A[1]=(b-p)/h,A[2]=(w-p)/h}v(this,mf,new Float32Array([f,p,d,h])),v(this,gf,y)}getOutlines(){c(this,ta).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of c(this,ta))t[3]?(e.push(...E(this,gn,Sb).call(this,t)),E(this,gn,SI).call(this,t)):(E(this,gn,EI).call(this,t),e.push(...E(this,gn,Sb).call(this,t)));return E(this,gn,AI).call(this,e)}}mf=new WeakMap,gf=new WeakMap,ta=new WeakMap,Bi=new WeakMap,gn=new WeakSet,AI=function(e){const t=[],i=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const s=[];let r;for(;i.size>0;){const a=i.values().next().value;let[o,l,u,d,h]=a;i.delete(a);let f=o,p=l;for(r=[o,u],s.push(r);;){let m;if(i.has(d))m=d;else if(i.has(h))m=h;else break;i.delete(m),[o,l,u,d,h]=m,f!==o&&(r.push(f,p,o,p===l?l:u),f=o),p=p===l?u:l}r.push(f,p)}return new jU(s,c(this,mf),c(this,gf))},dm=function(e){const t=c(this,Bi);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,a=t[r][0];if(a===e)return r;a<e?i=r+1:s=r-1}return s+1},SI=function([,e,t]){const i=E(this,gn,dm).call(this,e);c(this,Bi).splice(i,0,[e,t])},EI=function([,e,t]){const i=E(this,gn,dm).call(this,e);for(let s=i;s<c(this,Bi).length;s++){const[r,a]=c(this,Bi)[s];if(r!==e)break;if(r===e&&a===t){c(this,Bi).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,a]=c(this,Bi)[s];if(r!==e)break;if(r===e&&a===t){c(this,Bi).splice(s,1);return}}},Sb=function(e){const[t,i,s]=e,r=[[t,i,s]],a=E(this,gn,dm).call(this,s);for(let o=0;o<a;o++){const[l,u]=c(this,Bi)[o];for(let d=0,h=r.length;d<h;d++){const[,f,p]=r[d];if(!(u<=f||p<=l)){if(f>=l){if(p>u)r[d][1]=u;else{if(h===1)return[];r.splice(d,1),d--,h--}continue}r[d][2]=l,p>u&&r.push([t,u,p])}}}return r};var yf,Gc;class jU extends H{constructor(t,i,s){super();S(this,yf);S(this,Gc);v(this,Gc,t),v(this,yf,i),this.lastPoint=s}toSVGPath(){const t=[];for(const i of c(this,Gc)){let[s,r]=i;t.push(`M${s} ${r}`);for(let a=2;a<i.length;a+=2){const o=i[a],l=i[a+1];o===s?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],a){const o=[],l=s-t,u=r-i;for(const d of c(this,Gc)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*l,h[f+1]=r-d[f+1]*u;o.push(h)}return o}get box(){return c(this,yf)}get classNamesForOutlining(){return["highlightOutline"]}}yf=new WeakMap,Gc=new WeakMap;class Eb extends tg{newFreeDrawOutline(e,t,i,s,r,a){return new UU(e,t,i,s,r,a)}}class UU extends bI{newOutliner(e,t,i,s,r,a=0){return new Eb(e,t,i,s,r,a)}}var ji,Vo,qc,vt,vf,Wc,bf,wf,na,Ui,Xc,Af,_e,Cb,xb,Tb,Ua,CI,Pr;const An=class An{constructor({editor:e=null,uiManager:t=null}){S(this,_e);S(this,ji,null);S(this,Vo,null);S(this,qc);S(this,vt,null);S(this,vf,!1);S(this,Wc,!1);S(this,bf,null);S(this,wf);S(this,na,null);S(this,Ui,null);S(this,Xc);var i;e?(v(this,Wc,!1),v(this,Xc,me.HIGHLIGHT_COLOR),v(this,bf,e)):(v(this,Wc,!0),v(this,Xc,me.HIGHLIGHT_DEFAULT_COLOR)),v(this,Ui,(e==null?void 0:e._uiManager)||t),v(this,wf,c(this,Ui)._eventBus),v(this,qc,(e==null?void 0:e.color)||((i=c(this,Ui))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),c(An,Af)||v(An,Af,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ce(this,"_keyboardManager",new zf([[["Escape","mac+Escape"],An.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],An.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],An.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],An.prototype._moveToPrevious],[["Home","mac+Home"],An.prototype._moveToBeginning],[["End","mac+End"],An.prototype._moveToEnd]]))}renderButton(){const e=v(this,ji,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,Ui)._signal;e.addEventListener("click",E(this,_e,Ua).bind(this),{signal:t}),e.addEventListener("keydown",E(this,_e,Tb).bind(this),{signal:t});const i=v(this,Vo,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=c(this,qc),e.append(i),e}renderMainDropdown(){const e=v(this,vt,E(this,_e,Cb).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,ji)){E(this,_e,Ua).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,_e,xb).call(this,t,e)}_moveToNext(e){var t,i;if(!c(this,_e,Pr)){E(this,_e,Ua).call(this,e);return}if(e.target===c(this,ji)){(t=c(this,vt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=c(this,vt))==null?void 0:t.firstChild)||e.target===c(this,ji)){c(this,_e,Pr)&&this._hideDropdownFromKeyboard();return}c(this,_e,Pr)||E(this,_e,Ua).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!c(this,_e,Pr)){E(this,_e,Ua).call(this,e);return}(t=c(this,vt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,_e,Pr)){E(this,_e,Ua).call(this,e);return}(t=c(this,vt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,vt))==null||e.classList.add("hidden"),(t=c(this,na))==null||t.abort(),v(this,na,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,Wc)){if(!c(this,_e,Pr)){(e=c(this,bf))==null||e.unselect();return}this.hideDropdown(),c(this,ji).focus({preventScroll:!0,focusVisible:c(this,vf)})}}updateColor(e){if(c(this,Vo)&&(c(this,Vo).style.backgroundColor=e),!c(this,vt))return;const t=c(this,Ui).highlightColors.values();for(const i of c(this,vt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,ji))==null||e.remove(),v(this,ji,null),v(this,Vo,null),(t=c(this,vt))==null||t.remove(),v(this,vt,null)}};ji=new WeakMap,Vo=new WeakMap,qc=new WeakMap,vt=new WeakMap,vf=new WeakMap,Wc=new WeakMap,bf=new WeakMap,wf=new WeakMap,na=new WeakMap,Ui=new WeakMap,Xc=new WeakMap,Af=new WeakMap,_e=new WeakSet,Cb=function(){const e=document.createElement("div"),t=c(this,Ui)._signal;e.addEventListener("contextmenu",Ki,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of c(this,Ui).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",c(An,Af)[i]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===c(this,qc)),r.addEventListener("click",E(this,_e,xb).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",E(this,_e,Tb).bind(this),{signal:t}),e},xb=function(e,t){t.stopPropagation(),c(this,wf).dispatch("switchannotationeditorparams",{source:this,type:c(this,Xc),value:e})},Tb=function(e){An._keyboardManager.exec(this,e)},Ua=function(e){if(c(this,_e,Pr)){this.hideDropdown();return}if(v(this,vf,e.detail===0),c(this,na)||(v(this,na,new AbortController),window.addEventListener("pointerdown",E(this,_e,CI).bind(this),{signal:c(this,Ui).combinedSignal(c(this,na))})),c(this,vt)){c(this,vt).classList.remove("hidden");return}const t=v(this,vt,E(this,_e,Cb).call(this));c(this,ji).append(t)},CI=function(e){var t;(t=c(this,vt))!=null&&t.contains(e.target)||this.hideDropdown()},Pr=function(){return c(this,vt)&&!c(this,vt).classList.contains("hidden")},S(An,Af,null);let ng=An;var Kc,Sf,sr,zo,Yc,Cn,Ef,Cf,$o,ui,Hn,kt,Qc,rr,Yt,Jc,di,xf,ie,_b,hm,xI,TI,_I,Pb,Va,yi,Il,PI,fm,rd,RI,II,NI,MI,kI;const Se=class Se extends Ye{constructor(t){super({...t,name:"highlightEditor"});S(this,ie);S(this,Kc,null);S(this,Sf,0);S(this,sr);S(this,zo,null);S(this,Yc,null);S(this,Cn,null);S(this,Ef,null);S(this,Cf,0);S(this,$o,null);S(this,ui,null);S(this,Hn,null);S(this,kt,!1);S(this,Qc,null);S(this,rr);S(this,Yt,null);S(this,Jc,"");S(this,di);S(this,xf,"");this.color=t.color||Se._defaultColor,v(this,di,t.thickness||Se._defaultThickness),v(this,rr,t.opacity||Se._defaultOpacity),v(this,sr,t.boxes||null),v(this,xf,t.methodOfCreation||""),v(this,Jc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(v(this,kt,!0),E(this,ie,hm).call(this,t),E(this,ie,Va).call(this)):c(this,sr)&&(v(this,Kc,t.anchorNode),v(this,Sf,t.anchorOffset),v(this,Ef,t.focusNode),v(this,Cf,t.focusOffset),E(this,ie,_b).call(this),E(this,ie,Va).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Se.prototype;return ce(this,"_keyboardManager",new zf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,kt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,di),methodOfCreation:c(this,xf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;Ye.initialize(t,i),Se._defaultColor||(Se._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case me.HIGHLIGHT_DEFAULT_COLOR:Se._defaultColor=i;break;case me.HIGHLIGHT_THICKNESS:Se._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return c(this,Qc)}updateParams(t,i){switch(t){case me.HIGHLIGHT_COLOR:E(this,ie,xI).call(this,i);break;case me.HIGHLIGHT_THICKNESS:E(this,ie,TI).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[me.HIGHLIGHT_DEFAULT_COLOR,Se._defaultColor],[me.HIGHLIGHT_THICKNESS,Se._defaultThickness]]}get propertiesToUpdate(){return[[me.HIGHLIGHT_COLOR,this.color||Se._defaultColor],[me.HIGHLIGHT_THICKNESS,c(this,di)||Se._defaultThickness],[me.HIGHLIGHT_FREE,c(this,kt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(v(this,Yc,new ng({editor:this})),t.addColorPicker(c(this,Yc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,ie,rd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,E(this,ie,rd).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){E(this,ie,Pb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,ie,Va).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?E(this,ie,Pb).call(this):t&&(E(this,ie,Va).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,a,o;const{drawLayer:i}=this.parent;let s;c(this,kt)?(t=(t-this.rotation+360)%360,s=E(r=Se,yi,Il).call(r,c(this,ui).box,t)):s=E(a=Se,yi,Il).call(a,[this.x,this.y,this.width,this.height],t),i.updateProperties(c(this,Hn),{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(c(this,Yt),{bbox:E(o=Se,yi,Il).call(o,c(this,Cn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Jc)&&(t.setAttribute("aria-label",c(this,Jc)),t.setAttribute("role","mark")),c(this,kt)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,ie,PI).bind(this),{signal:this._uiManager._signal});const i=v(this,$o,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=c(this,zo);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Jm(this,c(this,$o),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Yt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Yt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,ie,fm).call(this,!0);break;case 1:case 3:E(this,ie,fm).call(this,!1);break}}select(){var t;super.select(),c(this,Yt)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Yt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Yt)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Yt),{rootClass:{selected:!1}}),c(this,kt)||E(this,ie,fm).call(this,!1))}get _mustFixPosition(){return!c(this,kt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Hn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Yt),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:s,x:r,y:a}){const{x:o,y:l,width:u,height:d}=s.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),p=m=>{h.abort(),E(this,yi,MI).call(this,t,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Qn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ki,{signal:f}),s.addEventListener("pointermove",E(this,yi,NI).bind(this,t),{signal:f}),this._freeHighlight=new Eb({x:r,y:a},[o,l,u,d],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,s){var y,A,g,b;let r=null;if(t instanceof rI){const{data:{quadPoints:w,rect:C,rotation:x,id:_,color:P,opacity:R,popupRef:N},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:se.HIGHLIGHT,color:Array.from(P),opacity:R,quadPoints:w,boxes:null,pageIndex:D-1,rect:C.slice(0),rotation:x,id:_,deleted:!1,popupRef:N}}else if(t instanceof kA){const{data:{inkLists:w,rect:C,rotation:x,id:_,color:P,borderStyle:{rawWidth:R},popupRef:N},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:se.HIGHLIGHT,color:Array.from(P),thickness:R,inkLists:w,boxes:null,pageIndex:D-1,rect:C.slice(0),rotation:x,id:_,deleted:!1,popupRef:N}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,d=await super.deserialize(t,i,s);d.color=K.makeHexColor(...a),v(d,rr,u||1),l&&v(d,di,t.thickness),d.annotationElementId=t.id||null,d._initialData=r;const[h,f]=d.pageDimensions,[p,m]=d.pageTranslation;if(o){const w=v(d,sr,[]);for(let C=0;C<o.length;C+=8)w.push({x:(o[C]-p)/h,y:1-(o[C+1]-m)/f,width:(o[C+2]-o[C])/h,height:(o[C+1]-o[C+5])/f});E(y=d,ie,_b).call(y),E(A=d,ie,Va).call(A),d.rotate(d.rotation)}else if(l){v(d,kt,!0);const w=l[0],C={x:w[0]-p,y:f-(w[1]-m)},x=new Eb(C,[0,0,h,f],1,c(d,di)/2,!0,.001);for(let R=0,N=w.length;R<N;R+=2)C.x=w[R]-p,C.y=f-(w[R+1]-m),x.add(C);const{id:_,clipPathId:P}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);E(g=d,ie,hm).call(g,{highlightOutlines:x.getOutlines(),highlightId:_,clipPathId:P}),E(b=d,ie,Va).call(b)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=Ye._colorManager.convert(this.color),r={annotationType:se.HIGHLIGHT,color:s,opacity:c(this,rr),thickness:c(this,di),quadPoints:E(this,ie,RI).call(this),outlines:E(this,ie,II).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,ie,rd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,ie,kI).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Kc=new WeakMap,Sf=new WeakMap,sr=new WeakMap,zo=new WeakMap,Yc=new WeakMap,Cn=new WeakMap,Ef=new WeakMap,Cf=new WeakMap,$o=new WeakMap,ui=new WeakMap,Hn=new WeakMap,kt=new WeakMap,Qc=new WeakMap,rr=new WeakMap,Yt=new WeakMap,Jc=new WeakMap,di=new WeakMap,xf=new WeakMap,ie=new WeakSet,_b=function(){const t=new Ab(c(this,sr),.001);v(this,ui,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ui).box;const i=new Ab(c(this,sr),.0025,.001,this._uiManager.direction==="ltr");v(this,Cn,i.getOutlines());const{lastPoint:s}=c(this,Cn);v(this,Qc,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},hm=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var h,f;if(v(this,ui,t),v(this,Cn,t.getNewOutline(c(this,di)/2+1.5,.0025)),i>=0)v(this,Hn,i),v(this,zo,s),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),v(this,Yt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Cn).box,path:{d:c(this,Cn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Hn),{bbox:E(h=Se,yi,Il).call(h,c(this,ui).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Yt),{bbox:E(f=Se,yi,Il).call(f,c(this,Cn).box,p),path:{d:c(this,Cn).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*m/p,this.height=u*p/m;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*m/p,this.height=u*p/m;break}}const{lastPoint:d}=c(this,Cn);v(this,Qc,[(d[0]-a)/l,(d[1]-o)/u])},xI=function(t){const i=(a,o)=>{var l,u;this.color=a,v(this,rr,o),(l=this.parent)==null||l.drawLayer.updateProperties(c(this,Hn),{root:{fill:a,"fill-opacity":o}}),(u=c(this,Yc))==null||u.updateColor(a)},s=this.color,r=c(this,rr);this.addCommands({cmd:i.bind(this,t,Se._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},TI=function(t){const i=c(this,di),s=r=>{v(this,di,r),E(this,ie,_I).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},_I=function(t){if(!c(this,kt))return;E(this,ie,hm).call(this,{highlightOutlines:c(this,ui).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},Pb=function(){c(this,Hn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Hn)),v(this,Hn,null),this.parent.drawLayer.remove(c(this,Yt)),v(this,Yt,null))},Va=function(t=this.parent){c(this,Hn)===null&&({id:rn(this,Hn)._,clipPathId:rn(this,zo)._}=t.drawLayer.draw({bbox:c(this,ui).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,rr)},rootClass:{highlight:!0,free:c(this,kt)},path:{d:c(this,ui).toSVGPath()}},!1,!0),v(this,Yt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,kt)},bbox:c(this,Cn).box,path:{d:c(this,Cn).toSVGPath()}},c(this,kt))),c(this,$o)&&(c(this,$o).style.clipPath=c(this,zo)))},yi=new WeakSet,Il=function([t,i,s,r],a){switch(a){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]},PI=function(t){Se._keyboardManager.exec(this,t)},fm=function(t){if(!c(this,Kc))return;const i=window.getSelection();t?i.setPosition(c(this,Kc),c(this,Sf)):i.setPosition(c(this,Ef),c(this,Cf))},rd=function(){return c(this,kt)?this.rotation:0},RI=function(){if(c(this,kt))return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,a=c(this,sr),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:d,width:h,height:f}of a){const p=u*t+s,m=(1-d)*i+r;o[l]=o[l+4]=p,o[l+1]=o[l+3]=m,o[l+2]=o[l+6]=p+h*t,o[l+5]=o[l+7]=m-f*i,l+=8}return o},II=function(t){return c(this,ui).serialize(t,E(this,ie,rd).call(this))},NI=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},MI=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},kI=function(t){const{color:i}=this._initialData;return t.color.some((s,r)=>s!==i[r])},S(Se,yi),Q(Se,"_defaultColor",null),Q(Se,"_defaultOpacity",1),Q(Se,"_defaultThickness",12),Q(Se,"_type","highlight"),Q(Se,"_editorType",se.HIGHLIGHT),Q(Se,"_freeHighlightId",-1),Q(Se,"_freeHighlight",null),Q(Se,"_freeHighlightClipId","");let ig=Se;var Ho;class VU{constructor(){S(this,Ho,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){c(this,Ho)[e]=t}toSVGProperties(){const e=c(this,Ho);return v(this,Ho,Object.create(null)),{root:e}}reset(){v(this,Ho,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ie("Not implemented")}}Ho=new WeakMap;var Gn,Zc,xt,Go,qo,ia,sa,ra,Wo,be,Ib,Nb,Mb,ad,DI,pm,od,Nl;const q=class q extends Ye{constructor(t){super(t);S(this,be);S(this,Gn,null);S(this,Zc);Q(this,"_drawId",null);v(this,Zc,t.mustBeCommitted||!1),t.drawOutlines&&(E(this,be,Ib).call(this,t),E(this,be,ad).call(this))}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,a]of Object.entries(i))s.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Ie("Not implemented")}static get typesMap(){Ie("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(c(q,xt).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,a=r[i],o=l=>{var d;r.updateProperty(i,l);const u=c(this,Gn).updateProperty(i,l);u&&E(this,be,od).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(c(this,Gn).getPathResizingSVGProperties(E(this,be,pm).call(this)),{bbox:E(this,be,Nl).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(c(this,Gn).getPathResizedSVGProperties(E(this,be,pm).call(this)),{bbox:E(this,be,Nl).call(this)}))}_onTranslating(t,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:E(this,be,Nl).call(this,t,i)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(c(this,Gn).getPathTranslatedSVGProperties(E(this,be,pm).call(this),this.parentDimensions),{bbox:E(this,be,Nl).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Zc)&&(v(this,Zc,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){E(this,be,Mb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,be,ad).call(this),E(this,be,od).call(this,c(this,Gn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),E(this,be,Mb).call(this)):t&&(this._uiManager.addShouldRescale(this),E(this,be,ad).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties({bbox:E(this,be,Nl).call(this)},c(this,Gn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,be,od).call(this,c(this,Gn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const i=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,i,s,r,a){Ie("Not implemented")}static startDrawing(t,i,s,r){var A;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:d}=r;if(c(q,sa)&&c(q,sa)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:p}=a.getBoundingClientRect(),m=v(q,Go,new AbortController),y=t.combinedSignal(m);if(c(q,ia)||v(q,ia,u),c(q,sa)??v(q,sa,d),window.addEventListener("pointerup",g=>{var b;c(q,ia)===g.pointerId?this._endDraw(g):(b=c(q,ra))==null||b.delete(g.pointerId)},{signal:y}),window.addEventListener("pointercancel",g=>{var b;c(q,ia)===g.pointerId?this._currentParent.endDrawingSession():(b=c(q,ra))==null||b.delete(g.pointerId)},{signal:y}),window.addEventListener("pointerdown",g=>{c(q,sa)===g.pointerType&&((c(q,ra)||v(q,ra,new Set)).add(g.pointerId),c(q,xt).isCancellable()&&(c(q,xt).removeLastElement(),c(q,xt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Ki,{signal:y}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),a.addEventListener("touchmove",g=>{g.timeStamp===c(q,Wo)&&Qn(g)},{signal:y}),t.toggleDrawing(),(A=i._editorUndoBar)==null||A.hide(),c(q,xt)){t.drawLayer.updateProperties(this._currentDrawId,c(q,xt).startNew(o,l,f,p,h));return}i.updateUIForDefaultProperties(this),v(q,xt,this.createDrawerInstance(o,l,f,p,h)),v(q,qo,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(q,qo).toSVGProperties(),c(q,xt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(v(q,Wo,-1),!c(q,xt))return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(c(q,ia)===r){if(((a=c(q,ra))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(q,xt).add(i,s)),v(q,Wo,t.timeStamp),Qn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,v(q,xt,null),v(q,qo,null),v(q,sa,null),v(q,Wo,NaN)),c(q,Go)&&(c(q,Go).abort(),v(q,Go,null),v(q,ia,NaN),v(q,ra,null))}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t&&i.drawLayer.updateProperties(this._currentDrawId,c(q,xt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=c(q,xt),r=this._currentDrawId,a=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(a))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:me.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(me.DRAW_STEP),!c(q,xt).isEmpty()){const{pageDimensions:[s,r],scale:a}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(q,xt).getOutlines(s*a,r*a,a,this._INNER_MARGIN),drawingOptions:c(q,qo),mustBeCommitted:!t});return this._cleanup(!0),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,a,o){Ie("Not implemented")}static async deserialize(t,i,s){var h,f;const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}=i.viewport,u=this.deserializeDraw(o,l,r,a,this._INNER_MARGIN,t),d=await super.deserialize(t,i,s);return d.createDrawingOptions(t),E(h=d,be,Ib).call(h,{drawOutlines:u}),E(f=d,be,ad).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[i,s]=this.pageTranslation,[r,a]=this.pageDimensions;return c(this,Gn).serialize([i,s,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gn=new WeakMap,Zc=new WeakMap,xt=new WeakMap,Go=new WeakMap,qo=new WeakMap,ia=new WeakMap,sa=new WeakMap,ra=new WeakMap,Wo=new WeakMap,be=new WeakSet,Ib=function({drawOutlines:t,drawId:i,drawingOptions:s}){v(this,Gn,t),this._drawingOptions||(this._drawingOptions=s),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=E(this,be,Nb).call(this,t,this.parent),E(this,be,od).call(this,t.box)},Nb=function(t,i){const{id:s}=i.drawLayer.draw(q._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},Mb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ad=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,be,Nb).call(this,c(this,Gn),t)}},DI=function([t,i,s,r]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[i,1-t,s*(o/a),r*(a/o)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(o/a),r*(a/o)];default:return[t,i,s,r]}},pm=function(){const{x:t,y:i,width:s,height:r,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-i,t,s*(a/o),r*(o/a)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(a/o),r*(o/a)];default:return[t,i,s,r]}},od=function(t){if([this.x,this.y,this.width,this.height]=E(this,be,DI).call(this,t),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()},Nl=function(){const{x:t,y:i,width:s,height:r,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(l/u),r*(u/l),s*(l/u)];case 5:return[1-i,t,s*(l/u),r*(u/l)];case 6:return[1-t-r*(u/l),1-i,r*(u/l),s*(l/u)];case 7:return[i-s*(l/u),1-t-r*(u/l),s*(l/u),r*(u/l)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(u/l),i,r*(u/l),s*(l/u)];case 13:return[1-i-s*(l/u),t-r*(u/l),s*(l/u),r*(u/l)];case 14:return[1-t,1-i-s*(l/u),r*(u/l),s*(l/u)];case 15:return[i,1-t,s*(l/u),r*(u/l)];default:return[t,i,s,r]}},Q(q,"_currentDrawId",-1),Q(q,"_currentParent",null),S(q,xt,null),S(q,Go,null),S(q,qo,null),S(q,ia,NaN),S(q,sa,null),S(q,ra,null),S(q,Wo,NaN),Q(q,"_INNER_MARGIN",3);let Rb=q;var vs,Tt,_t,Xo,eu,ln,Dt,hi,Ko,Yo,Qo,tu,mm;class zU{constructor(e,t,i,s,r,a){S(this,tu);S(this,vs,new Float64Array(6));S(this,Tt);S(this,_t);S(this,Xo);S(this,eu);S(this,ln);S(this,Dt,"");S(this,hi,0);S(this,Ko,new sg);S(this,Yo);S(this,Qo);v(this,Yo,i),v(this,Qo,s),v(this,Xo,r),v(this,eu,a),[e,t]=E(this,tu,mm).call(this,e,t);const o=v(this,Tt,[NaN,NaN,NaN,NaN,e,t]);v(this,ln,[e,t]),v(this,_t,[{line:o,points:c(this,ln)}]),c(this,vs).set(o,0)}updateProperty(e,t){e==="stroke-width"&&v(this,eu,t)}isEmpty(){return!c(this,_t)||c(this,_t).length===0}isCancellable(){return c(this,ln).length<=10}add(e,t){[e,t]=E(this,tu,mm).call(this,e,t);const[i,s,r,a]=c(this,vs).subarray(2,6),o=e-r,l=t-a;return Math.hypot(c(this,Yo)*o,c(this,Qo)*l)<=2?null:(c(this,ln).push(e,t),isNaN(i)?(c(this,vs).set([r,a,e,t],2),c(this,Tt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,vs)[0])&&c(this,Tt).splice(6,6),c(this,vs).set([i,s,r,a,e,t],0),c(this,Tt).push(...H.createBezierPoints(i,s,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(c(this,ln).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,s,r){v(this,Yo,i),v(this,Qo,s),v(this,Xo,r),[e,t]=E(this,tu,mm).call(this,e,t);const a=v(this,Tt,[NaN,NaN,NaN,NaN,e,t]);v(this,ln,[e,t]);const o=c(this,_t).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),c(this,_t).push({line:a,points:c(this,ln)}),c(this,vs).set(a,0),v(this,hi,0),this.toSVGPath(),null}getLastElement(){return c(this,_t).at(-1)}setLastElement(e){return c(this,_t)?(c(this,_t).push(e),v(this,Tt,e.line),v(this,ln,e.points),v(this,hi,0),{path:{d:this.toSVGPath()}}):c(this,Ko).setLastElement(e)}removeLastElement(){if(!c(this,_t))return c(this,Ko).removeLastElement();c(this,_t).pop(),v(this,Dt,"");for(let e=0,t=c(this,_t).length;e<t;e++){const{line:i,points:s}=c(this,_t)[e];v(this,Tt,i),v(this,ln,s),v(this,hi,0),this.toSVGPath()}return{path:{d:c(this,Dt)}}}toSVGPath(){const e=H.svgRound(c(this,Tt)[4]),t=H.svgRound(c(this,Tt)[5]);if(c(this,ln).length===2)return v(this,Dt,`${c(this,Dt)} M ${e} ${t} Z`),c(this,Dt);if(c(this,ln).length<=6){const s=c(this,Dt).lastIndexOf("M");v(this,Dt,`${c(this,Dt).slice(0,s)} M ${e} ${t}`),v(this,hi,6)}if(c(this,ln).length===4){const s=H.svgRound(c(this,Tt)[10]),r=H.svgRound(c(this,Tt)[11]);return v(this,Dt,`${c(this,Dt)} L ${s} ${r}`),v(this,hi,12),c(this,Dt)}const i=[];c(this,hi)===0&&(i.push(`M ${e} ${t}`),v(this,hi,6));for(let s=c(this,hi),r=c(this,Tt).length;s<r;s+=6){const[a,o,l,u,d,h]=c(this,Tt).slice(s,s+6).map(H.svgRound);i.push(`C${a} ${o} ${l} ${u} ${d} ${h}`)}return v(this,Dt,c(this,Dt)+i.join(" ")),v(this,hi,c(this,Tt).length),c(this,Dt)}getOutlines(e,t,i,s){const r=c(this,_t).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),c(this,Ko).build(c(this,_t),e,t,i,c(this,Xo),c(this,eu),s),v(this,vs,null),v(this,Tt,null),v(this,_t,null),v(this,Dt,null),c(this,Ko)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}vs=new WeakMap,Tt=new WeakMap,_t=new WeakMap,Xo=new WeakMap,eu=new WeakMap,ln=new WeakMap,Dt=new WeakMap,hi=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,tu=new WeakSet,mm=function(e,t){return H._normalizePoint(e,t,c(this,Yo),c(this,Qo),c(this,Xo))};var cn,Tf,_f,qn,bs,ws,nu,iu,su,Bt,Ds,LI,OI,FI;const BA=class BA extends H{constructor(){super(...arguments);S(this,Bt);S(this,cn);S(this,Tf,0);S(this,_f);S(this,qn);S(this,bs);S(this,ws);S(this,nu);S(this,iu);S(this,su)}build(t,i,s,r,a,o,l){v(this,bs,i),v(this,ws,s),v(this,nu,r),v(this,iu,a),v(this,su,o),v(this,_f,l??0),v(this,qn,t),E(this,Bt,OI).call(this)}setLastElement(t){return c(this,qn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,qn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of c(this,qn)){if(t.push(`M${H.svgRound(i[4])} ${H.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12){t.push(`L${H.svgRound(i[10])} ${H.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[a,o,l,u,d,h]=i.subarray(s,s+6).map(H.svgRound);t.push(`C${a} ${o} ${l} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,i,s,r],a){const o=[],l=[],[u,d,h,f]=E(this,Bt,LI).call(this);let p,m,y,A,g,b,w,C,x;switch(c(this,iu)){case 0:x=H._rescale,p=t,m=i+r,y=s,A=-r,g=t+u*s,b=i+(1-d-f)*r,w=t+(u+h)*s,C=i+(1-d)*r;break;case 90:x=H._rescaleAndSwap,p=t,m=i,y=s,A=r,g=t+d*s,b=i+u*r,w=t+(d+f)*s,C=i+(u+h)*r;break;case 180:x=H._rescale,p=t+s,m=i,y=-s,A=r,g=t+(1-u-h)*s,b=i+d*r,w=t+(1-u)*s,C=i+(d+f)*r;break;case 270:x=H._rescaleAndSwap,p=t+s,m=i+r,y=-s,A=-r,g=t+(1-d-f)*s,b=i+(1-u-h)*r,w=t+(1-d)*s,C=i+(1-u)*r;break}for(const{line:_,points:P}of c(this,qn))o.push(x(_,p,m,y,A,a?new Array(_.length):null)),l.push(x(P,p,m,y,A,a?new Array(P.length):null));return{lines:o,points:l,rect:[g,b,w,C]}}static deserialize(t,i,s,r,a,{paths:{lines:o,points:l},rotation:u,thickness:d}){const h=[];let f,p,m,y,A;switch(u){case 0:A=H._rescale,f=-t/s,p=i/r+1,m=1/s,y=-1/r;break;case 90:A=H._rescaleAndSwap,f=-i/r,p=-t/s,m=1/r,y=1/s;break;case 180:A=H._rescale,f=t/s+1,p=-i/r,m=-1/s,y=1/r;break;case 270:A=H._rescaleAndSwap,f=i/r+1,p=t/s+1,m=-1/r,y=-1/s;break}if(!o){o=[];for(const b of l){const w=b.length;if(w===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(w===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const C=new Float32Array(3*(w-2));o.push(C);let[x,_,P,R]=b.subarray(0,4);C.set([NaN,NaN,NaN,NaN,x,_],0);for(let N=4;N<w;N+=2){const D=b[N],U=b[N+1];C.set(H.createBezierPoints(x,_,P,R,D,U),(N-2)*3),[x,_,P,R]=[P,R,D,U]}}}for(let b=0,w=o.length;b<w;b++)h.push({line:A(o[b].map(C=>C??NaN),f,p,m,y),points:A(l[b].map(C=>C??NaN),f,p,m,y)});const g=new BA;return g.build(h,s,r,1,u,d,a),g}get box(){return c(this,cn)}updateProperty(t,i){return t==="stroke-width"?E(this,Bt,FI).call(this,i):null}updateParentDimensions([t,i],s){const[r,a]=E(this,Bt,Ds).call(this);v(this,bs,t),v(this,ws,i),v(this,nu,s);const[o,l]=E(this,Bt,Ds).call(this),u=o-r,d=l-a,h=c(this,cn);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return v(this,Tf,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,cn).map(H.svgRound).join(" ")}get defaultProperties(){const[t,i]=c(this,cn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=c(this,cn);let s=0,r=0,a=0,o=0,l=0,u=0;switch(c(this,Tf)){case 90:r=i/t,a=-t/i,l=t;break;case 180:s=-1,o=-1,l=t,u=i;break;case 270:r=-i/t,a=t/i,u=i;break;default:return""}return`matrix(${s} ${r} ${a} ${o} ${H.svgRound(l)} ${H.svgRound(u)})`}getPathResizingSVGProperties([t,i,s,r]){const[a,o]=E(this,Bt,Ds).call(this),[l,u,d,h]=c(this,cn);if(Math.abs(d-a)<=H.PRECISION||Math.abs(h-o)<=H.PRECISION){const A=t+s/2-(l+d/2),g=i+r/2-(u+h/2);return{path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(i)}`,transform:`${this.rotationTransform} translate(${A} ${g})`}}}const f=(s-2*a)/(d-2*a),p=(r-2*o)/(h-2*o),m=d/s,y=h/r;return{path:{"transform-origin":`${H.svgRound(l)} ${H.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${y}) translate(${H.svgRound(a)} ${H.svgRound(o)}) scale(${f} ${p}) translate(${H.svgRound(-a)} ${H.svgRound(-o)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[a,o]=E(this,Bt,Ds).call(this),l=c(this,cn),[u,d,h,f]=l;if(l[0]=t,l[1]=i,l[2]=s,l[3]=r,Math.abs(h-a)<=H.PRECISION||Math.abs(f-o)<=H.PRECISION){const g=t+s/2-(u+h/2),b=i+r/2-(d+f/2);for(const{line:w,points:C}of c(this,qn))H._translate(w,g,b,w),H._translate(C,g,b,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*a)/(h-2*a),m=(r-2*o)/(f-2*o),y=-p*(u+a)+t+a,A=-m*(d+o)+i+o;if(p!==1||m!==1||y!==0||A!==0)for(const{line:g,points:b}of c(this,qn))H._rescale(g,y,A,p,m,g),H._rescale(b,y,A,p,m,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,a]=s,o=c(this,cn),l=t-o[0],u=i-o[1];if(c(this,bs)===r&&c(this,ws)===a)for(const{line:d,points:h}of c(this,qn))H._translate(d,l,u,d),H._translate(h,l,u,h);else{const d=c(this,bs)/r,h=c(this,ws)/a;v(this,bs,r),v(this,ws,a);for(const{line:f,points:p}of c(this,qn))H._rescale(f,l,u,d,h,f),H._rescale(p,l,u,d,h,p);o[2]*=d,o[3]*=h}return o[0]=t,o[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t)} ${H.svgRound(i)}`}}}get defaultSVGProperties(){const t=c(this,cn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t[0])} ${H.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};cn=new WeakMap,Tf=new WeakMap,_f=new WeakMap,qn=new WeakMap,bs=new WeakMap,ws=new WeakMap,nu=new WeakMap,iu=new WeakMap,su=new WeakMap,Bt=new WeakSet,Ds=function(t=c(this,su)){const i=c(this,_f)+t/2*c(this,nu);return c(this,iu)%180===0?[i/c(this,bs),i/c(this,ws)]:[i/c(this,ws),i/c(this,bs)]},LI=function(){const[t,i,s,r]=c(this,cn),[a,o]=E(this,Bt,Ds).call(this,0);return[t+a,i+o,s-2*a,r-2*o]},OI=function(){const t=v(this,cn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of c(this,qn)){if(r.length<=12){for(let l=4,u=r.length;l<u;l+=6){const[d,h]=r.subarray(l,l+2);t[0]=Math.min(t[0],d),t[1]=Math.min(t[1],h),t[2]=Math.max(t[2],d),t[3]=Math.max(t[3],h)}continue}let a=r[4],o=r[5];for(let l=6,u=r.length;l<u;l+=6){const[d,h,f,p,m,y]=r.subarray(l,l+6);K.bezierBoundingBox(a,o,d,h,f,p,m,y,t),a=m,o=y}}const[i,s]=E(this,Bt,Ds).call(this);t[0]=Math.min(1,Math.max(0,t[0]-i)),t[1]=Math.min(1,Math.max(0,t[1]-s)),t[2]=Math.min(1,Math.max(0,t[2]+i)),t[3]=Math.min(1,Math.max(0,t[3]+s)),t[2]-=t[0],t[3]-=t[1]},FI=function(t){const[i,s]=E(this,Bt,Ds).call(this);v(this,su,t);const[r,a]=E(this,Bt,Ds).call(this),[o,l]=[r-i,a-s],u=c(this,cn);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};let sg=BA;var ru;const jA=class jA extends VU{constructor(t){super();S(this,ru);v(this,ru,t),super.updateProperties({fill:"none",stroke:Ye._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??(i=this["stroke-width"]),i*=c(this,ru).realScale),super.updateSVGProperty(t,i)}clone(){const t=new jA(c(this,ru));return t.updateAll(this),t}};ru=new WeakMap;let kb=jA;var Cg,BI;const Yl=class Yl extends Rb{constructor(t){super({...t,name:"inkEditor"});S(this,Cg);this._willKeepAspectRatio=!0}static initialize(t,i){Ye.initialize(t,i),this._defaultDrawingOptions=new kb(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return ce(this,"typesMap",new Map([[me.INK_THICKNESS,"stroke-width"],[me.INK_COLOR,"stroke"],[me.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,a){return new zU(t,i,s,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,a,o){return sg.deserialize(t,i,s,r,a,o)}static async deserialize(t,i,s){let r=null;if(t instanceof kA){const{data:{inkLists:o,rect:l,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:m},parent:{page:{pageNumber:y}}}=t;r=t={annotationType:se.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:o},boxes:null,pageIndex:y-1,rect:l.slice(0),rotation:u,id:d,deleted:!1,popupRef:m}}const a=await super.deserialize(t,i,s);return a.annotationElementId=t.id||null,a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Yl.getDefaultDrawingOptions({stroke:K.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u={annotationType:se.INK,color:Ye._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!E(this,Cg,BI).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Cg=new WeakSet,BI=function(t){const{color:i,thickness:s,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==i[l])||t.thickness!==s||t.opacity!==r||t.pageIndex!==a},Q(Yl,"_type","ink"),Q(Yl,"_editorType",se.INK),Q(Yl,"_defaultDrawingOptions",null);let Db=Yl;var We,Lt,aa,ar,oa,au,As,Ss,Wn,ou,we,ld,cd,gm,Ob,ym,Fb,vm,jI;const Td=class Td extends Ye{constructor(t){super({...t,name:"stampEditor"});S(this,we);S(this,We,null);S(this,Lt,null);S(this,aa,null);S(this,ar,null);S(this,oa,null);S(this,au,"");S(this,As,null);S(this,Ss,null);S(this,Wn,!1);S(this,ou,!1);v(this,ar,t.bitmapUrl),v(this,oa,t.bitmapFile)}static initialize(t,i){Ye.initialize(t,i)}static get supportedTypes(){return ce(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return ce(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(se.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;c(this,Lt)&&(v(this,We,null),this._uiManager.imageManager.deleteId(c(this,Lt)),(t=c(this,As))==null||t.remove(),v(this,As,null),c(this,Ss)&&(clearTimeout(c(this,Ss)),v(this,Ss,null))),super.remove()}rebuild(){if(!this.parent){c(this,Lt)&&E(this,we,gm).call(this);return}super.rebuild(),this.div!==null&&(c(this,Lt)&&c(this,As)===null&&E(this,we,gm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,aa)||c(this,We)||c(this,ar)||c(this,oa)||c(this,Lt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,We)?E(this,we,Ob).call(this):E(this,we,gm).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Ss)!==null&&clearTimeout(c(this,Ss)),v(this,Ss,setTimeout(()=>{v(this,Ss,null),E(this,we,Fb).call(this)},200))}copyCanvas(t,i,s=!1){var p;t||(t=224);const{width:r,height:a}=c(this,We),o=new k0;let l=c(this,We),u=r,d=a,h=null;if(i){if(r>i||a>i){const R=Math.min(i/r,i/a);u=Math.floor(r*R),d=Math.floor(a*R)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*o.sx),y=h.height=Math.ceil(d*o.sy);c(this,Wn)||(l=E(this,we,ym).call(this,m,y));const A=h.getContext("2d");A.filter=this._uiManager.hcmFilter;let g="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",b="#42414d");const w=15,C=w*o.sx,x=w*o.sy,_=new OffscreenCanvas(C*2,x*2),P=_.getContext("2d");P.fillStyle=g,P.fillRect(0,0,C*2,x*2),P.fillStyle=b,P.fillRect(0,0,C,x),P.fillRect(C,x,C,x),A.fillStyle=A.createPattern(_,"repeat"),A.fillRect(0,0,m,y),A.drawImage(l,0,0,l.width,l.height,0,0,m,y)}let f=null;if(s){let m,y;if(o.symmetric&&l.width<t&&l.height<t)m=l.width,y=l.height;else if(l=c(this,We),r>t||a>t){const b=Math.min(t/r,t/a);m=Math.floor(r*b),y=Math.floor(a*b),c(this,Wn)||(l=E(this,we,ym).call(this,m,y))}const g=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});g.drawImage(l,0,0,l.width,l.height,0,0,m,y),f={width:m,height:y,data:g.getImageData(0,0,m,y).data}}return{canvas:h,width:u,height:d,imageData:f}}getImageForAltText(){return c(this,As)}static async deserialize(t,i,s){var y;let r=null;if(t instanceof aI){const{data:{rect:A,rotation:g,id:b,structParent:w,popupRef:C},container:x,parent:{page:{pageNumber:_}}}=t,P=x.querySelector("canvas"),R=s.imageManager.getFromCanvas(x.id,P);P.remove();const N=((y=await i._structTree.getAriaAttributes(`${xA}${b}`))==null?void 0:y.get("aria-label"))||"";r=t={annotationType:se.STAMP,bitmapId:R.id,bitmap:R.bitmap,pageIndex:_-1,rect:A.slice(0),rotation:g,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:w,popupRef:C}}const a=await super.deserialize(t,i,s),{rect:o,bitmap:l,bitmapUrl:u,bitmapId:d,isSvg:h,accessibilityData:f}=t;d&&s.imageManager.isValidId(d)?(v(a,Lt,d),l&&v(a,We,l)):v(a,ar,u),v(a,Wn,h);const[p,m]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/m,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=r,v(a,ou,!!r),a}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:se.STAMP,bitmapId:c(this,Lt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Wn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=E(this,we,vm).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=E(this,we,jI).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const o=c(this,Wn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(c(this,Lt)))i.stamps.set(c(this,Lt),{area:o,serialized:s}),s.bitmap=E(this,we,vm).call(this,!1);else if(c(this,Wn)){const l=i.stamps.get(c(this,Lt));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=E(this,we,vm).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};We=new WeakMap,Lt=new WeakMap,aa=new WeakMap,ar=new WeakMap,oa=new WeakMap,au=new WeakMap,As=new WeakMap,Ss=new WeakMap,Wn=new WeakMap,ou=new WeakMap,we=new WeakSet,ld=function(t,i=!1){if(!t){this.remove();return}v(this,We,t.bitmap),i||(v(this,Lt,t.id),v(this,Wn,t.isSvg)),t.file&&v(this,au,t.file.name),E(this,we,Ob).call(this)},cd=function(){if(v(this,aa,null),this._uiManager.enableWaiting(!1),!!c(this,As)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,We)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,We)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},gm=function(){if(c(this,Lt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Lt)).then(s=>E(this,we,ld).call(this,s,!0)).finally(()=>E(this,we,cd).call(this));return}if(c(this,ar)){const s=c(this,ar);v(this,ar,null),this._uiManager.enableWaiting(!0),v(this,aa,this._uiManager.imageManager.getFromUrl(s).then(r=>E(this,we,ld).call(this,r)).finally(()=>E(this,we,cd).call(this)));return}if(c(this,oa)){const s=c(this,oa);v(this,oa,null),this._uiManager.enableWaiting(!0),v(this,aa,this._uiManager.imageManager.getFromFile(s).then(r=>E(this,we,ld).call(this,r)).finally(()=>E(this,we,cd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Td.supportedTypesStr;const i=this._uiManager._signal;v(this,aa,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,we,ld).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>E(this,we,cd).call(this))),t.click()},Ob=function(){var h;const{div:t}=this;let{width:i,height:s}=c(this,We);const[r,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*r,s=this.height*a;else if(i>o*r||s>o*a){const f=Math.min(o*r/i,o*a/s);i*=f,s*=f}const[l,u]=this.parentDimensions;this.setDims(i*l/r,s*u/a),this._uiManager.enableWaiting(!1);const d=v(this,As,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=i/r,this.height=s/a,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,we,Fb).call(this),c(this,ou)||(this.parent.addUndoableEditor(this),v(this,ou,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,au)&&d.setAttribute("aria-label",c(this,au))},ym=function(t,i){const{width:s,height:r}=c(this,We);let a=s,o=r,l=c(this,We);for(;a>2*t||o>2*i;){const u=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,u,d,0,0,a,o),l=h.transferToImageBitmap()}return l},Fb=function(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,a=new k0,o=Math.ceil(s*t*a.sx),l=Math.ceil(r*i*a.sy),u=c(this,As);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const d=c(this,Wn)?c(this,We):E(this,we,ym).call(this,o,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,o,l)},vm=function(t){if(t){if(c(this,Wn)){const r=this._uiManager.imageManager.getSvgUrl(c(this,Lt));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=c(this,We),i.getContext("2d").drawImage(c(this,We),0,0),i.toDataURL()}if(c(this,Wn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*_a.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*_a.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(c(this,We),0,0,c(this,We).width,c(this,We).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(c(this,We))},jI=function(t){var o;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},Q(Td,"_type","stamp"),Q(Td,"_editorType",se.STAMP);let Lb=Td;var Jo,lu,Es,la,or,fi,ca,cu,Zo,Vi,lr,Qt,cr,X,ua,$e,UI,rs,jb,Ub,bm;const Pi=class Pi{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:d}){S(this,$e);S(this,Jo);S(this,lu,!1);S(this,Es,null);S(this,la,null);S(this,or,null);S(this,fi,new Map);S(this,ca,!1);S(this,cu,!1);S(this,Zo,!1);S(this,Vi,null);S(this,lr,null);S(this,Qt,null);S(this,cr,null);S(this,X);const h=[...c(Pi,ua).values()];if(!Pi._initialized){Pi._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),v(this,X,e),this.pageIndex=t,this.div=i,v(this,Jo,r),v(this,Es,a),this.viewport=u,v(this,Qt,l),this.drawLayer=o,this._structTree=s,c(this,X).addLayer(this)}get isEmpty(){return c(this,fi).size===0}get isInvisible(){return this.isEmpty&&c(this,X).getMode()===se.NONE}updateToolbar(e){c(this,X).updateToolbar(e)}updateMode(e=c(this,X).getMode()){switch(E(this,$e,bm).call(this),e){case se.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case se.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case se.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of c(Pi,ua).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Qt))==null?void 0:t.div)}setEditingState(e){c(this,X).setEditingState(e)}addCommands(e){c(this,X).addCommands(e)}cleanUndoStack(e){c(this,X).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,Es))==null||t.div.classList.toggle("disabled",!e)}async enable(){v(this,Zo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of c(this,fi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(c(this,X).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!c(this,Es)){v(this,Zo,!1);return}const t=c(this,Es).getEditableAnnotations();for(const i of t){if(i.hide(),c(this,X).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}v(this,Zo,!1)}disable(){var s;v(this,cu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of c(this,fi).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(c(this,Es)){const r=c(this,Es).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(c(this,X).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(c(this,X).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}E(this,$e,bm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of c(Pi,ua).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,cu,!1)}getEditableAnnotation(e){var t;return((t=c(this,Es))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,X).getActive()!==e&&c(this,X).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Qt))!=null&&e.div&&!c(this,cr)){v(this,cr,new AbortController);const t=c(this,X).combinedSignal(c(this,cr));c(this,Qt).div.addEventListener("pointerdown",E(this,$e,UI).bind(this),{signal:t}),c(this,Qt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Qt))!=null&&e.div&&c(this,cr)&&(c(this,cr).abort(),v(this,cr,null),c(this,Qt).div.classList.remove("highlighting"))}enableClick(){if(c(this,la))return;v(this,la,new AbortController);const e=c(this,X).combinedSignal(c(this,la));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,la))==null||e.abort(),v(this,la,null)}attach(e){c(this,fi).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,X).isDeletedAnnotationElement(t)&&c(this,X).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,fi).delete(e.id),(t=c(this,Jo))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,cu)&&e.annotationElementId&&c(this,X).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,X).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,X).addDeletedAnnotationElement(e.annotationElementId),Ye.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,X).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,Zo)),c(this,X).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,or)&&(e._focusEventsAllowed=!1,v(this,or,setTimeout(()=>{v(this,or,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,X)._signal}),t.focus())},0))),e._structTreeParentId=(i=c(this,Jo))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return c(this,X).getId()}combinedSignal(e){return c(this,X).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,$e,rs))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,X).updateToolbar(e),c(this,X).updateMode(e);const{offsetX:i,offsetY:s}=E(this,$e,Ub).call(this),r=this.getNextId(),a=E(this,$e,jb).call(this,{parent:this,id:r,x:i,y:s,uiManager:c(this,X),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(Pi,ua).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,X)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=E(this,$e,jb).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:c(this,X),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(E(this,$e,Ub).call(this),!0)}setSelected(e){c(this,X).setSelected(e)}toggleSelected(e){c(this,X).toggleSelected(e)}unselect(e){c(this,X).unselect(e)}pointerup(e){var i;const{isMac:t}=pn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,ca)&&(v(this,ca,!1),!((i=c(this,$e,rs))!=null&&i.isDrawer&&c(this,$e,rs).supportMultipleDrawings))){if(!c(this,lu)){v(this,lu,!0);return}if(c(this,X).getMode()===se.STAMP){c(this,X).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var s;if(c(this,X).getMode()===se.HIGHLIGHT&&this.enableTextSelection(),c(this,ca)){v(this,ca,!1);return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(v(this,ca,!0),(s=c(this,$e,rs))!=null&&s.isDrawer){this.startDrawingSession(e);return}const i=c(this,X).getActive();v(this,lu,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus(),c(this,Vi)){c(this,$e,rs).startDrawing(this,c(this,X),!1,e);return}c(this,X).setCurrentDrawingSession(this),v(this,Vi,new AbortController);const t=c(this,X).combinedSignal(c(this,Vi));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(v(this,lr,null),this.commitOrRemove())},{signal:t}),c(this,$e,rs).startDrawing(this,c(this,X),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&v(this,lr,t);return}c(this,lr)&&setTimeout(()=>{var t;(t=c(this,lr))==null||t.focus(),v(this,lr,null)},0)}endDrawingSession(e=!1){return c(this,Vi)?(c(this,X).setCurrentDrawingSession(null),c(this,Vi).abort(),v(this,Vi,null),v(this,lr,null),c(this,$e,rs).endDrawing(e)):null}findNewParent(e,t,i){const s=c(this,X).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return c(this,Vi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Vi)&&c(this,$e,rs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,X).getActive())==null?void 0:e.parent)===this&&(c(this,X).commitOrRemove(),c(this,X).setActiveEditor(null)),c(this,or)&&(clearTimeout(c(this,or)),v(this,or,null));for(const i of c(this,fi).values())(t=c(this,Jo))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,c(this,fi).clear(),c(this,X).removeLayer(this)}render({viewport:e}){this.viewport=e,ml(this.div,e);for(const t of c(this,X).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,X).commitOrRemove(),E(this,$e,bm).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,ml(this.div,{rotation:i}),t!==i)for(const s of c(this,fi).values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,X).viewParameters.realScale}};Jo=new WeakMap,lu=new WeakMap,Es=new WeakMap,la=new WeakMap,or=new WeakMap,fi=new WeakMap,ca=new WeakMap,cu=new WeakMap,Zo=new WeakMap,Vi=new WeakMap,lr=new WeakMap,Qt=new WeakMap,cr=new WeakMap,X=new WeakMap,ua=new WeakMap,$e=new WeakSet,UI=function(e){c(this,X).unselectAll();const{target:t}=e;if(t===c(this,Qt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Qt).div.contains(t)){const{isMac:i}=pn.platform;if(e.button!==0||e.ctrlKey&&i)return;c(this,X).showAllEditors("highlight",!0,!0),c(this,Qt).div.classList.add("free"),this.toggleDrawing(),ig.startHighlighting(this,c(this,X).direction==="ltr",{target:c(this,Qt).div,x:e.x,y:e.y}),c(this,Qt).div.addEventListener("pointerup",()=>{c(this,Qt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,X)._signal}),e.preventDefault()}},rs=function(){return c(Pi,ua).get(c(this,X).getMode())},jb=function(e){const t=c(this,$e,rs);return t?new t.prototype.constructor(e):null},Ub=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+s),u=(r+o)/2-e,d=(a+l)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},bm=function(){for(const e of c(this,fi).values())e.isEmpty()&&e.remove()},Q(Pi,"_initialized",!1),S(Pi,ua,new Map([bb,Db,Lb,ig].map(e=>[e._editorType,e])));let Bb=Pi;var zi,Pf,un,el,xg,VI,Is,zb,zI,$b;const Wt=class Wt{constructor({pageIndex:e}){S(this,Is);S(this,zi,null);S(this,Pf,0);S(this,un,new Map);S(this,el,new Map);this.pageIndex=e}setParent(e){if(!c(this,zi)){v(this,zi,e);return}if(c(this,zi)!==e){if(c(this,un).size>0)for(const t of c(this,un).values())t.remove(),e.append(t);v(this,zi,e)}}static get _svgFactory(){return ce(this,"_svgFactory",new MA)}draw(e,t=!1,i=!1){const s=rn(this,Pf)._++,r=E(this,Is,zb).call(this),a=Wt._svgFactory.createElement("defs");r.append(a);const o=Wt._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,el).set(s,o);const u=i?E(this,Is,zI).call(this,a,l):null,d=Wt._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(r,e),c(this,un).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,t){const i=rn(this,Pf)._++,s=E(this,Is,zb).call(this),r=Wt._svgFactory.createElement("defs");s.append(r);const a=Wt._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Wt._svgFactory.createElement("mask");r.append(h),l=`mask_p${this.pageIndex}_${i}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=Wt._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Wt._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Wt._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const d=u.cloneNode();return s.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,e),c(this,un).set(i,s),i}finalizeDraw(e,t){c(this,el).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:i,bbox:s,rootClass:r,path:a}=t,o=typeof e=="number"?c(this,un).get(e):e;if(o){if(i&&E(this,Is,$b).call(this,o,i),s&&E(l=Wt,xg,VI).call(l,o,s),r){const{classList:u}=o;for(const[d,h]of Object.entries(r))u.toggle(d,h)}if(a){const d=o.firstChild.firstChild;E(this,Is,$b).call(this,d,a)}}}updateParent(e,t){if(t===this)return;const i=c(this,un).get(e);i&&(c(t,zi).append(i),c(this,un).delete(e),c(t,un).set(e,i))}remove(e){c(this,el).delete(e),c(this,zi)!==null&&(c(this,un).get(e).remove(),c(this,un).delete(e))}destroy(){v(this,zi,null);for(const e of c(this,un).values())e.remove();c(this,un).clear(),c(this,el).clear()}};zi=new WeakMap,Pf=new WeakMap,un=new WeakMap,el=new WeakMap,xg=new WeakSet,VI=function(e,[t,i,s,r]){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},Is=new WeakSet,zb=function(){const e=Wt._svgFactory.create(1,1,!0);return c(this,zi).append(e),e.setAttribute("aria-hidden",!0),e},zI=function(e,t){const i=Wt._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=Wt._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},$b=function(e,t){for(const[i,s]of Object.entries(t))s===null?e.removeAttribute(i):e.setAttribute(i,s)},S(Wt,xg);let Vb=Wt;globalThis.pdfjsTestingUtils={HighlightOutliner:Ab};ee.AbortException;ee.AnnotationEditorLayer;ee.AnnotationEditorParamsType;ee.AnnotationEditorType;ee.AnnotationEditorUIManager;ee.AnnotationLayer;ee.AnnotationMode;ee.ColorPicker;ee.DOMSVGFactory;ee.DrawLayer;ee.FeatureTest;var $U=ee.GlobalWorkerOptions;ee.ImageKind;ee.InvalidPDFException;ee.MissingPDFException;ee.OPS;ee.OutputScale;ee.PDFDataRangeTransport;ee.PDFDateString;ee.PDFWorker;ee.PasswordResponses;ee.PermissionFlag;ee.PixelsPerInch;ee.RenderingCancelledException;ee.TextLayer;ee.TouchManager;ee.UnexpectedResponseException;ee.Util;ee.VerbosityLevel;ee.XfaLayer;ee.build;ee.createValidAbsoluteUrl;ee.fetchData;var HU=ee.getDocument;ee.getFilenameFromUrl;ee.getPdfFilenameFromUrl;ee.getXfaPageViewport;ee.isDataScheme;ee.isPdfFile;ee.noContextMenu;ee.normalizeUnicode;ee.setLayerDimensions;ee.shadow;ee.stopEvent;ee.version;const GU="/UNNOBA.AI/assets/pdf.worker-BgryrOlp.mjs",oy={BASE_URL:"/api/distribucion-aulas",CAMPUS:{JUNIN:"junin",PERGAMINO:"pergamino"},BUILDINGS:{junin:{maria_eva_duarte:{name:"Edificio Mara Eva Duarte de Pern",address:"Newbery 355 y Sarmiento",googleMaps:"https://maps.google.com/?q=Newbery+355+y+Sarmiento+Junin",slug:"evaperon"},elvira_rawson:{name:"Edificio Elvira Rawson de Dellepiane",address:"Rivadavia 453 y Newbery",googleMaps:"https://maps.google.com/?q=Rivadavia+453+y+Newbery+Junin",slug:"anexo"},argenlac:{name:"Edificio Argenlac",address:"Gaucho Argentino y Ruta Nacional N7",googleMaps:"https://maps.google.com/?q=Gaucho+Argentino+y+Ruta+Nacional+N7+Junin",slug:"argenlac"}},pergamino:{}},PATTERNS:{TIME_SLOT:/(\d{1,2}:\d{2})\s*[-]\s*(\d{1,2}:\d{2})/g,CLASSROOM:/(?:Aula|Sala|Laboratorio|Lab)\s*([A-Z0-9\-]+)/gi,SUBJECT:/([A-Z][A-Za-z\s\.]+(?: I| II| III| IV| V| VI| VII| VIII| IX| X)?)/g,PROFESSOR:/(?:Prof\.|Dr\.|Lic\.|Mg\.)\s*([A-Z][a-z\s]+)/g,SUBJECT_CODE:/([A-Z]{3,4}\d{3})/g},COMMON_WORDS:["UNNOBA","Distribucin","Aulas","Fecha","Edificio","Horario","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],TIMEOUTS:{PDF_DOWNLOAD:1e4,PDF_PROCESSING:3e4},CACHE:{ENABLED:!0,DURATION:5*60*1e3}},qU=(n,e)=>`${oy.BASE_URL}/${n}?date=${e}`,WU=(n,e,t)=>`${oy.BASE_URL}/download?campus=${n}&building=${e}&date=${t}`,XU=n=>oy.BUILDINGS[n]||{},KU=(n,e)=>{const t=XU(n),i=[],s=Object.entries(t).map(([r,a])=>({key:r,...a}));return s.sort((r,a)=>r.key==="maria_eva_duarte"?-1:a.key==="maria_eva_duarte"?1:0),s.forEach(r=>{const a=WU(n,r.slug,e);i.push({url:a,buildingName:r.name,buildingSlug:r.slug})}),i};$U.workerSrc=GU;const YU=async n=>{try{return(await ge.get(n,{responseType:"arraybuffer",timeout:oy.TIMEOUTS.PDF_DOWNLOAD})).data}catch(e){throw console.error("Error al descargar PDF:",e),new Error(`No se pudo descargar el PDF desde ${n}`)}},QU=async n=>{try{const t=await HU({data:n}).promise;let i="";for(let s=1;s<=t.numPages;s++){const o=(await(await t.getPage(s)).getTextContent()).items.map(l=>l.str).join(" ");i+=o+`
`}return i}catch(e){throw console.error("Error al extraer texto del PDF:",e),new Error("No se pudo extraer el contenido del PDF")}},JU=async n=>{try{console.log(`Descargando PDF desde: ${n}`);const e=await YU(n);console.log("Extrayendo texto del PDF...");const t=await QU(e);return console.log(`Texto extrado exitosamente (${t.length} caracteres)`),t}catch(e){throw console.error("Error en extractTextFromPdf:",e),e}},$I=[/(lunes|martes|mircoles|jueves|viernes|sbado|domingo)\s+(\d{1,2})/i,/(\d{1,2})\s+de\s+(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,/(\d{1,2})\/(\d{1,2})/,/(\d{1,2})-(\d{1,2})/,/(\d{1,2})\s+de\s+(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)\s+de\s+(\d{4})/i,/^(\d{1,2})(?:\s|$|[^\d])/],v1=(n,e="junin")=>qU(e,n),ZU=n=>{n.toLowerCase();for(const e of $I){const t=n.match(e);if(t)return eV(t,e)}return null},eV=(n,e)=>{const t=new Date().getFullYear();if(new Date().getMonth()+1,e.source.includes("lunes|martes")){const i=parseInt(n[2]),s=new Date,r=s.getMonth()+1,a=s.getFullYear();return`${String(i).padStart(2,"0")}-${String(r).padStart(2,"0")}-${a}`}if(e.source.includes("de\\s+(enero|febrero")){const i=parseInt(n[1]),s=n[2].toLowerCase(),r=b1(s),a=t;return`${String(i).padStart(2,"0")}-${String(r).padStart(2,"0")}-${a}`}if(e.source.includes("\\/")){const i=parseInt(n[1]),s=parseInt(n[2]),r=t;return`${String(i).padStart(2,"0")}-${String(s).padStart(2,"0")}-${r}`}if(e.source.includes("-")){const i=parseInt(n[1]),s=parseInt(n[2]),r=t;return`${String(i).padStart(2,"0")}-${String(s).padStart(2,"0")}-${r}`}if(e.source.includes("de\\s+\\d{4}")){const i=parseInt(n[1]),s=n[2].toLowerCase(),r=b1(s),a=parseInt(n[3]);return`${String(i).padStart(2,"0")}-${String(r).padStart(2,"0")}-${a}`}if(e.source.includes("^\\d{1,2}")){const i=parseInt(n[1]),s=new Date,r=s.getMonth()+1,a=s.getFullYear();return`${String(i).padStart(2,"0")}-${String(r).padStart(2,"0")}-${a}`}return null},b1=n=>({enero:1,febrero:2,marzo:3,abril:4,mayo:5,junio:6,julio:7,agosto:8,septiembre:9,octubre:10,noviembre:11,diciembre:12})[n]||1,tV=(n,e="junin")=>KU(e,n);function nV(n){if(typeof n=="string")return n;(!(n instanceof Date)||isNaN(n))&&(n=new Date);const e=String(n.getDate()).padStart(2,"0"),t=String(n.getMonth()+1).padStart(2,"0"),i=n.getFullYear();return`${e}-${t}-${i}`}const dv=n=>n?n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[.,()]/g,"").replace(/\s+/g," ").trim():"",iV=async(n,e,t="junin")=>{const i=nV(e),s=tV(i,t);if(console.log("[DEBUG] Fecha consultada:",i),console.log("[DEBUG] PDFs a procesar:",s),s.length===0){const o=v1(i,t);return{found:!1,message:`No se encontr un cronograma para la fecha ${i}. Puedes consultar en: <a href="${o}" target="_blank" style="color:#005B96; font-weight:bold;">Distribucin de aulas</a>`}}const r=[],a=dv(n);try{for(const o of s)try{const l=await JU(o.url);if(!l)continue;console.log(`[DEBUG] Contenido crudo de ${o.buildingName}:`,l);const u=/((?:\d{1,3}\s+)?(?:Planta\s+Baja|\d{1,3}\s*(?:1er|2do|3er)\.?\s*Piso|AULA\s+MAGNA|LADIMI|Litic|Laboratorio|Sala[^\n(]*?))\s*\(Capacidad\s*(?:p\/)?\d+/gi,d=[];let h;for(;(h=u.exec(l))!==null;)d.push({name:h[1].trim(),startIndex:h.index,endIndex:h.index+h[0].length});if(d.length===0)continue;const f=/(\d{1,2}:\d{2}(?:\s*(?:a|A|h?asta)?\s*\d{1,2}:\d{2})?)/g;for(let p=0;p<d.length;p++){const m=d[p],y=d[p+1],A=m.endIndex,g=y?y.startIndex:l.length,b=l.substring(A,g),w=[];let C;for(;(C=f.exec(b))!==null;)w.push({time:C[0],start:C.index,end:C.index+C[0].length});if(w.length===0){dv(b).includes(a)&&r.push({subjects:b.trim(),classroom:m.name,schedule:"No especificado",building:o.buildingName});continue}let x=0;const _=a.replace(/\s+/g,"");for(const P of w){const R=b.substring(x,P.start).trim();if(x=P.end,R){const N=dv(R),D=N.replace(/\s+/g,"");!/^(planta\s*baja|\d+\s*(?:1er|2do|3er)?\s*piso|sala\s*\d+)/i.test(N)&&D.includes(_)&&r.push({subjects:R.replace(/[()]/g,"").trim(),classroom:m.name,schedule:P.time,building:o.buildingName})}}}}catch(l){console.error(`Error procesando el PDF de ${o.buildingName}:`,l)}if(r.length>0)return{found:!0,message:`Se encontr la siguiente informacin:<br /><br />${[...new Map(r.map(u=>[u.building+u.classroom+u.subjects,u])).values()].map(u=>` <b>Materia(s):</b> ${u.subjects}<br /> <b>Sede:</b> ${u.building}<br /> <b>Aula:</b> ${u.classroom}<br /> <b>Horario:</b> ${u.schedule}`).join("<br /><br />")}`};{const o=v1(i,t);return{found:!1,message:`No se encontr informacin sobre "${n}" en la distribucin del ${i}. Te recomiendo consultar directamente en: <a href="${o}" target="_blank" style="color:#005B96; font-weight:bold;">Distribucin de aulas</a>`}}}catch(o){return console.error("Error en findSubjectInDistribution:",o),{found:!1,message:"Ocurri un error al procesar el archivo de distribucin de aulas. Por favor, intenta de nuevo ms tarde."}}};function sV(n){const e=new Date;let t=new Date(e),i="",s=!1;const r=ZU(n);if(r){const[a,o,l]=r.split("-").map(Number);t=new Date(l,o-1,a),s=!0;let u=n,d="";for(const h of $I){const f=u.match(h);if(f){d=f[0];break}}d&&(u=u.replace(d,"").trim(),u=u.replace(/\s+(el|la|los|las|del|en|a|de)\s*(\?*)$/i,"$2").trim()),i=w1(u),console.log("[DEBUG] Query original:",n),console.log("[DEBUG] Fecha extrada:",r),console.log("[DEBUG] Query limpio (sin fecha):",u),console.log("[DEBUG] Materia extrada:",i)}else i=w1(n);return{date:t,subject:i,dateFound:s}}function w1(n){const e=n.replace(/\?$/,"").trim(),t=/^(?:y|o|qu tal con|qu hay de|y sobre|dime sobre|y para)\s+(.+)/i,i=e.match(t);if(i&&i[1])return i[1].trim();const s=[/dnde se cursa (.+?)(?: el |$)/i,/dnde cursar (.+?)(?: el |$)/i,/en qu aula se cursa (.+?)(?: el |$)/i,/(?:de|para|sobre) (.+?)(?: el |$)/i];for(const r of s){const a=e.match(r);if(a&&a[1])return a[1].trim()}return e}const rV=async(n,e)=>{const{date:t,subject:i}=e||{},{date:s,subject:r,dateFound:a}=sV(n);let o=r;const l=/^(esa materia|la misma|aquella|esa)$/i.test(o.trim());(!o||l)&&i&&(o=i);let u;return a?u=new Date(s):t?u=new Date(t):u=new Date,o?{isDistributionQuery:!0,...await iV(o,u),date:u,subject:o}:{isDistributionQuery:!1}},aV=n=>{const e=[],t=new Set,i=/([A-Z][a-z]+(?:\s+[a-z]+)*(?:\s+[A-Z][a-z]*)*(?:\s+I{1,3}|IV|V)?)\s*\(([0-9GE]+)\)/g;let s;for(;(s=i.exec(n))!==null;){let u=s[1].trim();u=u.replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"").replace(/^(a\s+|de\s+|la\s+|el\s+|los\s+|las\s+|en\s+|para\s+|con\s+)/i,""),u.length>3&&!u.match(/^(|er|do|Ao|Cuatrimestre)$/)&&!t.has(u)&&(t.add(u),e.push(u))}const r=/Optativa\s+(I{1,3}|IV|V|\d+)\s*\(([0-9GE]+)\)/gi;let a;for(;(a=r.exec(n))!==null;){const u=`Optativa ${a[1]}`;t.has(u)||(t.add(u),e.push(u))}if(e.length===0){const u=n.split(/[.!?]|\n/);for(const d of u){const h=d.trim();if(h.includes("(")&&h.includes(")")&&h.length>10){const f=h.split("(");if(f.length>=2){let p=f[0].trim();if(p=p.replace(/^\d+\.\s*/,"").replace(/\s{2,}/g," ").trim(),p.match(/^Optativa\s+(I{1,3}|IV|V|\d+)/i)){const m=p.match(/^Optativa\s+(I{1,3}|IV|V|\d+)/i);if(m){const y=`Optativa ${m[1]}`;t.has(y)||(t.add(y),e.push(y))}}else p.length>5&&!p.match(/^(Plan|Carrera|Versin|Posibles)/i)&&!t.has(p)&&(t.add(p),e.push(p))}}}}const o=[],l=new Set;for(const u of e){if(u.includes("Lengua Extranjera")){const p="Lengua Extranjera";l.has(p)||(l.add(p),o.push(p));continue}if(u.match(/^Optativa\s+(I{1,3}|IV|V|\d+)/i)){const p=u.match(/^Optativa\s+(I{1,3}|IV|V|\d+)/i);if(p){const m=`Optativa ${p[1]}`;l.has(m)||(l.add(m),o.push(m))}continue}const d=u.match(/^(Arquitectura\s+I|Calidad de Software|Sistemas de Representacin|Qumica General e Inorgnica|General e Inorgnica|Complementos de clculo|Antropologa de la Comunicacin|Comunicacin|Construccin de Prototipos|Administracin Avanzada de Redes|Redes y Servidores|Procesamiento de Seales|Serigrafa|Marketing|Introduccin a la Comercializacin|Mtodos|Legislacin|Seminario|Fotografa|Historia del Textil|Esttica)/i),h=o.some(p=>p.match(/^Optativa\s+(I{1,3}|IV|V|\d+)$/i));if(d&&h)continue;let f=!1;for(const p of o)if(p.includes(u)&&p!==u){f=!0;break}!f&&!l.has(u)&&(l.add(u),o.push(u))}return o},oV=()=>{const[n,e]=O.useState(""),[t,i]=O.useState(!1),[s,r]=O.useState([]),[a,o]=O.useState(!1),[l,u]=O.useState(""),[d,h]=O.useState(null),[f,p]=O.useState([]),[m,y]=O.useState([]),A=O.useRef(!1),g=O.useRef(!1),b=O.useRef(new zF(pp.apiKey)),w=O.useRef(null),C=O.useRef(null),x=O.useRef(null),_=te=>{C.current&&clearTimeout(C.current),h(te),C.current=setTimeout(()=>{h(null)},2e3)},P=async te=>{const F=b.current.getGenerativeModel({model:pp.model}),B=`Si el mensaje del usuario: ${te}
    esta relacionado a que necesita informacin sobre:
    inscripciones de materias, sobre el calendario academico, sobre inicio 
    del cuatrimestre, sobre el fin del cuatrimestre, sobre examenes finales, 
    vacaciones de invierno o confirmaciones de inscripciones. Vas a responder as 
    dependiendo a que informacin se refiere el usuario (sin el -):
    -incripciones materias
    -calendario academico
    -inicio cuatrimestre
    -fin cuatrimestre
    -examenes finales
    -vacaciones invierno
    -confirmacion inscripciones
    `;return(await F.generateContent(B)).response.text().toLowerCase().trim()},R=async te=>{const F=b.current.getGenerativeModel({model:pp.model}),B=`
    Dado este mensaje del usuario:

    "${te}"

    Tu tarea es identificar si el usuario est consultando sobre una carrera de la UNNOBA. 

     Si el usuario menciona una carrera, incluso con un nombre incompleto, con errores o de forma informal, devolv el nombre completo oficial y SIN ACENTOS tal como aparece en la siguiente lista (sin agregar ningn texto adicional):
    - analista en sistemas
    - ingenieria en informatica
    - ingenieria industrial
    - ingenieria mecanica
    - diseo grafico
    - diseo de indumentaria y textil
    - diseo industrial
    - tecnicatura en mantenimiento industrial
    - licenciatura en sistemas
    - tecnicatura en diseo y desarrollo de aplicaciones multiplataforma
    - ingenieria agronomica
    - licenciatura en genetica
    - contador publico
    - licenciatura en administracion
    - tecnicatura en gestion de pymes
    - tecnicatura en gestion publica
    - abogacia
    - licenciatura en enfermeria
    - enfermeria universitaria

     Por ejemplo:
    - Si el usuario escribe "quiero saber sobre gentica", respond: **"licenciatura en genetica"**
    - Si dice "cunto dura informatica", respond: **"ingenieria en informatica"**
    - Si no se refiere a ninguna carrera, respond exactamente **"ninguna"** (sin comillas).

    Respond nicamente con el nombre de la carrera, todo en minsculas, sin tildes ni otros comentarios.
    `;return(await F.generateContent(B)).response.text().toLowerCase().trim()},N=3e4,D=te=>Math.ceil(te.trim().split(/\s+/).length/.75),U=async te=>{const F={"ingenieria en informatica":()=>pt("ingenieria-informatica"),"analista en sistemas":()=>pt("analista-sistemas"),"licenciatura en sistemas":()=>pt("licenciatura-sistemas"),"tecnicatura en diseo y desarrollo de aplicaciones multiplataforma":()=>pt("tecnicatura-diseo-desarrollo-aplicaciones-multiplataforma"),"ingenieria industrial":()=>pt("ingenieria-industrial"),"ingenieria mecanica":()=>pt("ingenieria-mecanica"),"tecnicatura en mantenimiento industrial":()=>pt("tecnicatura-mantenimiento-industrial"),abogacia:()=>pt("abogacia"),"contador publico":()=>pt("contador-publico"),"licenciatura en administracion":()=>pt("licenciatura-administracion"),"tecnicatura en gestion publica":()=>pt("tecnicatura-gestion-publica"),"tecnicatura en gestion de pymes":()=>pt("tecnicatura-gestion-pymes"),"diseo grafico":()=>pt("diseo-grafico"),"diseo industrial":()=>pt("diseo-industrial"),"diseo de indumentaria y textil":()=>pt("diseo-indumentaria-y-textil"),"ingenieria agronomica":()=>pt("agronomia"),"licenciatura en genetica":()=>pt("genetica"),"ingenieria en alimentos":()=>pt("ingenieria-alimentos"),"enfermeria universitaria":()=>pt("enfermeria")},B={"inscripcion a materias":()=>$C(),feriados:()=>HC(),"calendario academico":()=>S3(),"inicio de cuatrimestres":()=>E3(),"fin de cuatrimestres":()=>C3(),"examenes finales":()=>x3(),"vacaciones de invierno":()=>GC(),"confirmacion de inscripcion":()=>T3()};if(!te)return;o(!0),u("");const M=[...s,{type:"userMsg",text:te}];r(M),e(""),i(!0);const T=te.toLowerCase(),Y=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];if(["materias","materia","plan de estudios","asignaturas","asignatura"].some(k=>T.includes(k))){const k=await R(te);if(k!=="ninguna"&&F[k])try{const Ne=await F[k](),V=aV(Ne);if(V&&V.length>0){let lt=` Materias de ${k.toUpperCase()} - UNNOBA

`;V.forEach(ue=>{lt+=` ${ue}
`});let Ue=0;const $=setInterval(()=>{var ue;Ue<lt.length?(u(lt.substring(0,Ue+1)),Ue++,(ue=x.current)==null||ue.scrollIntoView({behavior:"smooth"})):(clearInterval($),r(ye=>[...ye,{type:"responseMsg",text:lt}]),u(""),o(!1))},es);return}}catch(Ne){console.error("Error obteniendo materias de carrera:",Ne)}}const Vt=["inscripcion","inscripcin","materias","materia","cursada","cursadas","asignaturas","asignatura","cuatrimestre"].some(k=>T.includes(k))&&(T.includes("cuando")||T.includes("cundo")||T.includes("fecha")||T.includes("fechas")||T.includes("inicio")||T.includes("periodo")||T.includes("perodo")||T.includes("plazo"))&&(T.includes("materia")||T.includes("materias")||T.includes("cursada")||T.includes("cuatrimestre")),Ci=!T.includes("final")&&!T.includes("finales")&&!T.includes("examen")&&!T.includes("mesa");if(Vt&&Ci)try{let k;const V=["requisito","requisitos","regularidad","regular","puntos","como funciona","cmo funciona","que necesito","qu necesito","condicion","condicin","correlatividad","correlatividades","usuario","contrasea","sistema","guarani","siu"].some(ue=>T.includes(ue));T.includes("primer")&&T.includes("cuatrimestre")?k=await w3():T.includes("segundo")&&T.includes("cuatrimestre")?k=await A3():V?k=await b3():k=await $C();const lt=Tr(k);let Ue=0;const $=setInterval(()=>{var ue;Ue<lt.length?(u(lt.substring(0,Ue+1)),Ue++,(ue=x.current)==null||ue.scrollIntoView({behavior:"smooth"})):(clearInterval($),r(ye=>[...ye,{type:"responseMsg",text:lt}]),u(""),o(!1))},es);return}catch(k){console.error("Error obteniendo informacin de inscripcin a materias:",k)}const je=["mesa","examen","final","finales","turno","fecha","fechas","cuando","cundo","da","dias","das"];for(const k of Y)if(T.includes(k)){const Ne=je.some(Ue=>T.includes(Ue)),lt=new RegExp(`(finales|final|mesa|examen|turno).*${k}|${k}.*(finales|final|mesa|examen|turno|fecha|fechas)`,"i").test(T);if(Ne||lt)try{const Ue=await _3(k),$=Tr(Ue);let ue=0;const ye=setInterval(()=>{var nt;ue<$.length?(u($.substring(0,ue+1)),ue++,(nt=x.current)==null||nt.scrollIntoView({behavior:"smooth"})):(clearInterval(ye),r(zt=>[...zt,{type:"responseMsg",text:$}]),u(""),o(!1))},es);return}catch(Ue){console.error(`Error obteniendo exmenes de ${k}:`,Ue)}}for(const[k,Ne]of Object.entries(L3)){const V=k.toLowerCase();if(["final","finales","examen","mesa","inscripcion","inscripcin","revalida","revlida","correlativa","correlativas","libre","regular","regularidad","baja","inasistencia","oportunidades"].some($=>T.includes($))){let $=!1;if(V.includes("cundo")&&V.includes("mesas")&&(T.includes("cuando")||T.includes("cundo")||T.includes("mesas")||T.includes("fechas"))&&!Y.some(ue=>T.includes(ue))?$=k==="Cundo son las mesas de finales?":V.includes("qu es")&&V.includes("exmen")&&(T.includes("que es")||T.includes("qu es")||T.includes("definicion")||T.includes("significa"))?$=k==="Qu es un exmen final?":V.includes("cmo")&&V.includes("inscribo")&&(T.includes("como")||T.includes("cmo")||T.includes("inscribir")||T.includes("inscripcion"))?$=k==="Cmo me inscribo a un examen?":V.includes("falto")&&(T.includes("falto")||T.includes("ausente")||T.includes("no voy")||T.includes("inasistencia"))?$=k==="Qu pasa si falto a un final?":V.includes("baja")&&(T.includes("baja")||T.includes("cancelar")||T.includes("desinscribo")||T.includes("plazo"))?$=k==="Hasta cundo tengo tiempo de darme de baja a un final?":V.includes("no apruebo")&&(T.includes("desapruebo")||T.includes("no apruebo")||T.includes("repruebo")||T.includes("no paso"))?$=k==="Qu pasa si no apruebo un examen final?":V.includes("cuntas veces")&&(T.includes("cuantas")||T.includes("cuntas")||T.includes("oportunidades")||T.includes("intentos"))?$=k==="Cuntas veces puedo rendir un examen final?":V.includes("correlativas")&&(T.includes("correlativa")||T.includes("correlativas")||T.includes("prerequisito")||T.includes("dependencia"))?$=k==="Qu son las materias correlativas?":V.includes("reviso")&&V.includes("correlativas")&&(T.includes("donde")||T.includes("dnde")||T.includes("consulto")||T.includes("veo"))?$=k==="Dnde reviso las correlativas?":V.includes("revlidas")&&(T.includes("revalida")||T.includes("revlida")||T.includes("prorroga")||T.includes("prrroga"))?$=k==="Qu son las revlidas?":V.includes("solicito")&&V.includes("revlida")&&(T.includes("solicito")||T.includes("pido")||T.includes("tramito")||T.includes("proceso"))?$=k==="Cmo solicito una revlida?":V.includes("no soy regular")&&(T.includes("no soy regular")||T.includes("sin regularidad")||T.includes("irregular")||T.includes("perd regularidad"))?$=k==="Qu pasa si no soy regular?Puedo inscribirme a un final?":V.includes("libre")&&(T.includes("libre")||T.includes("sin cursar")||T.includes("directo")||T.includes("sin regularidad"))&&($=k==="Puedo rendir un final libre?"),$){const ue=Tr(Ne);let ye=0;const nt=setInterval(()=>{var zt;if(ye<ue.length){if(u(ue.substring(0,ye+1)),A.current){clearInterval(nt);const Re=ue.substring(0,ye)+". Se ha interrumpido la respuesta.";r(xi=>[...xi,{type:"responseMsg",text:Re}]),u(""),o(!1),A.current=!1;return}ye++,(zt=x.current)==null||zt.scrollIntoView({behavior:"smooth"})}else clearInterval(nt),r(Re=>[...Re,{type:"responseMsg",text:ue}]),u(""),o(!1)},es);return}}}for(const[k,Ne]of Object.entries(O3)){const V=k.toLowerCase();if(["tesis","trabajo final","investigacion","investigacin","director","codirector","reglamento","requisitos","inscripcion tesis","inscripcin tesis","orientacion","orientacin"].some($=>T.includes($))){let $=!1;if(V.includes("qu es")&&V.includes("tesis")&&(T.includes("que es")||T.includes("qu es")||T.includes("definicion")||T.includes("significa"))?$=k==="Qu es la tesis de grado?":(V.includes("obligatoria")||V.includes("obligatorio"))&&(T.includes("obligatoria")||T.includes("obligatorio")||T.includes("necesaria")||T.includes("requisito"))?$=k==="La tesis es obligatoria para recibirme?":V.includes("ao")&&V.includes("tesis")&&(T.includes("ao")||T.includes("cuando")||T.includes("cundo")||T.includes("etapa"))?$=k==="En qu ao se hace la tesis?":V.includes("inscribe")&&(T.includes("inscrib")||T.includes("como")||T.includes("cmo")||T.includes("proceso"))?$=k==="Cmo se inscribe uno a la tesis?":V.includes("requisitos")&&(T.includes("requisitos")||T.includes("necesito")||T.includes("condiciones")||T.includes("empezar"))?$=k==="Cules son los requisitos para comenzar la tesis?":V.includes("tiempo")&&(T.includes("tiempo")||T.includes("plazo")||T.includes("duracin")||T.includes("cuanto"))?$=k==="Cunto tiempo tengo para hacer la tesis?":V.includes("reglamento")&&(T.includes("reglamento")||T.includes("donde encuentro")||T.includes("dnde encuentro")||T.includes("normativa"))?$=k==="Dnde encuentro el reglamento de tesis de mi carrera?":V.includes("entrega")&&V.includes("informe")&&(T.includes("entrega")||T.includes("presento")||T.includes("donde")||T.includes("dnde"))?$=k==="Dnde se entrega el informe final de tesis?":V.includes("orientar")&&(T.includes("orientar")||T.includes("ayuda")||T.includes("consulto")||T.includes("iniciar"))&&($=k==="Quin me puede orientar sobre cmo iniciar una tesis?"),$){const ue=Tr(Ne);let ye=0;const nt=setInterval(()=>{var zt;if(ye<ue.length){if(u(ue.substring(0,ye+1)),A.current){clearInterval(nt);const Re=ue.substring(0,ye)+". Se ha interrumpido la respuesta.";r(xi=>[...xi,{type:"responseMsg",text:Re}]),u(""),o(!1),A.current=!1;return}ye++,(zt=x.current)==null||zt.scrollIntoView({behavior:"smooth"})}else clearInterval(nt),r(Re=>[...Re,{type:"responseMsg",text:ue}]),u(""),o(!1)},es);return}}}for(const[k,Ne]of Object.entries(F3)){const V=k.toLowerCase();if(["titulo","ttulo","tramite","trmite","diploma","expedicion","expedicin","graduacion","graduacin","retiro","pregrado","grado","posgrado"].some($=>T.includes($))){let $=!1;if(V.includes("necesita")&&V.includes("tramitar")&&(T.includes("necesito")||T.includes("tramitar")||T.includes("empezar")||T.includes("inicio"))?$=k==="Qu se necesita para empezar a tramitar el ttulo universitario?":V.includes("cmo tramito")&&(T.includes("como")||T.includes("cmo")||T.includes("proceso")||T.includes("procedimiento"))?$=k==="Cmo tramito mi ttulo universitario?":V.includes("tipo")&&V.includes("ttulos")&&(T.includes("tipos")||T.includes("tipo")||T.includes("ofrece")||T.includes("clases"))?$=k==="Qu tipo de ttulos ofrece la UNNOBA?":V.includes("demora")&&(T.includes("demora")||T.includes("tarda")||T.includes("tiempo")||T.includes("cuanto"))?$=k==="Cunto demora obtener el ttulo?":V.includes("retiro")&&(T.includes("retiro")||T.includes("recojo")||T.includes("donde")||T.includes("dnde"))?$=k==="Dnde retiro el ttulo?":V.includes("plazo")&&V.includes("retirar")&&(T.includes("plazo")||T.includes("tiempo limite")||T.includes("vencimiento")||T.includes("expira"))&&($=k==="Hay plazo para retirar el ttulo?"),$){const ue=Tr(Ne);let ye=0;const nt=setInterval(()=>{var zt;if(ye<ue.length){if(u(ue.substring(0,ye+1)),A.current){clearInterval(nt);const Re=ue.substring(0,ye)+". Se ha interrumpido la respuesta.";r(xi=>[...xi,{type:"responseMsg",text:Re}]),u(""),o(!1),A.current=!1;return}ye++,(zt=x.current)==null||zt.scrollIntoView({behavior:"smooth"})}else clearInterval(nt),r(Re=>[...Re,{type:"responseMsg",text:ue}]),u(""),o(!1)},es);return}}}for(const[k,Ne]of Object.entries(B3)){const V=k.toLowerCase();if(["comedor","almuerzo","almorzar","reserva","reservar","cancelar","taller comedor","contacto comedor","horario comedor","donde queda","ubicacion","ubicacin"].some($=>T.includes($))){let $=!1;if(V.includes("dnde queda")&&(T.includes("donde")||T.includes("dnde")||T.includes("ubicacion")||T.includes("ubicacin")||T.includes("queda"))?$=k==="Dnde queda el comedor?":V.includes("cundo abre")&&(T.includes("cuando")||T.includes("cundo")||T.includes("abre")||T.includes("horario")||T.includes("horarios"))?$=k==="Cundo abre el comedor universitario?":V.includes("cmo reservar")&&(T.includes("como")||T.includes("cmo")||T.includes("reservar")||T.includes("reserva"))?$=k==="Cmo reservar el almuerzo?":V.includes("hasta qu hora")&&V.includes("reservar")&&(T.includes("hasta")||T.includes("hora")||T.includes("limite")||T.includes("lmite"))?$=k==="Hasta qu hora puedo reservar el almuerzo?":V.includes("cancelar")&&(T.includes("cancelar")||T.includes("eliminar")||T.includes("anular")||T.includes("borrar"))?$=k==="Puedo cancelar una reserva ya hecha?":V.includes("contacto")&&(T.includes("contacto")||T.includes("telefono")||T.includes("telfono")||T.includes("whatsapp")||T.includes("comunicar"))&&($=k==="Cul es el contacto del comedor?"),$){const ue=Tr(Ne);let ye=0;const nt=setInterval(()=>{var zt;if(ye<ue.length){if(u(ue.substring(0,ye+1)),A.current){clearInterval(nt);const Re=ue.substring(0,ye)+". Se ha interrumpido la respuesta.";r(xi=>[...xi,{type:"responseMsg",text:Re}]),u(""),o(!1),A.current=!1;return}ye++,(zt=x.current)==null||zt.scrollIntoView({behavior:"smooth"})}else clearInterval(nt),r(Re=>[...Re,{type:"responseMsg",text:ue}]),u(""),o(!1)},es);return}}}if(["feriado","feriados","dia no laborable","das no laborables","da no laborable","no laborable","no laborables"].some(k=>T.includes(k))||(T.includes("cuando")||T.includes("cundo"))&&(T.includes("feriado")||T.includes("no laborable")))try{const k=await HC(),Ne=Tr(k);let V=0;const lt=setInterval(()=>{var Ue;V<Ne.length?(u(Ne.substring(0,V+1)),V++,(Ue=x.current)==null||Ue.scrollIntoView({behavior:"smooth"})):(clearInterval(lt),r($=>[...$,{type:"responseMsg",text:Ne}]),u(""),o(!1))},es);return}catch(k){console.error("Error obteniendo informacin de feriados:",k)}if(["vacaciones","receso","invernal","invierno","vacaciones de invierno","receso invernal"].some(k=>T.includes(k))&&(T.includes("cuando")||T.includes("cundo")||T.includes("fecha")||T.includes("fechas")||T.includes("son")||T.includes("es")))try{const k=await GC(),Ne=Tr(k);let V=0;const lt=setInterval(()=>{var Ue;V<Ne.length?(u(Ne.substring(0,V+1)),V++,(Ue=x.current)==null||Ue.scrollIntoView({behavior:"smooth"})):(clearInterval(lt),r($=>[...$,{type:"responseMsg",text:Ne}]),u(""),o(!1))},es);return}catch(k){console.error("Error obteniendo informacin de vacaciones de invierno:",k)}const Gf=await R(te);let qf="",cy=!1;if(Gf!=="ninguna"&&F[Gf]){for(let k=0;k<f.length;k++)Gf==f[k]&&(cy=!0);cy||cy||(qf=await F[Gf](),p([...f,qf]))}const Pu=await P(te);let VA="",zA=!1;if(Pu!=="ninguna"&&B[Pu]){for(let k of m)if(k.tipo===Pu){zA=!0;break}zA||(VA=await B[Pu](),y(k=>[...k,{tipo:Pu,contenido:VA}]))}const $A=[];if(qf){const k=R3(qf),Ne=P3(k);$A.push({role:"user",parts:[{text:Ne}]})}const eN=m.map(k=>({role:"user",parts:[{text:`${k.tipo.toUpperCase()}:
${k.contenido}`}]}));try{const k=[{role:"user",parts:[{text:I3}]},{role:"user",parts:[{text:N3}]},{role:"user",parts:[{text:k3}]},{role:"user",parts:[{text:M3}]},...$A,...eN,...M.map(Re=>({role:Re.type==="userMsg"?"user":"model",parts:[{text:Re.text}]}))];if(!w.current){const Re=b.current.getGenerativeModel({model:pp.model});w.current=await Re.startChat({history:k})}const Ne=k.map(Re=>Re.parts[0].text).join(" "),V=D(Ne);if(console.log(V),V>N){r(Re=>[...Re,{type:"responseMsg",text:" Has superado el lmite de tokens permitidos en esta sesin. Por favor, presion *Nuevo Chat* para comenzar una nueva conversacin."}]),o(!1);return}const lt=`${te}

Recuerda: solo puedo ayudarte con temas relacionados con la UNNOBA.`,$=(await w.current.sendMessage(lt)).response.text(),ue=$.trim().split(/\s+/).length;if(console.log($),!$||$.trim().length===0)throw new Error("Respuesta vaca de la IA");let ye=ue>U3?"Lo siento, ese ltimo mensaje conlleva una respuesta demasiado larga...":$,nt=0;const zt=setInterval(()=>{var Re;if(nt<ye.length){if(u(ye.substring(0,nt+1)),A.current){clearInterval(zt);const xi=ye.substring(0,nt)+". Se ha interrumpido la respuesta.";r(tN=>[...tN,{type:"responseMsg",text:xi}]),o(!1),A.current=!1}g.current&&(ye=ye.slice(0,nt)+`
`+ye.slice(nt),g.current=!1),nt++,(Re=x.current)==null||Re.scrollIntoView({behavior:"smooth"})}else clearInterval(zt),r(xi=>[...xi,{type:"responseMsg",text:ye}]),u(""),o(!1)},es)}catch(k){console.error("Error generating response:",k)}},fe=async()=>{if(!n.trim()){_("Debes escribir un mensaje");return}h(null);const te=n.toLowerCase();if(te.includes("dnde se cursa")||te.includes("dnde cursar")||te.includes("en qu aula")||te.includes("en qu edificio")||te.includes("distribucin de aulas")||te.includes("edificios")||te.includes("ubicacin")){const B=await rV(n),M=typeof B.message=="string"?B.message:"No se pudo obtener una respuesta.";ae(n,M),e("");return}const F=$3(n,V3);if(F){ae(n,F.response),e("");return}else U(n)},Ae=()=>{i(!1),r([]),p([]),w.current=null},ae=(te,F)=>{r(B=>[...B,{type:"userMsg",text:te},{type:"responseMsg",text:F}]),i(!0)};return{message:n,setMessage:e,isResponseScreen:t,messages:s,isGenerating:a,streamedResponse:l,error:d,messagesEndRef:x,pausarUnnobaAi:A,saltosDeLinea:g,hitRequest:fe,newChat:Ae,generateResponse:U,addPredefinedResponse:ae,showError:_,stopGenerating:()=>{A.current=!0}}};var HI={exports:{}},lV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cV=lV,uV=cV;function GI(){}function qI(){}qI.resetWarningCache=GI;var dV=function(){function n(i,s,r,a,o,l){if(l!==uV){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qI,resetWarningCache:GI};return t.PropTypes=t,t};HI.exports=dV();var hV=HI.exports;const Fe=C1(hV),Hb=({isDarkMode:n,toggleTheme:e,onNewChat:t,isGenerating:i,showNewChatButton:s=!1})=>W.jsxs("div",{className:"header header-always-centered",children:[W.jsx("div",{className:"header-spacer"}),W.jsx(Rt.h1,{initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:300},className:"main-title",children:"UNNOBA.AI"}),W.jsxs("div",{className:"header-buttons",children:[W.jsx(Rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-theme",onClick:e,style:{backgroundColor:n?"#f59e0b":"#374151",color:n?"#111827":"white"},children:n?"":""}),s&&W.jsx(Rt.button,{whileHover:i?{}:{scale:1.05},whileTap:i?{}:{scale:.95},className:"btn-primary",onClick:t,disabled:i,children:"Nuevo Chat"})]})]});Hb.propTypes={isDarkMode:Fe.bool.isRequired,toggleTheme:Fe.func.isRequired,onNewChat:Fe.func,isGenerating:Fe.bool,showNewChatButton:Fe.bool};var WI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},A1=tl.createContext&&tl.createContext(WI),fV=["attr","size","title"];function pV(n,e){if(n==null)return{};var t=mV(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function mV(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function rg(){return rg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},rg.apply(this,arguments)}function S1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function ag(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S1(Object(t),!0).forEach(function(i){gV(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S1(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function gV(n,e,t){return e=yV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yV(n){var e=vV(n,"string");return typeof e=="symbol"?e:e+""}function vV(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XI(n){return n&&n.map((e,t)=>tl.createElement(e.tag,ag({key:t},e.attr),XI(e.child)))}function Hf(n){return e=>tl.createElement(bV,rg({attr:ag({},n.attr)},e),XI(n.child))}function bV(n){var e=t=>{var{attr:i,size:s,title:r}=n,a=pV(n,fV),o=s||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),tl.createElement("svg",rg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:l,style:ag(ag({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),r&&tl.createElement("title",null,r),n.children)};return A1!==void 0?tl.createElement(A1.Consumer,null,t=>e(t)):e(WI)}function wV(n){return Hf({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M357.57 223.94a79.48 79.48 0 0 0 56.58-23.44l77-76.95c6.09-6.09 6.65-16 .85-22.39a16 16 0 0 0-23.17-.56l-68.63 68.58a12.29 12.29 0 0 1-17.37 0c-4.79-4.78-4.53-12.86.25-17.64l68.33-68.33a16 16 0 0 0-.56-23.16A15.62 15.62 0 0 0 440.27 56a16.71 16.71 0 0 0-11.81 4.9l-68.27 68.26a12.29 12.29 0 0 1-17.37 0c-4.78-4.78-4.53-12.86.25-17.64l68.33-68.31a16 16 0 0 0-.56-23.16A15.62 15.62 0 0 0 400.26 16a16.73 16.73 0 0 0-11.81 4.9L311.5 97.85a79.49 79.49 0 0 0-23.44 56.59v8.23a16 16 0 0 1-4.69 11.33l-35.61 35.62a4 4 0 0 1-5.66 0L68.82 36.33a16 16 0 0 0-22.58-.06C31.09 51.28 23 72.47 23 97.54c-.1 41.4 21.66 89 56.79 124.08l85.45 85.45A64.79 64.79 0 0 0 211 326a64 64 0 0 0 16.21-2.08 16.24 16.24 0 0 1 4.07-.53 15.93 15.93 0 0 1 10.83 4.25l11.39 10.52a16.12 16.12 0 0 1 4.6 11.23v5.54a47.73 47.73 0 0 0 13.77 33.65l90.05 91.57.09.1a53.29 53.29 0 0 0 75.36-75.37L302.39 269.9a4 4 0 0 1 0-5.66L338 228.63a16 16 0 0 1 11.32-4.69z"},child:[]},{tag:"path",attr:{d:"M211 358a97.32 97.32 0 0 1-68.36-28.25l-13.86-13.86a8 8 0 0 0-11.3 0l-85 84.56c-15.15 15.15-20.56 37.45-13.06 59.29a30.63 30.63 0 0 0 1.49 3.6C31 484 50.58 496 72 496a55.68 55.68 0 0 0 39.64-16.44L225 365.66a4.69 4.69 0 0 0 1.32-3.72v-.26a4.63 4.63 0 0 0-5.15-4.27A97.09 97.09 0 0 1 211 358z"},child:[]}]})(n)}function AV(n){return Hf({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"},child:[]}]})(n)}function SV(n){return Hf({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm96 240h-96a16 16 0 0 1-16-16V128a16 16 0 0 1 32 0v128h80a16 16 0 0 1 0 32z"},child:[]}]})(n)}function EV(n){return Hf({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2.76 20.2a2.73 2.73 0 0 0 2.15.85 8.86 8.86 0 0 0 3.37-.86 9 9 0 0 0 12.27-10.9c1.31-2.23 1.75-4.26.67-5.48a2.94 2.94 0 0 0-2.57-1A5 5 0 0 0 16.1 4 9 9 0 0 0 3.58 15.14c-1.06 1.21-2.05 3.68-.82 5.06zm1.5-1.32c-.22-.25 0-1.07.37-1.76a9.26 9.26 0 0 0 1.57 1.74c-1.03.3-1.71.28-1.94.02zm14.51-5.17A7 7 0 0 1 15.58 18 7.12 7.12 0 0 1 12 19a6.44 6.44 0 0 1-1.24-.13 30.73 30.73 0 0 0 4.42-3.29 31.5 31.5 0 0 0 3.8-4 6.88 6.88 0 0 1-.21 2.13zm.09-8.89a.94.94 0 0 1 .87.32c.23.26.16.94-.26 1.93a9.2 9.2 0 0 0-1.61-1.86 2.48 2.48 0 0 1 1-.39zM5.22 10.31A6.94 6.94 0 0 1 8.41 6 7 7 0 0 1 12 5a6.9 6.9 0 0 1 6 3.41 5.19 5.19 0 0 1 .35.66 27.43 27.43 0 0 1-4.49 5A27.35 27.35 0 0 1 8.35 18a7 7 0 0 1-3.13-7.65z"},child:[]}]})(n)}function CV(n){return Hf({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"},child:[]},{tag:"path",attr:{d:"M9.5 9h.01"},child:[]},{tag:"path",attr:{d:"M14.5 9h.01"},child:[]},{tag:"path",attr:{d:"M9.5 13a3.5 3.5 0 0 0 5 0"},child:[]}]})(n)}const KI=({question:n,icon:e,onClick:t,index:i})=>{const s={hidden:{opacity:0,y:20},visible:r=>({opacity:1,y:0,transition:{delay:r*.1,duration:.5,ease:"easeOut"}}),hover:{scale:1.03,y:-5}};return W.jsxs(Rt.div,{custom:i,variants:s,whileHover:"hover",className:"card",onClick:()=>t(n.split(`
`).join(" ")),children:[W.jsx("p",{className:"card-text",children:n}),W.jsx("div",{className:"card-icon",children:e})]})};KI.propTypes={question:Fe.string.isRequired,icon:Fe.node.isRequired,onClick:Fe.func.isRequired,index:Fe.number.isRequired};const YI=({onCardClick:n})=>{const[e,t]=O.useState("");O.useEffect(()=>{if(e.length<qC.length){const r=setTimeout(()=>{t(qC.substring(0,e.length+1))},j3);return()=>clearTimeout(r)}},[e]);const i={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1}}},s=[{question:"Dnde puedo contactar a la universidad o cules son sus redes sociales?",icon:W.jsx(EV,{})},{question:"Como utilizo la plataforma virtual o campus?",icon:W.jsx(CV,{})},{question:"Cmo y cundo me inscribo a materias o finales?",icon:W.jsx(SV,{})},{question:"Cmo funciona el comedor?",icon:W.jsx(wV,{})}];return W.jsxs(Rt.div,{className:"welcome-screen",variants:i,initial:"hidden",animate:"visible",children:[W.jsx("div",{className:"welcome-message-container",children:W.jsx("p",{className:"welcome-message",children:e})}),W.jsx("div",{className:"cards-grid",children:s.map((r,a)=>W.jsx(KI,{index:a,question:r.question,icon:r.icon,onClick:n},a))})]})};YI.propTypes={onCardClick:Fe.func.isRequired};const QI=({message:n,isUser:e})=>{const t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},i=s=>e?s:s.includes("CALENDAR")||s.includes("ACADMICO")||s.includes("")||s.includes("EXMENES")||s.includes("INSCRIPCIONES")||s.includes("FERIADOS")?HP(s):/\d{4}-\d{2}-\d{2}|\d{1,2}\s+de\s+\w+|\w+\s+\d{1,2}\s+al?\s+\d{1,2}/i.test(s)?$P(s):bu(s);return W.jsx(Rt.div,{variants:t,className:`message-bubble ${e?"user-message":"bot-message"}`,dangerouslySetInnerHTML:{__html:i(n)}})};QI.propTypes={message:Fe.string.isRequired,isUser:Fe.bool.isRequired};const xV=()=>W.jsxs("div",{className:"loading-dots",children:[W.jsx("div",{className:"loading-dot"}),W.jsx("div",{className:"loading-dot"}),W.jsx("div",{className:"loading-dot"})]}),TV=()=>{const n={blinking:{opacity:[0,1,0],transition:{duration:1,repeat:1/0,repeatDelay:0}}};return W.jsx(Rt.span,{className:"typing-cursor",variants:n,animate:"blinking"})},JI=({messages:n,isGenerating:e,streamedResponse:t,messagesEndRef:i})=>{const s={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1}}},r={hidden:{opacity:0},visible:{opacity:1,transition:{repeat:1/0,repeatType:"reverse",duration:.8}}},a=o=>o?o.includes("CALENDAR")||o.includes("ACADMICO")||o.includes("")||o.includes("EXMENES")||o.includes("INSCRIPCIONES")||o.includes("FERIADOS")?HP(o):/\d{4}-\d{2}-\d{2}|\d{1,2}\s+de\s+\w+|\w+\s+\d{1,2}\s+al?\s+\d{1,2}/i.test(o)?$P(o):bu(o):"";return W.jsx(Rt.div,{className:"messages-container",variants:s,initial:"hidden",animate:"visible",children:W.jsxs("div",{className:"messages-content",children:[n==null?void 0:n.map((o,l)=>W.jsx(QI,{message:o.text,isUser:o.type==="userMsg"},l)),e&&t&&W.jsxs("div",{className:"streaming-response",children:[W.jsx(Rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bot-message streaming-message",dangerouslySetInnerHTML:{__html:a(t)}}),W.jsx(TV,{})]}),e&&!t&&W.jsx(Rt.div,{variants:r,animate:"visible",initial:"hidden",className:"bot-message loading-message",children:W.jsx(xV,{})}),W.jsx("div",{ref:i})]})})};JI.propTypes={messages:Fe.arrayOf(Fe.shape({type:Fe.string.isRequired,text:Fe.string.isRequired})).isRequired,isGenerating:Fe.bool.isRequired,streamedResponse:Fe.string.isRequired,messagesEndRef:Fe.object.isRequired};const ZI=({message:n,setMessage:e,onSend:t,isGenerating:i,error:s,onStop:r})=>{const a=O.useRef(null),o=l=>{l.key==="Enter"&&t()};return W.jsxs("div",{className:"input-container",children:[W.jsxs(Rt.div,{className:"inputBox",whileFocus:{boxShadow:"0 0 0 2px rgba(0, 91, 150, 0.2)"},children:[W.jsx("input",{ref:a,value:n,onChange:l=>e(l.target.value),onKeyDown:o,type:"text",className:"input-field",placeholder:"Escribe tu mensaje aqu...",disabled:i}),n&&!i&&W.jsx(Rt.button,{className:"send-button",onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},children:W.jsx(AV,{})}),i&&W.jsx(Rt.button,{className:"stop-button",onClick:r,whileHover:{scale:1.1},whileTap:{scale:.9},children:W.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:W.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1",ry:"1"})})})]}),s&&W.jsx(Rt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"error-message",children:s})]})};ZI.propTypes={message:Fe.string.isRequired,setMessage:Fe.func.isRequired,onSend:Fe.func.isRequired,isGenerating:Fe.bool.isRequired,error:Fe.string,onStop:Fe.func};const _V=()=>{const{isDarkMode:n,toggleTheme:e}=hF(),{message:t,setMessage:i,isResponseScreen:s,messages:r,isGenerating:a,streamedResponse:o,error:l,messagesEndRef:u,pausarUnnobaAi:d,saltosDeLinea:h,hitRequest:f,newChat:p,generateResponse:m,addPredefinedResponse:y,stopGenerating:A}=oV();O.useEffect(()=>{const b=w=>{w.key==="u"&&(h.current=!0)};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[h]),O.useEffect(()=>{const b=w=>{w.key==="x"&&(d.current=!0)};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[d]),O.useEffect(()=>{var b;(b=u.current)==null||b.scrollIntoView({behavior:"smooth"})},[r,o,u]);const g=b=>{const w=D3[b];w?y(b,w):(i(b),setTimeout(()=>{m(b)},300))};return W.jsxs("div",{className:"container",children:[W.jsx(IL,{mode:"wait",children:s?W.jsxs(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{display:"flex",flexDirection:"column",flex:1},children:[W.jsx(Hb,{isDarkMode:n,toggleTheme:e,onNewChat:p,onStop:A,isGenerating:a,showNewChatButton:!0}),W.jsx(JI,{messages:r,isGenerating:a,streamedResponse:o,messagesEndRef:u})]},"chat-screen"):W.jsxs(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1},children:[W.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",marginBottom:"2rem"},children:W.jsx(Hb,{isDarkMode:n,toggleTheme:e,onStop:A,showNewChatButton:!1})}),W.jsx(YI,{onCardClick:g})]},"welcome-screen")}),W.jsxs(Rt.div,{className:"bottom",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[W.jsx(ZI,{message:t,setMessage:i,onSend:f,isGenerating:a,error:l,onStop:A}),W.jsx(Rt.p,{className:"bottom-text",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:"Chatbot desarrollado para la UNNOBA con el objetivo de ayudar a los/as estudiantes de la misma."})]})]})};FT(document.getElementById("root")).render(W.jsx(O.StrictMode,{children:W.jsx(_V,{})}));
